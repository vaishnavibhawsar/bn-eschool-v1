"use strict";(self.webpackChunkbn_eschool=self.webpackChunkbn_eschool||[]).push([[179],{2011:(ut,Ce,P)=>{P.d(Ce,{Dh:()=>ce,GT:()=>ge,cc:()=>Re,hO:()=>$e,on:()=>q,pX:()=>ae,xv:()=>me});var c=P(4650),B=P(9260),k=P(2122);ut=P.hmd(ut);const re=["ngOnDestroy"],ae=(pe,Ye,Ze,Fe={})=>new Proxy(pe,{get:(Se,Ee)=>Ze.runOutsideAngular(()=>{var He;if(pe[Ee])return!(null===(He=Fe?.spy)||void 0===He)&&He.get&&Fe.spy.get(Ee,pe[Ee]),pe[Ee];if(re.indexOf(Ee)>-1)return()=>{};const ne=Ye.toPromise().then(ue=>{const ye=ue&&ue[Ee];return"function"==typeof ye?ye.bind(ue):ye&&ye.then?ye.then(Z=>Ze.run(()=>Z)):Ze.run(()=>ye)});return new Proxy(()=>{},{get:(ue,ye)=>ne[ye],apply:(ue,ye,Z)=>ne.then(J=>{var de;const ie=J&&J(...Z);return!(null===(de=Fe?.spy)||void 0===de)&&de.apply&&Fe.spy.apply(Ee,Z,ie),ie})})})}),ge=(pe,Ye)=>{Ye.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Fe=>{Object.defineProperty(pe.prototype,Fe,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Fe))})})};class fe{constructor(Ye){return Ye}}const ce=new c.OlP("angularfire2.app.options"),me=new c.OlP("angularfire2.app.name");function q(pe,Ye,Ze){const Se="object"==typeof Ze&&Ze||{};Se.name=Se.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const He=B.Z.apps.filter(ne=>ne&&ne.name===Se.name)[0]||Ye.runOutsideAngular(()=>B.Z.initializeApp(pe,Se));try{JSON.stringify(pe)!==JSON.stringify(He.options)&&G("error",`${He.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(He)}const G=(pe,...Ye)=>{(0,c.X6Q)()&&typeof console<"u"&&console[pe](...Ye)},K={provide:fe,useFactory:q,deps:[ce,c.R0b,[new c.FiY,me]]};let $e=(()=>{class pe{constructor(Ze){B.Z.registerVersion("angularfire",k.q4.full,"core"),B.Z.registerVersion("angularfire",k.q4.full,"app-compat"),B.Z.registerVersion("angular",c.q4F.full,Ze.toString())}static initializeApp(Ze,Fe){return{ngModule:pe,providers:[{provide:ce,useValue:Ze},{provide:me,useValue:Fe}]}}}return pe.\u0275fac=function(Ze){return new(Ze||pe)(c.LFG(c.Lbi))},pe.\u0275mod=c.oAB({type:pe}),pe.\u0275inj=c.cJS({providers:[K]}),pe})();function Re(pe,Ye,Ze,Fe,Se){const[,Ee,He]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===pe)||[];if(Ee)return function be(pe,Ye){try{return pe.toString()===Ye.toString()}catch{return pe===Ye}}(Se,He)||(we("error",`${Ye} was already initialized on the ${Ze} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Se,was:He})),Ee;{const ne=Fe();return globalThis.\u0275AngularfireInstanceCache.push([pe,ne,Se]),ne}}const et=!!ut.hot,we=(pe,...Ye)=>{(0,c.X6Q)()&&typeof console<"u"&&console[pe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ut,Ce,P)=>{P.d(Ce,{q4:()=>Cl,iC:()=>Sl,fc:()=>Qs,HU:()=>Jc,vb:()=>Aa,JM:()=>Ci,u3:()=>xa});var c=P(4650),B=P(259),k=P(5861),re=P(9681),ae=P(2090),ge=P(4859),fe=P(1877),ce=P(8766);const me="@firebase/installations",q="0.6.0",K=`w:${q}`,$e="FIS_v2",Ye=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function Fe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Se(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function Ee(D,C){return He.apply(this,arguments)}function He(){return(He=(0,k.Z)(function*(D,C){const V=(yield C.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function ne({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ue(D,{refreshToken:C}){const x=ne(D);return x.append("Authorization",function de(D){return`${$e} ${D}`}(C)),x}function ye(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,k.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function ie(D,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const V=Fe(D),Y=ne(D),se=C.getImmediate({optional:!0});if(se){const yt=yield se.getHeartbeatsHeader();yt&&Y.append("x-firebase-client",yt)}const Xe={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:$e,appId:D.appId,sdkVersion:K})},it=yield ye(()=>fetch(V,Xe));if(it.ok){const yt=yield it.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:Se(yt.authToken)}}throw yield Ee("Create Installation",it)})).apply(this,arguments)}function Ve(D){return new Promise(C=>{setTimeout(C,D)})}const sn=/^[cdef][\w-]{21}$/;function Ge(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function ln(D){return function lt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return sn.test(x)?x:""}catch{return""}}function mn(D){return`${D.appName}!${D.appId}`}const tn=new Map;function nn(D,C){const x=mn(D);Dr(x,C),function Ri(D,C){const x=function xn(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=D=>{Dr(D.data.key,D.data.fid)}),Fr}();x&&x.postMessage({key:D,fid:C}),function Wi(){0===tn.size&&Fr&&(Fr.close(),Fr=null)}()}(x,C)}function Dr(D,C){const x=tn.get(D);if(x)for(const V of x)V(C)}let Fr=null;const Vn="firebase-installations-store";let wi=null;function Ki(){return wi||(wi=(0,ce.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Vn)}})),wi}function Ke(D,C){return zn.apply(this,arguments)}function zn(){return(zn=(0,k.Z)(function*(D,C){const x=mn(D),Y=(yield Ki()).transaction(Vn,"readwrite"),se=Y.objectStore(Vn),Ae=yield se.get(x);return yield se.put(C,x),yield Y.done,(!Ae||Ae.fid!==C.fid)&&nn(D,C.fid),C})).apply(this,arguments)}function Bn(D){return gn.apply(this,arguments)}function gn(){return(gn=(0,k.Z)(function*(D){const C=mn(D),V=(yield Ki()).transaction(Vn,"readwrite");yield V.objectStore(Vn).delete(C),yield V.done})).apply(this,arguments)}function hr(D,C){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,k.Z)(function*(D,C){const x=mn(D),Y=(yield Ki()).transaction(Vn,"readwrite"),se=Y.objectStore(Vn),Ae=yield se.get(x),Xe=C(Ae);return void 0===Xe?yield se.delete(x):yield se.put(Xe,x),yield Y.done,Xe&&(!Ae||Ae.fid!==Xe.fid)&&nn(D,Xe.fid),Xe})).apply(this,arguments)}function yn(D){return _n.apply(this,arguments)}function _n(){return(_n=(0,k.Z)(function*(D){let C;const x=yield hr(D.appConfig,V=>{const Y=pn(V),se=ct(D,Y);return C=se.registrationPromise,se.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function pn(D){return Dt(D||{fid:Ge(),registrationStatus:0})}function ct(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},V=function dt(D,C){return Rt.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:V}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:zr(D)}:{installationEntry:C}}function Rt(){return(Rt=(0,k.Z)(function*(D,C){try{const x=yield ie(D,C);return Ke(D.appConfig,x)}catch(x){throw Ze(x)&&409===x.customData.serverCode?yield Bn(D.appConfig):yield Ke(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function zr(D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,k.Z)(function*(D){let C=yield Cr(D.appConfig);for(;1===C.registrationStatus;)yield Ve(100),C=yield Cr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield yn(D);return V||x}return C})).apply(this,arguments)}function Cr(D){return hr(D,C=>{if(!C)throw Ye.create("installation-not-found");return Dt(C)})}function Dt(D){return function Ur(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Ft(D,C){return ri.apply(this,arguments)}function ri(){return(ri=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const V=Qt(D,x),Y=ue(D,x),se=C.getImmediate({optional:!0});if(se){const yt=yield se.getHeartbeatsHeader();yt&&Y.append("x-firebase-client",yt)}const Xe={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:D.appId}})},it=yield ye(()=>fetch(V,Xe));if(it.ok)return Se(yield it.json());throw yield Ee("Generate Auth Token",it)})).apply(this,arguments)}function Qt(D,{fid:C}){return`${Fe(D)}/${C}/authTokens:generate`}function nr(D){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,k.Z)(function*(D,C=!1){let x;const V=yield hr(D.appConfig,se=>{if(!Xt(se))throw Ye.create("not-registered");const Ae=se.authToken;if(!C&&H(Ae))return se;if(1===Ae.requestStatus)return x=Qe(D,C),se;{if(!navigator.onLine)throw Ye.create("app-offline");const Xe=W(se);return x=wt(D,Xe),Xe}});return x?yield x:V.authToken})).apply(this,arguments)}function Qe(D,C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,k.Z)(function*(D,C){let x=yield Je(D.appConfig);for(;1===x.authToken.requestStatus;)yield Ve(100),x=yield Je(D.appConfig);const V=x.authToken;return 0===V.requestStatus?nr(D,C):V})).apply(this,arguments)}function Je(D){return hr(D,C=>{if(!Xt(C))throw Ye.create("not-registered");return function U(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function wt(D,C){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,k.Z)(function*(D,C){try{const x=yield Ft(D,C),V=Object.assign(Object.assign({},C),{authToken:x});return yield Ke(D.appConfig,V),x}catch(x){if(!Ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ke(D.appConfig,V)}else yield Bn(D.appConfig);throw x}})).apply(this,arguments)}function Xt(D){return void 0!==D&&2===D.registrationStatus}function H(D){return 2===D.requestStatus&&!function $(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function W(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function L(){return(L=(0,k.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:V}=yield yn(C);return V?V.catch(console.error):nr(C).catch(console.error),x.fid})).apply(this,arguments)}function Ne(){return(Ne=(0,k.Z)(function*(D,C=!1){const x=D;return yield tt(x),(yield nr(x,C)).token})).apply(this,arguments)}function tt(D){return st.apply(this,arguments)}function st(){return(st=(0,k.Z)(function*(D){const{registrationPromise:C}=yield yn(D);C&&(yield C)})).apply(this,arguments)}function Fs(D){return Ye.create("missing-app-config-values",{valueName:D})}const po="installations",Ls=D=>{const C=D.getProvider("app").getImmediate(),x=function vn(D){if(!D||!D.options)throw Fs("App Configuration");if(!D.name)throw Fs("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw Fs(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,re._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Us=D=>{const C=D.getProvider("app").getImmediate(),x=(0,re._getProvider)(C,po).getImmediate();return{getId:()=>function R(D){return L.apply(this,arguments)}(x),getToken:Y=>function te(D){return Ne.apply(this,arguments)}(x,Y)}};(function Ya(){(0,re._registerComponent)(new ge.wA(po,Ls,"PUBLIC")),(0,re._registerComponent)(new ge.wA("installations-internal",Us,"PRIVATE"))})(),(0,re.registerVersion)(me,q),(0,re.registerVersion)(me,q,"esm2017");const Qi="@firebase/remote-config",jn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mo{constructor(C,x,V,Y){this.client=C,this.storage=x,this.storageCache=V,this.logger=Y}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,Y=V<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var x=this;return(0,k.Z)(function*(){const[V,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(C.cacheMaxAgeMillis,V))return Y;C.eTag=Y&&Y.eTag;const se=yield x.client.fetch(C),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Ae),se})()}}function sa(D=navigator){return D.languages&&D.languages[0]||D.language}class js{constructor(C,x,V,Y,se,Ae){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=V,this.projectId=Y,this.apiKey=se,this.appId=Ae}fetch(C){var x=this;return(0,k.Z)(function*(){const[V,Y]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},it={sdk_version:x.sdkVersion,app_instance_id:V,app_instance_id_token:Y,app_id:x.appId,language_code:sa()},yt={method:"POST",headers:Xe,body:JSON.stringify(it)},Ht=fetch(Ae,yt),Et=new Promise((ir,Rn)=>{C.signal.addEventListener(()=>{const Ts=new Error("The operation was aborted.");Ts.name="AbortError",Rn(Ts)})});let gr;try{yield Promise.race([Ht,Et]),gr=yield Ht}catch(ir){let Rn="fetch-client-network";throw"AbortError"===ir?.name&&(Rn="fetch-timeout"),jn.create(Rn,{originalErrorMessage:ir?.message})}let Ln=gr.status;const Cs=gr.headers.get("ETag")||void 0;let fu,ci;if(200===gr.status){let ir;try{ir=yield gr.json()}catch(Rn){throw jn.create("fetch-client-parse",{originalErrorMessage:Rn?.message})}fu=ir.entries,ci=ir.state}if("INSTANCE_STATE_UNSPECIFIED"===ci?Ln=500:"NO_CHANGE"===ci?Ln=304:("NO_TEMPLATE"===ci||"EMPTY_CONFIG"===ci)&&(fu={}),304!==Ln&&200!==Ln)throw jn.create("fetch-status",{httpStatus:Ln});return{status:Ln,eTag:Cs,config:fu}})()}}class Xi{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,k.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,V)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:V}){var Y=this;return(0,k.Z)(function*(){yield function oi(D,C){return new Promise((x,V)=>{const Y=Math.max(C-Date.now(),0),se=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(se),V(jn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const se=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),se}catch(se){if(!function bp(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(se))throw se;const Ae={throttleEndTimeMillis:Date.now()+(0,ae.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(Ae),Y.attemptFetch(C,Ae)}})()}}class Dp{constructor(C,x,V,Y,se){this.app=C,this._client=x,this._storageCache=V,this._storage=Y,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function oa(D,C){const x=D.target.error||void 0;return jn.create(C,{originalErrorMessage:x&&x?.message})}const yo="app_namespace_store";class xc{constructor(C,x,V,Y=function Tp(){return new Promise((D,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=V=>{C(oa(V,"storage-open"))},x.onsuccess=V=>{D(V.target.result)},x.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(yo,{keyPath:"compositeKey"})}}catch(x){C(jn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,k.Z)(function*(){const V=yield x.openDbPromise;return new Promise((Y,se)=>{const Xe=V.transaction([yo],"readonly").objectStore(yo),it=x.createCompositeKey(C);try{const yt=Xe.get(it);yt.onerror=Ht=>{se(oa(Ht,"storage-get"))},yt.onsuccess=Ht=>{const Et=Ht.target.result;Y(Et?Et.value:void 0)}}catch(yt){se(jn.create("storage-get",{originalErrorMessage:yt?.message}))}})})()}set(C,x){var V=this;return(0,k.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((se,Ae)=>{const it=Y.transaction([yo],"readwrite").objectStore(yo),yt=V.createCompositeKey(C);try{const Ht=it.put({compositeKey:yt,value:x});Ht.onerror=Et=>{Ae(oa(Et,"storage-set"))},Ht.onsuccess=()=>{se()}}catch(Ht){Ae(jn.create("storage-set",{originalErrorMessage:Ht?.message}))}})})()}delete(C){var x=this;return(0,k.Z)(function*(){const V=yield x.openDbPromise;return new Promise((Y,se)=>{const Xe=V.transaction([yo],"readwrite").objectStore(yo),it=x.createCompositeKey(C);try{const yt=Xe.delete(it);yt.onerror=Ht=>{se(oa(Ht,"storage-delete"))},yt.onsuccess=()=>{Y()}}catch(yt){se(jn.create("storage-delete",{originalErrorMessage:yt?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class _o{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const x=C.storage.getLastFetchStatus(),V=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),se=yield x;se&&(C.lastFetchStatus=se);const Ae=yield V;Ae&&(C.lastSuccessfulFetchTimestampMillis=Ae);const Xe=yield Y;Xe&&(C.activeConfig=Xe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Qm(){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,k.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function Mc(){(0,re._registerComponent)(new ge.wA("remote-config",function D(C,{instanceIdentifier:x}){const V=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jn.create("registration-window");if(!(0,ae.hl)())throw jn.create("indexed-db-unavailable");const{projectId:se,apiKey:Ae,appId:Xe}=V.options;if(!se)throw jn.create("registration-project-id");if(!Ae)throw jn.create("registration-api-key");if(!Xe)throw jn.create("registration-app-id");const it=new xc(Xe,V.name,x=x||"firebase"),yt=new _o(it),Ht=new fe.Yd(Qi);Ht.logLevel=fe.in.ERROR;const Et=new js(Y,re.SDK_VERSION,x,se,Ae,Xe),gr=new Xi(Et,it),Ln=new mo(gr,it,yt,Ht),Cs=new Dp(V,Ln,yt,it,Ht);return function Hn(D){const C=(0,ae.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Cs),Cs},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Qi,"0.4.0"),(0,re.registerVersion)(Qi,"0.4.0","esm2017")}();const Er="/firebase-messaging-sw.js",wo="/firebase-cloud-messaging-push-scope",vs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ja="google.c.a.c_id",al="google.c.a.c_l",kc="google.c.a.ts",Eo="google.c.a.e";var ai=(()=>{return(D=ai||(ai={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ai;var D})();function es(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Kr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),Y=new Uint8Array(V.length);for(let se=0;se<V.length;++se)Y[se]=V.charCodeAt(se);return Y}const Hs="fcm_token_details_db",bo="fcm_token_object_Store";function Sp(D){return ul.apply(this,arguments)}function ul(){return ul=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Hs))return null;let C=null;return(yield(0,ce.X3)(Hs,5,{upgrade:(V=(0,k.Z)(function*(Y,se,Ae,Xe){var it;if(se<2||!Y.objectStoreNames.contains(bo))return;const yt=Xe.objectStore(bo),Ht=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),Ht)if(2===se){const Et=Ht;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;C={token:Et.fcmToken,createTime:null!==(it=Et.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:es(Et.vapidKey)}}}else if(3===se){const Et=Ht;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:es(Et.auth),p256dh:es(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:es(Et.vapidKey)}}}else if(4===se){const Et=Ht;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:es(Et.auth),p256dh:es(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:es(Et.vapidKey)}}}}),function(se,Ae,Xe,it){return V.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Hs),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),Mn(C)?C:null;var V}),ul.apply(this,arguments)}function Mn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const bi="firebase-messaging-store";let fr=null;function Xa(){return fr||(fr=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(bi)}})),fr}function Io(D){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,k.Z)(function*(D){const C=ui(D),V=yield(yield Xa()).transaction(bi).objectStore(bi).get(C);if(V)return V;{const Y=yield Sp(D.appConfig.senderId);if(Y)return yield on(D,Y),Y}})).apply(this,arguments)}function on(D,C){return ll.apply(this,arguments)}function ll(){return(ll=(0,k.Z)(function*(D,C){const x=ui(D),Y=(yield Xa()).transaction(bi,"readwrite");return yield Y.objectStore(bi).put(C,x),yield Y.done,C})).apply(this,arguments)}function ws(D){return cl.apply(this,arguments)}function cl(){return(cl=(0,k.Z)(function*(D){const C=ui(D),V=(yield Xa()).transaction(bi,"readwrite");yield V.objectStore(bi).delete(C),yield V.done})).apply(this,arguments)}function ui({appConfig:D}){return D.appId}const kn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function kt(D,C){return ua.apply(this,arguments)}function ua(){return(ua=(0,k.Z)(function*(D,C){const x=yield da(D),V=Te(C),Y={method:"POST",headers:x,body:JSON.stringify(V)};let se;try{se=yield(yield fetch(Gs(D.appConfig),Y)).json()}catch(Ae){throw kn.create("token-subscribe-failed",{errorInfo:Ae?.toString()})}if(se.error)throw kn.create("token-subscribe-failed",{errorInfo:se.error.message});if(!se.token)throw kn.create("token-subscribe-no-token");return se.token})).apply(this,arguments)}function xp(D,C){return la.apply(this,arguments)}function la(){return(la=(0,k.Z)(function*(D,C){const x=yield da(D),V=Te(C.subscriptionOptions),Y={method:"PATCH",headers:x,body:JSON.stringify(V)};let se;try{se=yield(yield fetch(`${Gs(D.appConfig)}/${C.token}`,Y)).json()}catch(Ae){throw kn.create("token-update-failed",{errorInfo:Ae?.toString()})}if(se.error)throw kn.create("token-update-failed",{errorInfo:se.error.message});if(!se.token)throw kn.create("token-update-no-token");return se.token})).apply(this,arguments)}function Pc(D,C){return ca.apply(this,arguments)}function ca(){return(ca=(0,k.Z)(function*(D,C){const V={method:"DELETE",headers:yield da(D)};try{const se=yield(yield fetch(`${Gs(D.appConfig)}/${C}`,V)).json();if(se.error)throw kn.create("token-unsubscribe-failed",{errorInfo:se.error.message})}catch(Y){throw kn.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function Gs({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function da(D){return Do.apply(this,arguments)}function Do(){return(Do=(0,k.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Te({p256dh:D,auth:C,endpoint:x,vapidKey:V}){const Y={web:{endpoint:x,auth:C,p256dh:D}};return V!==vs&&(Y.web.applicationPubKey=V),Y}const Kt=6048e5;function Ih(D){return Co.apply(this,arguments)}function Co(){return(Co=(0,k.Z)(function*(D){const C=yield Dh(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:es(C.getKey("auth")),p256dh:es(C.getKey("p256dh"))},V=yield Io(D.firebaseDependencies);if(V){if(Mp(V.subscriptionOptions,x))return Date.now()>=V.createTime+Kt?eu(D,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield Pc(D.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return tu(D.firebaseDependencies,x)}return tu(D.firebaseDependencies,x)})).apply(this,arguments)}function Kn(D){return To.apply(this,arguments)}function To(){return(To=(0,k.Z)(function*(D){const C=yield Io(D.firebaseDependencies);C&&(yield Pc(D.firebaseDependencies,C.token),yield ws(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function eu(D,C){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*(D,C){try{const x=yield xp(D.firebaseDependencies,C),V=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield on(D.firebaseDependencies,V),x}catch(x){throw yield Kn(D),x}})).apply(this,arguments)}function tu(D,C){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,k.Z)(function*(D,C){const V={token:yield kt(D,C),createTime:Date.now(),subscriptionOptions:C};return yield on(D,V),V.token})).apply(this,arguments)}function Dh(D,C){return ha.apply(this,arguments)}function ha(){return(ha=(0,k.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Kr(C)})})).apply(this,arguments)}function Mp(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function qs(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Yn(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const V=C.notification.body;V&&(D.notification.body=V);const Y=C.notification.image;Y&&(D.notification.image=Y);const se=C.notification.icon;se&&(D.notification.icon=se)}(C,D),function ki(D,C){!C.data||(D.data=C.data)}(C,D),function fa(D,C){var x,V,Y,se,Ae;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Xe=null!==(Y=null===(V=C.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Y?Y:null===(se=C.notification)||void 0===se?void 0:se.click_action;Xe&&(D.fcmOptions.link=Xe);const it=null===(Ae=C.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;it&&(D.fcmOptions.analyticsLabel=it)}(C,D),C}function pa(D){return"object"==typeof D&&!!D&&Ja in D}function ts(D,C){const x=[];for(let V=0;V<D.length;V++)x.push(D.charAt(V)),V<C.length&&x.push(C.charAt(V));return x.join("")}function dl(D){return kn.create("missing-app-config-values",{valueName:D})}ts("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ts("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lc{constructor(C,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Fc(D){if(!D||!D.options)throw dl("App Configuration Object");if(!D.name)throw dl("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const V of C)if(!x[V])throw dl(V);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ch(D){return So.apply(this,arguments)}function So(){return(So=(0,k.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Er,{scope:wo}),D.swRegistration.update().catch(()=>{})}catch(C){throw kn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function hl(D,C){return ga.apply(this,arguments)}function ga(){return(ga=(0,k.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Ch(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function fl(D,C){return ma.apply(this,arguments)}function ma(){return(ma=(0,k.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=vs)})).apply(this,arguments)}function xo(){return(xo=(0,k.Z)(function*(D,C){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield fl(D,C?.vapidKey),yield hl(D,C?.serviceWorkerRegistration),Ih(D)})).apply(this,arguments)}function Th(D,C,x){return ya.apply(this,arguments)}function ya(){return(ya=(0,k.Z)(function*(D,C,x){const V=Ah(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[Ja],message_name:x[al],message_time:x[kc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ah(D){switch(D){case ai.NOTIFICATION_CLICKED:return"notification_open";case ai.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Es(){return(Es=(0,k.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===ai.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(qs(x)):D.onMessageHandler.next(qs(x)));const V=x.data;pa(V)&&"1"===V[Eo]&&(yield Th(D,x.messageType,V))})).apply(this,arguments)}const bs="@firebase/messaging",An=D=>{const C=new Lc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Vc(D,C){return Es.apply(this,arguments)}(C,x)),C},ns=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:V=>function Uc(D,C){return xo.apply(this,arguments)}(C,V)}};function $c(){return pl.apply(this,arguments)}function pl(){return(pl=(0,k.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cn(){(0,re._registerComponent)(new ge.wA("messaging",An,"PUBLIC")),(0,re._registerComponent)(new ge.wA("messaging-internal",ns,"PRIVATE")),(0,re.registerVersion)(bs,"0.12.0"),(0,re.registerVersion)(bs,"0.12.0","esm2017")}();const No="analytics",Hc="firebase_id",_l="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gc="https://www.googletagmanager.com/gtag/js",On=new fe.Yd("@firebase/analytics");function ru(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function iu(D,C){const x=document.createElement("script");x.src=`${Gc}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function xh(D,C,x,V,Y,se){return ou.apply(this,arguments)}function ou(){return(ou=(0,k.Z)(function*(D,C,x,V,Y,se){const Ae=V[Y];try{if(Ae)yield C[Ae];else{const it=(yield ru(x)).find(yt=>yt.measurementId===Y);it&&(yield C[it.appId])}}catch(Xe){On.error(Xe)}D("config",Y,se)})).apply(this,arguments)}function rs(D,C,x,V,Y){return _a.apply(this,arguments)}function _a(){return(_a=(0,k.Z)(function*(D,C,x,V,Y){try{let se=[];if(Y&&Y.send_to){let Ae=Y.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Xe=yield ru(x);for(const it of Ae){const yt=Xe.find(Et=>Et.measurementId===it),Ht=yt&&C[yt.appId];if(!Ht){se=[];break}se.push(Ht)}}0===se.length&&(se=Object.values(C)),yield Promise.all(se),D("event",V,Y||{})}catch(se){On.error(se)}})).apply(this,arguments)}function qc(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Gc)&&x.src.includes(D))return x;return null}const Qn=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wa=new class wl{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function ko(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Nh(D){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,k.Z)(function*(D){var C;const{appId:x,apiKey:V}=D,Y={method:"GET",headers:ko(V)},se=_l.replace("{app-id}",x),Ae=yield fetch(se,Y);if(200!==Ae.status&&304!==Ae.status){let Xe="";try{const it=yield Ae.json();null!==(C=it.error)&&void 0!==C&&C.message&&(Xe=it.error.message)}catch{}throw Qn.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Xe})}return Ae.json()})).apply(this,arguments)}function zc(D){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,k.Z)(function*(D,C=wa,x){const{appId:V,apiKey:Y,measurementId:se}=D.options;if(!V)throw Qn.create("no-app-id");if(!Y){if(se)return{measurementId:se,appId:V};throw Qn.create("no-api-key")}const Ae=C.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Ea;return setTimeout((0,k.Z)(function*(){Xe.abort()}),void 0!==x?x:6e4),Wc({appId:V,apiKey:Y,measurementId:se},Ae,Xe,C)})).apply(this,arguments)}function Wc(D,C,x){return is.apply(this,arguments)}function is(){return(is=(0,k.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},V,Y=wa){var se;const{appId:Ae,measurementId:Xe}=D;try{yield El(V,C)}catch(it){if(Xe)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${it?.message}]`),{appId:Ae,measurementId:Xe};throw it}try{const it=yield Nh(D);return Y.deleteThrottleMetadata(Ae),it}catch(it){const yt=it;if(!au(yt)){if(Y.deleteThrottleMetadata(Ae),Xe)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:Ae,measurementId:Xe};throw it}const Ht=503===Number(null===(se=yt?.customData)||void 0===se?void 0:se.httpStatus)?(0,ae.$s)(x,Y.intervalMillis,30):(0,ae.$s)(x,Y.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Ht,backoffCount:x+1};return Y.setThrottleMetadata(Ae,Et),On.debug(`Calling attemptFetch again in ${Ht} millis`),Wc(D,Et,V,Y)}})).apply(this,arguments)}function El(D,C){return new Promise((x,V)=>{const Y=Math.max(C-Date.now(),0),se=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(se),V(Qn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function au(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Ea{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let zs,lu;function Oo(){return(Oo=(0,k.Z)(function*(D,C,x,V,Y){if(Y&&Y.global)D("event",x,V);else{const se=yield C;D("event",x,Object.assign(Object.assign({},V),{send_to:se}))}})).apply(this,arguments)}function Uo(D){lu=D}function bl(D){zs=D}function Ds(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,k.Z)(function*(){if(!(0,ae.hl)())return On.warn(Qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(D){return On.warn(Qn.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Bo(){return(Bo=(0,k.Z)(function*(D,C,x,V,Y,se,Ae){var Xe;const it=zc(D);it.then(Ln=>{x[Ln.measurementId]=Ln.appId,D.options.measurementId&&Ln.measurementId!==D.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Ln.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ln=>On.error(Ln)),C.push(it);const yt=Ds().then(Ln=>{if(Ln)return V.getId()}),[Ht,Et]=yield Promise.all([it,yt]);qc(se)||iu(se,Ht.measurementId),lu&&(Y("consent","default",lu),Uo(void 0)),Y("js",new Date);const gr=null!==(Xe=Ae?.config)&&void 0!==Xe?Xe:{};return gr.origin="firebase",gr.update=!0,null!=Et&&(gr[Hc]=Et),Y("config",Ht.measurementId,gr),zs&&(Y("set",zs),bl(void 0)),Ht.measurementId})).apply(this,arguments)}class cu{constructor(C){this.app=C}_delete(){return delete Tr[this.app.options.appId],Promise.resolve()}}let Tr={},$o=[];const Ws={};let Ho,Pi,jo="dataLayer",Kc=!1;function Ph(D,C,x){!function Rp(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),x=Qn.create("invalid-analytics-context",{errorInfo:C});On.warn(x.message)}}();const V=D.options.appId;if(!V)throw Qn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Qn.create("no-api-key");On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Tr[V])throw Qn.create("already-exists",{id:V});if(!Kc){!function su(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(jo);const{wrappedGtag:se,gtagCore:Ae}=function va(D,C,x,V,Y){let se=function(...Ae){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(se=window[Y]),window[Y]=function vl(D,C,x,V){function se(){return(se=(0,k.Z)(function*(Ae,Xe,it){try{"event"===Ae?yield rs(D,C,x,Xe,it):"config"===Ae?yield xh(D,C,x,V,Xe,it):"consent"===Ae?D("consent","update",it):D("set",Xe)}catch(yt){On.error(yt)}})).apply(this,arguments)}return function Y(Ae,Xe,it){return se.apply(this,arguments)}}(se,D,C,x),{gtagCore:se,wrappedGtag:window[Y]}}(Tr,$o,Ws,jo,"gtag");Pi=se,Ho=Ae,Kc=!0}return Tr[V]=function Oh(D,C,x,V,Y,se,Ae){return Bo.apply(this,arguments)}(D,$o,Ws,C,Ho,jo,x),new cu(D)}function Xm(){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,k.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Dl="@firebase/analytics";!function Ar(){(0,re._registerComponent)(new ge.wA(No,(C,{options:x})=>Ph(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,re._registerComponent)(new ge.wA("analytics-internal",function D(C){try{const x=C.getProvider(No).getImmediate();return{logEvent:(V,Y,se)=>function rn(D,C,x,V){D=(0,ae.m9)(D),function ba(D,C,x,V,Y){return Oo.apply(this,arguments)}(Pi,Tr[D.app.options.appId],C,x,V).catch(Y=>On.error(Y))}(x,V,Y,se)}}catch(x){throw Qn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,re.registerVersion)(Dl,"0.9.0"),(0,re.registerVersion)(Dl,"0.9.0","esm2017")}();var ss=P(4408),Zs=P(7565);const Ks=new class Fi extends Zs.v{}(class Da extends ss.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(C,x,V):(C.flush(this),0)}});var St=P(4986),Ys=P(9751),Qc=P(8505),Ca=P(5363),Sr=P(9468);const Cl=new c.GfV("7.5.0"),Di="__angularfire_symbol__analyticsIsSupportedValue",os="__angularfire_symbol__analyticsIsSupported",Jr="__angularfire_symbol__remoteConfigIsSupportedValue",Tl="__angularfire_symbol__remoteConfigIsSupported",Go="__angularfire_symbol__messagingIsSupportedValue",Al="__angularfire_symbol__messagingIsSupported";function Ci(D,C,x){if(C){if(1===C.length)return C[0];const se=C.filter(Ae=>Ae.app===x);if(1===se.length)return se[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[os]||(globalThis[os]=Xm().then(D=>globalThis[Di]=D).catch(()=>globalThis[Di]=!1)),globalThis[Al]||(globalThis[Al]=$c().then(D=>globalThis[Go]=D).catch(()=>globalThis[Go]=!1)),globalThis[Tl]||(globalThis[Tl]=Qm().then(D=>globalThis[Jr]=D).catch(()=>globalThis[Jr]=!1));const Aa=(D,C)=>{const x=C?[C]:(0,B.C6)(),V=[];return x.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Ae=>{V.includes(Ae)||V.push(Ae)})}),V};function En(){}class Ti{constructor(C,x=Ks){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,V){const Y=this.zone;return this.delegate.schedule(function(Ae){Y.runGuarded(()=>{C.apply(this,[Ae])})},x,V)}}class qo{constructor(C){this.zone=C,this.task=null}call(C,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",En,{},En,En)),x.pipe((0,Qc.b)({next:V,complete:V,error:V})).subscribe(C).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jc=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ti(Zone.current)),this.insideAngular=x.run(()=>new Ti(Zone.current,St.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(c.LFG(c.R0b))},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ui(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Xc(D){return Ui().ngZone.runOutsideAngular(()=>D())}function Vi(D){return Ui().ngZone.run(()=>D())}function Qs(D){return D.pipe((0,Ca.Q)(Ui().outsideAngular))}function Sl(D){return Ui(),function Fn(D){return function(x){return(x=x.lift(new qo(D.ngZone))).pipe((0,Sr.R)(D.outsideAngular),(0,Ca.Q)(D.insideAngular))}}(Ui())(D)}const Sa=(D,C)=>function(){const V=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),Vi(()=>D.apply(void 0,V))},xa=(D,C)=>function(){let x;const V=arguments;for(let se=0;se<arguments.length;se++)"function"==typeof V[se]&&(C&&(x||(x=Vi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",En,{},En,En)))),V[se]=Sa(V[se],x));const Y=Xc(()=>D.apply(this,V));if(!C){if(Y instanceof Ys.y){const se=Ui();return Y.pipe((0,Sr.R)(se.outsideAngular),(0,Ca.Q)(se.insideAngular))}return Vi(()=>Y)}return Y instanceof Ys.y?Y.pipe(Sl):Y instanceof Promise?Vi(()=>new Promise((se,Ae)=>Y.then(Xe=>Vi(()=>se(Xe)),Xe=>Vi(()=>Ae(Xe))))):"function"==typeof Y&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),Y.apply(this,arguments)}:Vi(()=>Y)}},552:(ut,Ce,P)=>{P.d(Ce,{$:()=>Gs,A:()=>G,B:()=>Re,G:()=>Us,H:()=>Wr,J:()=>Xi,L:()=>H,M:()=>Qa,N:()=>Nc,P:()=>St,Q:()=>Ja,R:()=>ey,T:()=>al,U:()=>vs,V:()=>ai,W:()=>es,X:()=>Sp,Y:()=>aa,Z:()=>kt,_:()=>xp,a:()=>Is,a0:()=>Ih,a1:()=>Kn,a2:()=>eu,a3:()=>tu,a4:()=>Dh,a5:()=>Mp,a6:()=>Yn,a7:()=>ki,a8:()=>pa,a9:()=>ts,aA:()=>$,aB:()=>Xe,aC:()=>Vi,aD:()=>Xc,aE:()=>pt,aI:()=>ko,aL:()=>Eo,aa:()=>Ch,ab:()=>hl,ac:()=>fl,af:()=>Th,ag:()=>Ah,ah:()=>Vc,ak:()=>bi,al:()=>gl,an:()=>Gc,ao:()=>ou,ap:()=>ye,aq:()=>Le,ar:()=>tt,as:()=>Ze,at:()=>Xs,au:()=>ci,av:()=>Nt,aw:()=>Fe,ax:()=>ne,ay:()=>gr,az:()=>J,b:()=>Qn,c:()=>Tl,d:()=>Np,e:()=>Al,f:()=>Sl,g:()=>x,h:()=>xa,i:()=>Vo,j:()=>se,k:()=>Bi,l:()=>Yc,m:()=>Lp,n:()=>yu,o:()=>ce,r:()=>ss,s:()=>Qr,u:()=>Ks});var c=P(5861),B=P(2090),k=P(9681),re=P(1877),ae=P(655),ge=P(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function K(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},be=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},et=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pe=new re.Yd("@firebase/auth");function Ye(v,...p){pe.logLevel<=re.in.ERROR&&pe.error(`Auth (${k.SDK_VERSION}): ${v}`,...p)}function Ze(v,...p){throw He(v,...p)}function Fe(v,...p){return He(v,...p)}function Se(v,p,m){const E=Object.assign(Object.assign({},be()),{[p]:m});return new B.LL("auth","Firebase",E).create(p,{appName:v.name})}function Ee(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ze(v,"argument-error"),Se(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return et.create(v,...p)}function ne(v,p,...m){if(!v)throw He(p,...m)}function ue(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Ye(p),new Error(p)}function ye(v,p){v||ue(p)}const Z=new Map;function J(v){ye(v instanceof Function,"Expected a class definition");let p=Z.get(v);return p?(ye(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Z.set(v,p),p)}function Ue(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ve(){return"http:"===lt()||"https:"===lt()}function lt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ge{constructor(p,m){this.shortDelay=p,this.longDelay=m,ye(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function sn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(v,p){ye(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class mn{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Ge(3e4,6e4);function Wt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Lt(v,p,m,E){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,c.Z)(function*(v,p,m,E,S={}){return Ri(v,S,(0,c.Z)(function*(){let O={},ee={};E&&("GET"===p?ee=E:O={body:JSON.stringify(E)});const xe=(0,B.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),nt=yield v._getAdditionalHeaders();return nt["Content-Type"]="application/json",v.languageCode&&(nt["X-Firebase-Locale"]=v.languageCode),mn.fetch()(Zi(v,v.config.apiHost,m,xe),Object.assign({method:p,headers:nt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ri(v,p,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},tn),p);try{const S=new Lr(v),O=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const ee=yield O.json();if("needConfirmation"in ee)throw Vn(v,"account-exists-with-different-credential",ee);if(O.ok&&!("errorMessage"in ee))return ee;{const xe=O.ok?ee.errorMessage:ee.error.message,[nt,_t]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Vn(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===nt)throw Vn(v,"email-already-in-use",ee);if("USER_DISABLED"===nt)throw Vn(v,"user-disabled",ee);const Zt=E[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw Se(v,Zt,_t);Ze(v,Zt)}}catch(S){if(S instanceof B.ZR)throw S;Ze(v,"network-request-failed")}})).apply(this,arguments)}function xn(v,p,m,E){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,c.Z)(function*(v,p,m,E,S={}){const O=yield Lt(v,p,m,E,S);return"mfaPendingCredential"in O&&Ze(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Zi(v,p,m,E){const S=`${p}${m}?${E}`;return v.config.emulator?ln(v.config,S):`${v.config.apiScheme}://${S}`}class Lr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Fe(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=Fe(v,p,E);return S.customData._tokenResponse=m,S}function Ki(){return(Ki=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ke(v,p){return zn.apply(this,arguments)}function zn(){return(zn=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bn(v,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function hr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function _n(){return(_n=(0,c.Z)(function*(v,p=!1){const m=(0,B.m9)(v),E=yield m.getIdToken(p),S=ct(E);ne(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const O="object"==typeof S.firebase?S.firebase:void 0,ee=O?.sign_in_provider;return{claims:S,token:E,authTime:hr(pn(S.auth_time)),issuedAtTime:hr(pn(S.iat)),expirationTime:hr(pn(S.exp)),signInProvider:ee||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function pn(v){return 1e3*Number(v)}function ct(v){const[p,m,E]=v.split(".");if(void 0===p||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,B.tV)(m);return S?JSON.parse(S):(Ye("Failed to decode base64 JWT payload"),null)}catch(S){return Ye("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Rt(v,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,c.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof B.ZR&&Wn(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Wn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Cr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Dt{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ur(v){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),S=yield Rt(v,Bn(m,{idToken:E}));ne(S?.users.length,m,"internal-error");const O=S.users[0];v._notifyReloadListener(O);const ee=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?Dn(O.providerUserInfo):[],xe=nr(v.providerData,ee),Zt=!!v.isAnonymous&&!(v.email&&O.passwordHash||xe?.length),Tn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:xe,metadata:new Dt(O.createdAt,O.lastLoginAt),isAnonymous:Zt};Object.assign(v,Tn)})).apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(v){const p=(0,B.m9)(v);yield Ur(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function nr(v,p){return[...v.filter(E=>!p.some(S=>S.providerId===E.providerId)),...p]}function Dn(v){return v.map(p=>{var{providerId:m}=p,E=(0,ae._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ie(){return(Ie=(0,c.Z)(function*(v,p){const m=yield Ri(v,{},(0,c.Z)(function*(){const E=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:O}=v.config,ee=Zi(v,S,"/v1/token",`key=${O}`),xe=yield v._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(ee,{method:"POST",headers:xe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ne(p.idToken,"internal-error"),ne(typeof p.idToken<"u","internal-error"),ne(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function dt(v){const p=ct(v);return ne(p,"internal-error"),ne(typeof p.exp<"u","internal-error"),ne(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,c.Z)(function*(){return ne(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:O,expiresIn:ee}=yield function Qe(v,p){return Ie.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(S,O,Number(ee))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:S,expirationTime:O}=m,ee=new Je;return E&&(ne("string"==typeof E,"internal-error",{appName:p}),ee.refreshToken=E),S&&(ne("string"==typeof S,"internal-error",{appName:p}),ee.accessToken=S),O&&(ne("number"==typeof O,"internal-error",{appName:p}),ee.expirationTime=O),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return ue("not implemented")}}function wt(v,p){ne("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Ct{constructor(p){var{uid:m,auth:E,stsTokenManager:S}=p,O=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Dt(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,c.Z)(function*(){const E=yield Rt(m,m.stsTokenManager.getToken(m.auth,p));return ne(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function yn(v){return _n.apply(this,arguments)}(this,p)}reload(){return function ri(v){return Qt.apply(this,arguments)}(this)}_assign(p){this!==p&&(ne(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ct(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,c.Z)(function*(){let S=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),S=!0),m&&(yield Ur(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,c.Z)(function*(){const m=yield p.getIdToken();return yield Rt(p,function wi(v,p){return Ki.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,S,O,ee,xe,nt,_t,Zt;const Tn=null!==(E=m.displayName)&&void 0!==E?E:void 0,eo=null!==(S=m.email)&&void 0!==S?S:void 0,Ss=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,_u=null!==(ee=m.photoURL)&&void 0!==ee?ee:void 0,Ml=null!==(xe=m.tenantId)&&void 0!==xe?xe:void 0,Rl=null!==(nt=m._redirectEventId)&&void 0!==nt?nt:void 0,Bh=null!==(_t=m.createdAt)&&void 0!==_t?_t:void 0,sy=null!==(Zt=m.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:Na,emailVerified:vu,isAnonymous:zo,providerData:wu,stsTokenManager:Nl}=m;ne(Na&&Nl,p,"internal-error");const $h=Je.fromJSON(this.name,Nl);ne("string"==typeof Na,p,"internal-error"),wt(Tn,p.name),wt(eo,p.name),ne("boolean"==typeof vu,p,"internal-error"),ne("boolean"==typeof zo,p,"internal-error"),wt(Ss,p.name),wt(_u,p.name),wt(Ml,p.name),wt(Rl,p.name),wt(Bh,p.name),wt(sy,p.name);const oy=new Ct({uid:Na,auth:p,email:eo,emailVerified:vu,displayName:Tn,isAnonymous:zo,photoURL:_u,phoneNumber:Ss,tenantId:Ml,stsTokenManager:$h,createdAt:Bh,lastLoginAt:sy});return wu&&Array.isArray(wu)&&(oy.providerData=wu.map(Eu=>Object.assign({},Eu))),Rl&&(oy._redirectEventId=Rl),oy}static _fromIdTokenResponse(p,m,E=!1){return(0,c.Z)(function*(){const S=new Je;S.updateFromServerResponse(m);const O=new Ct({uid:m.localId,auth:p,stsTokenManager:S,isAnonymous:E});return yield Ur(O),O})()}}const H=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,c.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,c.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,c.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function $(v,p,m){return`firebase:${v}:${p}:${m}`}class W{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:S,name:O}=this.auth;this.fullUserKey=$(this.userKey,S.apiKey,O),this.fullPersistenceKey=$("persistence",S.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Ct._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,c.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,c.Z)(function*(){if(!m.length)return new W(J(H),p,E);const S=(yield Promise.all(m.map(function(){var _t=(0,c.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let O=S[0]||J(H);const ee=$(E,p.config.apiKey,p.name);let xe=null;for(const _t of m)try{const Zt=yield _t._get(ee);if(Zt){const Tn=Ct._fromJSON(p,Zt);_t!==O&&(xe=Tn),O=_t;break}}catch{}const nt=S.filter(_t=>_t._shouldAllowMigration);return O._shouldAllowMigration&&nt.length?(O=nt[0],xe&&(yield O._set(ee,xe.toJSON())),yield Promise.all(m.map(function(){var _t=(0,c.Z)(function*(Zt){if(Zt!==O)try{yield Zt._remove(ee)}catch{}});return function(Zt){return _t.apply(this,arguments)}}())),new W(O,p,E)):new W(O,p,E)})()}}function U(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ne(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(R(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(st(p))return"Blackberry";if(De(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||te(p))&&!p.includes("edge/"))return"Chrome";if(tt(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function R(v=(0,B.z$)()){return/firefox\//i.test(v)}function L(v=(0,B.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function te(v=(0,B.z$)()){return/crios\//i.test(v)}function Ne(v=(0,B.z$)()){return/iemobile/i.test(v)}function tt(v=(0,B.z$)()){return/android/i.test(v)}function st(v=(0,B.z$)()){return/blackberry/i.test(v)}function De(v=(0,B.z$)()){return/webos/i.test(v)}function Le(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Nt(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function dn(v=(0,B.z$)()){return Le(v)||tt(v)||De(v)||st(v)||/windows phone/i.test(v)||Ne(v)}function vn(v,p=[]){let m;switch(v){case"Browser":m=U((0,B.z$)());break;case"Worker":m=`${U((0,B.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${k.SDK_VERSION}/${E}`}class Fs{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=O=>new Promise((ee,xe)=>{try{ee(p(O))}catch(nt){xe(nt)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,c.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const S of m.queue)yield S(p),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const O of E)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class po{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ls(this),this.idTokenSubscription=new Ls(this),this.beforeStateQueue=new Fs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=et,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=J(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,O;if(!E._deleted&&(E.persistenceManager=yield W.create(E,p),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,c.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let O=S,ee=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const xe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,nt=O?._redirectEventId,_t=yield m.tryRedirectSignIn(p);(!xe||xe===nt)&&_t?.user&&(O=_t.user,ee=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(ee)try{yield m.beforeStateQueue.runMiddleware(O)}catch(xe){O=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(xe))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,c.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,c.Z)(function*(){try{yield Ur(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function jt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,c.Z)(function*(){const E=p?(0,B.m9)(p):null;return E&&ne(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return p&&ne(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(J(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,c.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&J(p)||m._popupRedirectResolver;ne(E,m,"argument-error"),m.redirectPersistenceManager=yield W.create(m,[J(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,c.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,c.Z)(function*(){if(p===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,S){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(ee,this,"internal-error"),ee.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,E,S):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=vn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function pt(v){return(0,B.m9)(v)}class Ls{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Us(v,p,m){const E=pt(v);ne(E._canInitEmulator,E,"emulator-config-failed"),ne(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const S=!!m?.disableWarnings,O=Ya(p),{host:ee,port:xe}=function Qi(v){const p=Ya(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const O=S[1];return{host:O,port:$n(E.substr(O.length+1))}}{const[O,ee]=E.split(":");return{host:O,port:$n(ee)}}}(p);E.config.emulator={url:`${O}//${ee}${null===xe?"":`:${xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ee,port:xe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Vs(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ya(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function $n(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Wr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return ue("not implemented")}_getIdTokenResponse(p){return ue("not implemented")}_linkToIdToken(p,m){return ue("not implemented")}_getReauthenticationResolver(p){return ue("not implemented")}}function ii(v,p){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:resetPassword",Wt(v,p))})).apply(this,arguments)}function il(v,p){return hn.apply(this,arguments)}function hn(){return(hn=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wh(v,p){return na.apply(this,arguments)}function na(){return(na=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:update",Wt(v,p))})).apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signInWithPassword",Wt(v,p))})).apply(this,arguments)}function Vr(v,p){return $s.apply(this,arguments)}function $s(){return($s=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:sendOobCode",Wt(v,p))})).apply(this,arguments)}function Ji(v,p){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,c.Z)(function*(v,p){return Vr(v,p)})).apply(this,arguments)}function Eh(v,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,c.Z)(function*(v,p){return Vr(v,p)})).apply(this,arguments)}function si(v,p){return go.apply(this,arguments)}function go(){return(go=(0,c.Z)(function*(v,p){return Vr(v,p)})).apply(this,arguments)}function sl(v,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(v,p){return Vr(v,p)})).apply(this,arguments)}function ol(){return(ol=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,p))})).apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,p))})).apply(this,arguments)}class sa extends Wr{constructor(p,m,E,S=null){super("password",E),this._email=p,this._password=m,this._tenantId=S}static _fromEmailAndPassword(p,m){return new sa(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new sa(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,c.Z)(function*(){switch(m.signInMethod){case"password":return function ra(v,p){return Bs.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Zr(v,p){return ol.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ze(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return il(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ep(v,p){return mo.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Ze(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function js(v,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signInWithIdp",Wt(v,p))})).apply(this,arguments)}class Xi extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Xi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ze("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S}=m,O=(0,ae._T)(m,["providerId","signInMethod"]);if(!E||!S)return null;const ee=new Xi(E,S);return ee.idToken=O.idToken||void 0,ee.accessToken=O.accessToken||void 0,ee.secret=O.secret,ee.nonce=O.nonce,ee.pendingToken=O.pendingToken||null,ee}_getIdTokenResponse(p){return js(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,js(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,js(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function Ip(v,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:sendVerificationCode",Wt(v,p))})).apply(this,arguments)}function oa(){return(oa=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,p))})).apply(this,arguments)}function Sc(){return(Sc=(0,c.Z)(function*(v,p){const m=yield xn(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,p));if(m.temporaryProof)throw Vn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Cp={USER_NOT_FOUND:"user-not-found"};function xc(){return(xc=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Cp)})).apply(this,arguments)}class _o extends Wr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new _o({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new _o({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Dp(v,p){return oa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function yo(v,p){return Sc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Tp(v,p){return xc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:O}=p;return E||m||S||O?new _o({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:O}):null}}class vo{constructor(p){var m,E,S,O,ee,xe;const nt=(0,B.zd)((0,B.pd)(p)),_t=null!==(m=nt.apiKey)&&void 0!==m?m:null,Zt=null!==(E=nt.oobCode)&&void 0!==E?E:null,Tn=function Mc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=nt.mode)&&void 0!==S?S:null);ne(_t&&Zt&&Tn,"argument-error"),this.apiKey=_t,this.operation=Tn,this.code=Zt,this.continueUrl=null!==(O=nt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ee=nt.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(xe=nt.tenantId)&&void 0!==xe?xe:null}static parseLink(p){const m=function Rc(v){const p=(0,B.zd)((0,B.pd)(v)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,E=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(E?(0,B.zd)((0,B.pd)(E)).link:null)||E||m||p||v}(p);try{return new vo(m)}catch{return null}}}let Qa=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return sa._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=vo.parseLink(E);return ne(S,"argument-error"),sa._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Er{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class wo extends Er{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class vs extends wo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),Xi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ne(p.idToken||p.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return vs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return vs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:O,nonce:ee,providerId:xe}=p;if(!E&&!S&&!m&&!O||!xe)return null;try{return new vs(xe)._credential({idToken:m,accessToken:E,nonce:ee,pendingToken:O})}catch{return null}}}let Nc=(()=>{class v extends wo{constructor(){super("facebook.com")}static credential(m){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ja=(()=>{class v extends wo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return v.credential(E,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),al=(()=>{class v extends wo{constructor(){super("github.com")}static credential(m){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Eo extends Wr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return js(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,js(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,js(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S,pendingToken:O}=m;return E&&S&&O&&E===S?new Eo(E,O):null}static _create(p,m){return new Eo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ai extends Er{constructor(p){ne(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ai.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ai.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Eo.fromJSON(p);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return Eo._create(E,m)}catch{return null}}}let es=(()=>{class v extends wo{constructor(){super("twitter.com")}static credential(m,E){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return v.credential(E,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Kr(v,p){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signUp",Wt(v,p))})).apply(this,arguments)}class Ei{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,S=!1){return(0,c.Z)(function*(){const O=yield Ct._fromIdTokenResponse(p,E,S),ee=bo(E);return new Ei({user:O,providerId:ee,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const S=bo(E);return new Ei({user:p,providerId:S,_tokenResponse:E,operationType:m})})()}}function bo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Sp(v){return ul.apply(this,arguments)}function ul(){return(ul=(0,c.Z)(function*(v){var p;const m=pt(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Ei({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Kr(m,{returnSecureToken:!0}),S=yield Ei._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Mn extends B.ZR{constructor(p,m,E,S){var O;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Mn.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,S){return new Mn(p,m,E,S)}}function Oc(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Mn._fromErrorAndOperation(v,O,p,E):O})}function bh(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function bi(v,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v);yield Ni(!0,m,p);const{providerUserInfo:E}=yield Ke(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),S=bh(E||[]);return m.providerData=m.providerData.filter(O=>S.has(O.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Xa(v,p){return Io.apply(this,arguments)}function Io(){return(Io=(0,c.Z)(function*(v,p,m=!1){const E=yield Rt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Ei._forOperation(v,"link",E)})).apply(this,arguments)}function Ni(v,p,m){return on.apply(this,arguments)}function on(){return(on=(0,c.Z)(function*(v,p,m){yield Ur(p);const S=!1===v?"provider-already-linked":"no-such-provider";ne(bh(p.providerData).has(m)===v,p.auth,S)})).apply(this,arguments)}function ll(v,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,c.Z)(function*(v,p,m=!1){const{auth:E}=v,S="reauthenticate";try{const O=yield Rt(v,Oc(E,S,p,v),m);ne(O.idToken,E,"internal-error");const ee=ct(O.idToken);ne(ee,E,"internal-error");const{sub:xe}=ee;return ne(v.uid===xe,E,"user-mismatch"),Ei._forOperation(v,S,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ze(E,"user-mismatch"),O}})).apply(this,arguments)}function cl(v,p){return ui.apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(v,p,m=!1){const E="signIn",S=yield Oc(v,E,p),O=yield Ei._fromIdTokenResponse(v,E,S);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function aa(v,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,c.Z)(function*(v,p){return cl(pt(v),p)})).apply(this,arguments)}function kt(v,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v);return yield Ni(!1,m,p.providerId),Xa(m,p)})).apply(this,arguments)}function xp(v,p){return la.apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(v,p){return ll((0,B.m9)(v),p)})).apply(this,arguments)}function Pc(v,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,c.Z)(function*(v,p){return xn(v,"POST","/v1/accounts:signInWithCustomToken",Wt(v,p))})).apply(this,arguments)}function Gs(v,p){return da.apply(this,arguments)}function da(){return(da=(0,c.Z)(function*(v,p){const m=pt(v),E=yield Pc(m,{token:p,returnSecureToken:!0}),S=yield Ei._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Do{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Te._fromServerResponse(p,m):Ze(p,"internal-error")}}class Te extends Do{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Te(m)}}function Kt(v,p,m){var E;ne((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),ne(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Ih(v,p,m){return Co.apply(this,arguments)}function Co(){return(Co=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v),S={requestType:"PASSWORD_RESET",email:p};m&&Kt(E,S,m),yield Eh(E,S)})).apply(this,arguments)}function Kn(v,p,m){return To.apply(this,arguments)}function To(){return(To=(0,c.Z)(function*(v,p,m){yield ii((0,B.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function eu(v,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(v,p){yield wh((0,B.m9)(v),{oobCode:p})})).apply(this,arguments)}function tu(v,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v),E=yield ii(m,{oobCode:p}),S=E.requestType;switch(ne(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(E.mfaInfo,m,"internal-error");default:ne(E.email,m,"internal-error")}let O=null;return E.mfaInfo&&(O=Do._fromServerResponse(pt(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:S}})).apply(this,arguments)}function Dh(v,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(v,p){const{data:m}=yield tu((0,B.m9)(v),p);return m.email})).apply(this,arguments)}function Mp(v,p,m){return qs.apply(this,arguments)}function qs(){return(qs=(0,c.Z)(function*(v,p,m){const E=pt(v),S=yield Kr(E,{returnSecureToken:!0,email:p,password:m}),O=yield Ei._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function Yn(v,p,m){return aa((0,B.m9)(v),Qa.credential(p,m))}function ki(v,p,m){return fa.apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v),S={requestType:"EMAIL_SIGNIN",email:p};ne(m.handleCodeInApp,E,"argument-error"),m&&Kt(E,S,m),yield si(E,S)})).apply(this,arguments)}function pa(v,p){return"EMAIL_SIGNIN"===vo.parseLink(p)?.operation}function ts(v,p,m){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v),S=Qa.credentialWithLink(p,m||Ue());return ne(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),aa(E,S)})).apply(this,arguments)}function dl(v,p){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:createAuthUri",Wt(v,p))})).apply(this,arguments)}function Ch(v,p){return So.apply(this,arguments)}function So(){return(So=(0,c.Z)(function*(v,p){const E={identifier:p,continueUri:Ve()?Ue():"http://localhost"},{signinMethods:S}=yield dl((0,B.m9)(v),E);return S||[]})).apply(this,arguments)}function hl(v,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,c.Z)(function*(v,p){const m=(0,B.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Kt(m.auth,S,p);const{email:O}=yield Ji(m.auth,S);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function fl(v,p,m){return ma.apply(this,arguments)}function ma(){return(ma=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Kt(E.auth,O,m);const{email:ee}=yield sl(E.auth,O);ee!==v.email&&(yield v.reload())})).apply(this,arguments)}function Uc(v,p){return xo.apply(this,arguments)}function xo(){return(xo=(0,c.Z)(function*(v,p){return Lt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Th(v,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,B.m9)(v),O={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},ee=yield Rt(E,Uc(E.auth,O));E.displayName=ee.displayName||null,E.photoURL=ee.photoUrl||null;const xe=E.providerData.find(({providerId:nt})=>"password"===nt);xe&&(xe.displayName=E.displayName,xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ee)})).apply(this,arguments)}function Ah(v,p){return Es((0,B.m9)(v),p,null)}function Vc(v,p){return Es((0,B.m9)(v),null,p)}function Es(v,p,m){return bs.apply(this,arguments)}function bs(){return(bs=(0,c.Z)(function*(v,p,m){const{auth:E}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const ee=yield Rt(v,il(E,O));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class An{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class ns extends An{constructor(p,m,E,S){super(p,m,E),this.username=S}}class Cn extends An{constructor(p,m){super(p,"facebook.com",m)}}class $c extends ns{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class pl extends An{constructor(p,m){super(p,"google.com",m)}}class Sh extends ns{constructor(p,m,E){super(p,"twitter.com",m,E)}}function gl(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Bc(v){var p,m;if(!v)return null;const{providerId:E}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const ee=null===(m=null===(p=ct(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(ee)return new An(O,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!E)return null;switch(E){case"facebook.com":return new Cn(O,S);case"github.com":return new $c(O,S);case"google.com":return new pl(O,S);case"twitter.com":return new Sh(O,S,v.screenName||null);case"custom":case"anonymous":return new An(O,null);default:return new An(O,E,S)}}(m)}class li{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new li("enroll",p,m)}static _fromMfaPendingCredential(p){return new li("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return li._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return li._fromIdtoken(p.multiFactorSession.idToken)}return null}}class _l{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=pt(p),S=m.customData._serverResponse,O=(S.mfaInfo||[]).map(xe=>Do._fromServerResponse(E,xe));ne(S.mfaPendingCredential,E,"internal-error");const ee=li._fromMfaPendingCredential(S.mfaPendingCredential);return new _l(ee,O,function(){var xe=(0,c.Z)(function*(nt){const _t=yield nt._process(E,ee);delete S.mfaInfo,delete S.mfaPendingCredential;const Zt=Object.assign(Object.assign({},S),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(m.operationType){case"signIn":const Tn=yield Ei._fromIdTokenResponse(E,m.operationType,Zt);return yield E._updateCurrentUser(Tn.user),Tn;case"reauthenticate":return ne(m.user,E,"internal-error"),Ei._forOperation(m.user,m.operationType,Zt);default:Ze(E,"internal-error")}});return function(nt){return xe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,c.Z)(function*(){return m.signInResolver(p)})()}}function Gc(v,p){var m;const E=(0,B.m9)(v),S=p;return ne(p.customData.operationType,E,"argument-error"),ne(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),_l._fromError(E,S)}function On(v,p){return Lt(v,"POST","/v2/accounts/mfaEnrollment:start",Wt(v,p))}class su{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Do._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new su(p)}getSession(){var p=this;return(0,c.Z)(function*(){return li._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,c.Z)(function*(){const S=p,O=yield E.getSession(),ee=yield Rt(E.user,S._process(E.user.auth,O,m));return yield E.user._updateTokensIfNecessary(ee),E.user.reload()})()}unenroll(p){var m=this;return(0,c.Z)(function*(){const E="string"==typeof p?p:p.uid,S=yield m.user.getIdToken(),O=yield Rt(m.user,function iu(v,p){return Lt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(v,p))}(m.user.auth,{idToken:S,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ee})=>ee!==E),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(ee){if("auth/user-token-expired"!==ee?.code)throw ee}})()}}const xh=new WeakMap;function ou(v){const p=(0,B.m9)(v);return xh.has(p)||xh.set(p,su._fromUser(p)),xh.get(p)}const rs="__sak";class _a{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(rs,"1"),this.storage.removeItem(rs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qn=(()=>{class v extends _a{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vl(){const v=(0,B.z$)();return L(v)||Le(v)}()&&function Yi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=dn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),O=this.localCache[E];S!==O&&m(E,O,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((xe,nt,_t)=>{this.notifyListeners(xe,_t)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(S);if(m.newValue!==xe)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const O=()=>{const xe=this.storage.getItem(S);!E&&this.localCache[S]===xe||this.notifyListeners(S,xe)},ee=this.storage.getItem(S);!function Pt(){return(0,B.w1)()&&10===document.documentMode}()||ee===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const O of Array.from(S))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,O=this;return(0,c.Z)(function*(){yield S().call(O,m,E),O.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,c.Z)(function*(){const O=yield E().call(S,m);return S.localCache[m]=JSON.stringify(O),O})()}_remove(m){var E=()=>super._remove,S=this;return(0,c.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),Is=(()=>{class v extends _a{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let wa=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(O=>O.isListeningto(m));if(E)return E;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,c.Z)(function*(){const S=m,{eventId:O,eventType:ee,data:xe}=S.data,nt=E.handlersMap[ee];if(!nt?.size)return;S.ports[0].postMessage({status:"ack",eventId:O,eventType:ee});const _t=Array.from(nt).map(function(){var Tn=(0,c.Z)(function*(eo){return eo(S.origin,xe)});return function(eo){return Tn.apply(this,arguments)}}()),Zt=yield function wl(v){return Promise.all(v.map(function(){var p=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(_t);S.ports[0].postMessage({status:"done",eventId:O,eventType:ee,response:Zt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ko(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class Nh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var S=this;return(0,c.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ee,xe;return new Promise((nt,_t)=>{const Zt=ko("",20);O.port1.start();const Tn=setTimeout(()=>{_t(new Error("unsupported_event"))},E);xe={messageChannel:O,onMessage(eo){const Ss=eo;if(Ss.data.eventId===Zt)switch(Ss.data.status){case"ack":clearTimeout(Tn),ee=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),nt(Ss.data.response);break;default:clearTimeout(Tn),clearTimeout(ee),_t(new Error("invalid_response"))}}},S.handlers.add(xe),O.port1.addEventListener("message",xe.onMessage),S.target.postMessage({eventType:p,eventId:Zt,data:m},[O.port2])}).finally(()=>{xe&&S.removeMessageHandler(xe)})})()}}function Pn(){return window}function Yr(){return typeof Pn().WorkerGlobalScope<"u"&&"function"==typeof Pn().importScripts}function is(){return(is=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ea="firebaseLocalStorageDb",ba="firebaseLocalStorage",Oo="fbase_key";class Po{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Fo(v,p){return v.transaction([ba],p?"readwrite":"readonly").objectStore(ba)}function uu(){const v=indexedDB.open(Ea,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(ba,{keyPath:Oo})}catch(S){m(S)}}),v.addEventListener("success",(0,c.Z)(function*(){const E=v.result;E.objectStoreNames.contains(ba)?p(E):(E.close(),yield function Zc(){const v=indexedDB.deleteDatabase(Ea);return new Po(v).toPromise()}(),p(yield uu()))}))})}function Ia(v,p,m){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(v,p,m){const E=Fo(v,!0).put({[Oo]:p,value:m});return new Po(E).toPromise()})).apply(this,arguments)}function Lo(){return(Lo=(0,c.Z)(function*(v,p){const m=Fo(v,!1).get(p),E=yield new Po(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function lu(v,p){const m=Fo(v,!0).delete(p);return new Po(m).toPromise()}const Vo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield uu()),m.db})()}_withRetries(m){var E=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const O=yield E._openDb();return yield m(O)}catch(O){if(S++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return Yr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=wa._getInstance(function au(){return Yr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(S,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(S,O){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(S,O){return["keyChanged"]});return function(S,O){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function Wc(){return is.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Nh(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=O[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function El(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield uu();return yield Ia(m,rs,"1"),yield lu(m,rs),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(O=>Ia(O,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,c.Z)(function*(){const S=yield E._withRetries(O=>function kh(v,p){return Lo.apply(this,arguments)}(O,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(S=>lu(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const E=yield m._withRetries(ee=>{const xe=Fo(ee,!1).getAll();return new Po(xe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],O=new Set;for(const{fbase_key:ee,value:xe}of E)O.add(ee),JSON.stringify(m.localCache[ee])!==JSON.stringify(xe)&&(m.notifyListeners(ee,xe),S.push(ee));for(const ee of Object.keys(m.localCache))m.localCache[ee]&&!O.has(ee)&&(m.notifyListeners(ee,null),S.push(ee));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const O of Array.from(S))O(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Oh(v,p){return Lt(v,"POST","/v2/accounts/mfaSignIn:start",Wt(v,p))}function Tr(){return(Tr=(0,c.Z)(function*(v){return(yield Lt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ws(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=S=>{const O=Fe("internal-error");O.customData=S,m(O)},E.type="text/javascript",E.charset="UTF-8",function $o(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function jo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Pi=1e12;class Kc{constructor(p){this.auth=p,this.counter=Pi,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new wn(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||Pi;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Pi))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,c.Z)(function*(){var E;return null===(E=m._widgets.get(p||Pi))||void 0===E||E.execute(),""})()}}class wn{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;ne(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Rp(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ph=jo("rcb"),O0=new Ge(3e4,6e4);class Xm{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Pn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ne(function Fh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Pn().grecaptcha):new Promise((E,S)=>{const O=Pn().setTimeout(()=>{S(Fe(p,"network-request-failed"))},O0.get());Pn()[Ph]=()=>{Pn().clearTimeout(O),delete Pn()[Ph];const xe=Pn().grecaptcha;if(!xe)return void S(Fe(p,"internal-error"));const nt=xe.render;xe.render=(_t,Zt)=>{const Tn=nt(_t,Zt);return this.counter++,Tn},this.hostLanguage=m,E(xe)},Ws(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Ph,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),S(Fe(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Pn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class P0{load(p){return(0,c.Z)(function*(){return new Kc(p)})()}clearedOneInstance(){}}const du="recaptcha",F0={theme:"light",type:"image"};class ey{constructor(p,m=Object.assign({},F0),E){this.parameters=m,this.type=du,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pt(E),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;ne(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new P0:new Xm,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(O=>{const ee=xe=>{!xe||(p.tokenChangeListeners.delete(ee),O(xe))};p.tokenChangeListeners.add(ee),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Pn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){ne(Ve()&&!Yr(),p.auth,"internal-error"),yield function pr(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function cu(v){return Tr.apply(this,arguments)}(p.auth);ne(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rn{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=_o._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Qr(v,p,m){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,c.Z)(function*(v,p,m){const E=pt(v),S=yield Zs(E,p,(0,B.m9)(m));return new rn(S,O=>aa(E,O))})).apply(this,arguments)}function Yc(v,p,m){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v);yield Ni(!1,E,"phone");const S=yield Zs(E.auth,p,(0,B.m9)(m));return new rn(S,O=>kt(E,O))})).apply(this,arguments)}function ss(v,p,m){return Da.apply(this,arguments)}function Da(){return(Da=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v),S=yield Zs(E.auth,p,(0,B.m9)(m));return new rn(S,O=>xp(E,O))})).apply(this,arguments)}function Zs(v,p,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,c.Z)(function*(v,p,m){var E;const S=yield m.verify();try{let O;if(ne("string"==typeof S,v,"argument-error"),ne(m.type===du,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const ee=O.session;if("phoneNumber"in O)return ne("enroll"===ee.type,v,"internal-error"),(yield On(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ne("signin"===ee.type,v,"internal-error");const xe=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return ne(xe,v,"missing-multi-factor-info"),(yield Oh(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield Ip(v,{phoneNumber:O.phoneNumber,recaptchaToken:S});return ee}}finally{m._reset()}})).apply(this,arguments)}function Ks(v,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,c.Z)(function*(v,p){yield Xa((0,B.m9)(v),p)})).apply(this,arguments)}let St=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=pt(m)}verifyPhoneNumber(m,E){return Zs(this.auth,m,(0,B.m9)(E))}static credential(m,E){return _o._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?_o._fromTokenResponse(E,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ys(v,p){return p?J(p):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Qc extends Wr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return js(p,this._buildIdpRequest())}_linkToIdToken(p,m){return js(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return js(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Ca(v){return cl(v.auth,new Qc(v),v.bypassAuthState)}function Sr(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),ll(m,new Qc(v),v.bypassAuthState)}function Cl(v){return Di.apply(this,arguments)}function Di(){return(Di=(0,c.Z)(function*(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),Xa(m,new Qc(v),v.bypassAuthState)})).apply(this,arguments)}class os{constructor(p,m,E,S,O=!1){this.auth=p,this.resolver=E,this.user=S,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,c.Z)(function*(E,S){p.pendingPromise={resolve:E,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:O,tenantId:ee,error:xe,type:nt}=p;if(xe)return void m.reject(xe);const _t={auth:m.auth,requestUri:E,sessionId:S,tenantId:ee||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(nt)(_t))}catch(Zt){m.reject(Zt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ca;case"linkViaPopup":case"linkViaRedirect":return Cl;case"reauthViaPopup":case"reauthViaRedirect":return Sr;default:Ze(this.auth,"internal-error")}}resolve(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jr=new Ge(2e3,1e4);function Tl(v,p,m){return Go.apply(this,arguments)}function Go(){return(Go=(0,c.Z)(function*(v,p,m){const E=pt(v);Ee(v,p,Er);const S=Ys(E,m);return new hu(E,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function Al(v,p,m){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v);Ee(E.auth,p,Er);const S=Ys(E.auth,m);return new hu(E.auth,"reauthViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}function Np(v,p,m){return Li.apply(this,arguments)}function Li(){return(Li=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v);Ee(E.auth,p,Er);const S=Ys(E.auth,m);return new hu(E.auth,"linkViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}let hu=(()=>{class v extends os{constructor(m,E,S,O,ee){super(m,E,O,ee),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const E=yield m.execute();return ne(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,c.Z)(function*(){ye(1===m.filter.length,"Popup operations only handle one event");const E=ko();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Fe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Jr.get())};m()}}return v.currentPopupAction=null,v})();const Aa=new Map;class En extends os{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,c.Z)(function*(){let E=Aa.get(m.auth._key());if(!E){try{const O=(yield function Ti(v,p){return qo.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(O)}catch(S){E=()=>Promise.reject(S)}Aa.set(m.auth._key(),E)}return m.bypassAuthState||Aa.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const S=yield E.auth._redirectUserForId(p.eventId);if(S)return E.user=S,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function qo(){return(qo=(0,c.Z)(function*(v,p){const m=Js(p),E=Qs(v);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function Jc(v,p){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,c.Z)(function*(v,p){return Qs(v)._set(Js(p),"true")})).apply(this,arguments)}function Xc(){Aa.clear()}function Vi(v,p){Aa.set(v._key(),p)}function Qs(v){return J(v._redirectPersistence)}function Js(v){return $("pendingRedirect",v.config.apiKey,v.name)}function Sl(v,p,m){return function Fn(v,p,m){return Sa.apply(this,arguments)}(v,p,m)}function Sa(){return(Sa=(0,c.Z)(function*(v,p,m){const E=pt(v);Ee(v,p,Er);const S=Ys(E,m);return yield Jc(S,E),S._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function xa(v,p,m){return function D(v,p,m){return C.apply(this,arguments)}(v,p,m)}function C(){return(C=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v);Ee(E.auth,p,Er);const S=Ys(E.auth,m);yield Jc(S,E.auth);const O=yield yt(E);return S._openRedirect(E.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function x(v,p,m){return function V(v,p,m){return Y.apply(this,arguments)}(v,p,m)}function Y(){return(Y=(0,c.Z)(function*(v,p,m){const E=(0,B.m9)(v);Ee(E.auth,p,Er);const S=Ys(E.auth,m);yield Ni(!1,E,p.providerId),yield Jc(S,E.auth);const O=yield yt(E);return S._openRedirect(E.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function se(v,p){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,c.Z)(function*(v,p){return yield pt(v)._initializationPromise,Xe(v,p,!1)})).apply(this,arguments)}function Xe(v,p){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(v,p,m=!1){const E=pt(v),S=Ys(E,p),ee=yield new En(E,S,m).execute();return ee&&!m&&(delete ee.user._redirectEventId,yield E._persistUserIfCurrent(ee.user),yield E._setRedirectUser(null,p)),ee})).apply(this,arguments)}function yt(v){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,c.Z)(function*(v){const p=ko(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class gr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function fu(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cs(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Cs(p)){const S=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Fe(this.auth,S))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ln(p))}saveEventToCache(p){this.cachedEventUids.add(Ln(p)),this.lastProcessedEventTime=Date.now()}}function Ln(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Cs({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function ci(v){return ir.apply(this,arguments)}function ir(){return(ir=(0,c.Z)(function*(v,p={}){return Lt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Rn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ts=/^https?/;function kp(){return(kp=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield ci(v);for(const m of p)try{if(QI(m))return}catch{}Ze(v,"unauthorized-domain")})).apply(this,arguments)}function QI(v){const p=Ue(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&ee.hostname===E}if(!Ts.test(m))return!1;if(Rn.test(v))return E===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Ma=new Ge(3e4,6e4);function pu(){const v=Pn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let As=null;function Op(v){return As=As||function Uh(v){return new Promise((p,m)=>{var E,S,O;function ee(){pu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{pu(),m(Fe(v,"network-request-failed"))},timeout:Ma.get()})}if(null!==(S=null===(E=Pn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(O=Pn().gapi)||void 0===O||!O.load){const xe=jo("iframefcb");return Pn()[xe]=()=>{gapi.load?ee():m(Fe(v,"network-request-failed"))},Ws(`https://apis.google.com/js/api.js?onload=${xe}`).catch(nt=>m(nt))}ee()}}).catch(p=>{throw As=null,p})}(v),As}const Vh=new Ge(5e3,15e3),ty={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L0(v){const p=v.config;ne(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?ln(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:k.SDK_VERSION},S=XI.get(v.config.apiHost);S&&(E.eid=S);const O=v._getFrameworks();return O.length&&(E.fw=O.join(",")),`${m}?${(0,B.xO)(E).slice(1)}`}function ed(){return ed=(0,c.Z)(function*(v){const p=yield Op(v),m=Pn().gapi;return ne(m,v,"internal-error"),p.open({where:document.body,url:L0(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ty,dontclear:!0},E=>new Promise(function(){var S=(0,c.Z)(function*(O,ee){yield E.restyle({setHideOnLeave:!1});const xe=Fe(v,"network-request-failed"),nt=Pn().setTimeout(()=>{ee(xe)},Vh.get());function _t(){Pn().clearTimeout(nt),O(E)}E.ping(_t).then(_t,()=>{ee(xe)})});return function(O,ee){return S.apply(this,arguments)}}()))}),ed.apply(this,arguments)}const eD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ny{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xs(v,p,m,E,S,O){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:k.SDK_VERSION,eventId:S};if(p instanceof Er){p.setDefaultLanguage(v.languageCode),ee.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(ee.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nt,_t]of Object.entries(O||{}))ee[nt]=_t}if(p instanceof wo){const nt=p.getScopes().filter(_t=>""!==_t);nt.length>0&&(ee.scopes=nt.join(","))}v.tenantId&&(ee.tid=v.tenantId);const xe=ee;for(const nt of Object.keys(xe))void 0===xe[nt]&&delete xe[nt];return`${function id({config:v}){return v.emulator?ln(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(xe).slice(1)}`}const xl="webStorageSupport",Bi=class sd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Is,this._completeRedirectFn=Xe,this._overrideRedirectResult=Vi}_openPopup(p,m,E,S){var O=this;return(0,c.Z)(function*(){var ee;ye(null===(ee=O.eventManagers[p._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const xe=Xs(p,m,E,Ue(),S);return function Fp(v,p,m,E=500,S=600){const O=Math.max((window.screen.availHeight-S)/2,0).toString(),ee=Math.max((window.screen.availWidth-E)/2,0).toString();let xe="";const nt=Object.assign(Object.assign({},eD),{width:E.toString(),height:S.toString(),top:O,left:ee}),_t=(0,B.z$)().toLowerCase();m&&(xe=te(_t)?"_blank":m),R(_t)&&(p=p||"http://localhost",nt.scrollbars="yes");const Zt=Object.entries(nt).reduce((eo,[Ss,_u])=>`${eo}${Ss}=${_u},`,"");if(function cn(v=(0,B.z$)()){var p;return Le(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(_t)&&"_self"!==xe)return function nd(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",xe),new ny(null);const Tn=window.open(p||"",xe,Zt);ne(Tn,v,"popup-blocked");try{Tn.focus()}catch{}return new ny(Tn)}(p,xe,ko())})()}_openRedirect(p,m,E,S){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(p),function zc(v){Pn().location.href=v}(Xs(p,m,E,Ue(),S)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:S,promise:O}=this.eventManagers[m];return S?Promise.resolve(S):(ye(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,c.Z)(function*(){const E=yield function U0(v){return ed.apply(this,arguments)}(p),S=new gr(p);return E.register("authEvent",O=>(ne(O?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:S},m.iframes[p._key()]=E,S})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(xl,{type:xl},S=>{var O;const ee=null===(O=S?.[0])||void 0===O?void 0:O[xl];void 0!==ee&&m(!!ee),Ze(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Lh(v){return kp.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return dn()||L()||Le()}};class ad extends class od{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return ue("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ad(p)}_finalizeEnroll(p,m,E){return function ru(v,p){return Lt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Bo(v,p){return Lt(v,"POST","/v2/accounts/mfaSignIn:finalize",Wt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Lp=(()=>{class v{constructor(){}static assertion(m){return ad._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var ud="@firebase/auth";class j0{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ld=(0,B.Pz)("authIdTokenMaxAge")||300;let mu=null;const br=v=>function(){var p=(0,c.Z)(function*(m){const E=m&&(yield m.getIdTokenResult()),S=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(S&&S>ld)return;const O=E?.token;mu!==O&&(mu=O,yield fetch(v,{method:O?"POST":"DELETE",headers:O?{Authorization:`Bearer ${O}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function yu(v=(0,k.getApp)()){const p=(0,k._getProvider)(v,"auth");if(p.isInitialized())return p.getImmediate();const m=function de(v,p){const m=(0,k._getProvider)(v,"auth");if(m.isInitialized()){const S=m.getImmediate(),O=m.getOptions();if((0,B.vZ)(O,p??{}))return S;Ze(S,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Bi,persistence:[Vo,Qn,Is]}),E=(0,B.Pz)("authTokenSyncURL");if(E){const O=br(E);(function nu(v,p,m){(0,B.m9)(v).beforeAuthStateChanged(p,m)})(m,O,()=>O(m.currentUser)),function yl(v,p,m,E){(0,B.m9)(v).onIdTokenChanged(p,m,E)}(m,ee=>O(ee))}const S=(0,B.q4)("auth");return S&&Us(m,`http://${S}`),m}!function ry(v){(0,k._registerComponent)(new ge.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:O,authDomain:ee}=E.options;return((xe,nt)=>{ne(O&&!O.includes(":"),"invalid-api-key",{appName:xe.name}),ne(!ee?.includes(":"),"argument-error",{appName:xe.name});const _t={apiKey:O,authDomain:ee,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vn(v)},Zt=new po(xe,nt,_t);return function ie(v,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(J);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(Zt,m),Zt})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ge.wA("auth-internal",p=>{const m=pt(p.getProvider("auth").getImmediate());return new j0(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(ud,"0.21.0",function H0(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,k.registerVersion)(ud,"0.21.0","esm2017")}("Browser")},2090:(ut,Ce,P)=>{P.d(Ce,{$s:()=>Je,BH:()=>jt,G6:()=>Ee,L:()=>ce,LL:()=>tn,P0:()=>Ve,Pz:()=>sn,Sg:()=>Ge,UG:()=>be,US:()=>ge,ZB:()=>G,ZR:()=>mn,aH:()=>lt,b$:()=>pe,eu:()=>ne,hl:()=>He,jU:()=>et,m9:()=>Xt,ne:()=>_n,pd:()=>Ps,q4:()=>Ue,r3:()=>Lr,ru:()=>we,tV:()=>me,uI:()=>Re,vZ:()=>Ke,w1:()=>Ze,xO:()=>gn,xb:()=>wi,z$:()=>$e,zI:()=>ue,zd:()=>hr});const re=function(H){const $=[];let W=0;for(let U=0;U<H.length;U++){let R=H.charCodeAt(U);R<128?$[W++]=R:R<2048?($[W++]=R>>6|192,$[W++]=63&R|128):55296==(64512&R)&&U+1<H.length&&56320==(64512&H.charCodeAt(U+1))?(R=65536+((1023&R)<<10)+(1023&H.charCodeAt(++U)),$[W++]=R>>18|240,$[W++]=R>>12&63|128,$[W++]=R>>6&63|128,$[W++]=63&R|128):($[W++]=R>>12|224,$[W++]=R>>6&63|128,$[W++]=63&R|128)}return $},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let R=0;R<H.length;R+=3){const L=H[R],te=R+1<H.length,Ne=te?H[R+1]:0,tt=R+2<H.length,st=tt?H[R+2]:0;let Nt=(15&Ne)<<2|st>>6,cn=63&st;tt||(cn=64,te||(Nt=64)),U.push(W[L>>2],W[(3&L)<<4|Ne>>4],W[Nt],W[cn])}return U.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(re(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let W=0,U=0;for(;W<H.length;){const R=H[W++];if(R<128)$[U++]=String.fromCharCode(R);else if(R>191&&R<224){const L=H[W++];$[U++]=String.fromCharCode((31&R)<<6|63&L)}else if(R>239&&R<365){const tt=((7&R)<<18|(63&H[W++])<<12|(63&H[W++])<<6|63&H[W++])-65536;$[U++]=String.fromCharCode(55296+(tt>>10)),$[U++]=String.fromCharCode(56320+(1023&tt))}else{const L=H[W++],te=H[W++];$[U++]=String.fromCharCode((15&R)<<12|(63&L)<<6|63&te)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const W=$?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let R=0;R<H.length;){const L=W[H.charAt(R++)],Ne=R<H.length?W[H.charAt(R)]:0;++R;const st=R<H.length?W[H.charAt(R)]:64;++R;const Le=R<H.length?W[H.charAt(R)]:64;if(++R,null==L||null==Ne||null==st||null==Le)throw Error();U.push(L<<2|Ne>>4),64!==st&&(U.push(Ne<<4&240|st>>2),64!==Le&&U.push(st<<6&192|Le))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ce=function(H){return function(H){const $=re(H);return ge.encodeByteArray($,!0)}(H).replace(/\./g,"")},me=function(H){try{return ge.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const W in $)!$.hasOwnProperty(W)||!K(W)||(H[W]=G(H[W],$[W]));return H}function K(H){return"__proto__"!==H}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function we(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const H=$e();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ee(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"==typeof indexedDB}catch{return!1}}function ne(){return new Promise((H,$)=>{try{let W=!0;const U="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(U);R.onsuccess=()=>{R.result.close(),W||self.indexedDB.deleteDatabase(U),H(!0)},R.onupgradeneeded=()=>{W=!1},R.onerror=()=>{var L;$((null===(L=R.error)||void 0===L?void 0:L.message)||"")}}catch(W){$(W)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ie=()=>{try{return function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&me(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Ue=H=>{var $,W;return null===(W=null===($=ie())||void 0===$?void 0:$.emulatorHosts)||void 0===W?void 0:W[H]},Ve=H=>{const $=Ue(H);if(!$)return;const W=$.lastIndexOf(":");if(W<=0||W+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const U=parseInt($.substring(W+1),10);return"["===$[0]?[$.substring(1,W-1),U]:[$.substring(0,W),U]},lt=()=>{var H;return null===(H=ie())||void 0===H?void 0:H.config},sn=H=>{var $;return null===($=ie())||void 0===$?void 0:$[`_${H}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,W)=>{this.resolve=$,this.reject=W})}wrapCallback($){return(W,U)=>{W?this.reject(W):this.resolve(U),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(W):$(W,U))}}}function Ge(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=$||"demo-project",R=H.iat||0,L=H.sub||H.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const te=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:R,exp:R+3600,auth_time:R,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(te)),""].join(".")}class mn extends Error{constructor($,W,U){super(W),this.code=$,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}}class tn{constructor($,W,U){this.service=$,this.serviceName=W,this.errors=U}create($,...W){const U=W[0]||{},R=`${this.service}/${$}`,L=this.errors[$],te=L?function nn(H,$){return H.replace(Wt,(W,U)=>{const R=$[U];return null!=R?String(R):`<${U}?>`})}(L,U):"Error";return new mn(R,`${this.serviceName}: ${te} (${R}).`,U)}}const Wt=/\{\$([^}]+)}/g;function Lr(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function wi(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Ke(H,$){if(H===$)return!0;const W=Object.keys(H),U=Object.keys($);for(const R of W){if(!U.includes(R))return!1;const L=H[R],te=$[R];if(zn(L)&&zn(te)){if(!Ke(L,te))return!1}else if(L!==te)return!1}for(const R of U)if(!W.includes(R))return!1;return!0}function zn(H){return null!==H&&"object"==typeof H}function gn(H){const $=[];for(const[W,U]of Object.entries(H))Array.isArray(U)?U.forEach(R=>{$.push(encodeURIComponent(W)+"="+encodeURIComponent(R))}):$.push(encodeURIComponent(W)+"="+encodeURIComponent(U));return $.length?"&"+$.join("&"):""}function hr(H){const $={};return H.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[R,L]=U.split("=");$[decodeURIComponent(R)]=decodeURIComponent(L)}}),$}function Ps(H){const $=H.indexOf("?");if(!$)return"";const W=H.indexOf("#",$);return H.substring($,W>0?W:void 0)}function _n(H,$){const W=new pn(H,$);return W.subscribe.bind(W)}class pn{constructor($,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{$(this)}).catch(U=>{this.error(U)})}next($){this.forEachObserver(W=>{W.next($)})}error($){this.forEachObserver(W=>{W.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,W,U){let R;if(void 0===$&&void 0===W&&void 0===U)throw new Error("Missing Observer.");R=function dt(H,$){if("object"!=typeof H||null===H)return!1;for(const W of $)if(W in H&&"function"==typeof H[W])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:W,complete:U},void 0===R.next&&(R.next=Rt),void 0===R.error&&(R.error=Rt),void 0===R.complete&&(R.complete=Rt);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),L}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,$)}sendOne($,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{W(this.observers[$])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rt(){}function Je(H,$=1e3,W=2){const U=$*Math.pow(W,H),R=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+R)}function Xt(H){return H&&H._delegate?H._delegate:H}},5838:(ut,Ce,P)=>{var c=P(4650);let B=null;function k(){return B}const fe=new c.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function me(){return(0,c.LFG)(G)}()},providedIn:"platform"}),n})();const q=new c.OlP("Location Initialized");let G=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){K()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){K()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function $e(){return new G((0,c.LFG)(fe))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Ye)},providedIn:"root"}),n})();const pe=new c.OlP("appBaseHref");let Ye=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+et(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+et(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ze=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(He(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=et,n.joinWithSlash=Re,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Se(){return new Fe((0,c.LFG)(we))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}class Bs{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vr=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Bs(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),$s(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{$s(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function $s(n,e){n.context.$implicit=e.item}let Hn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Eh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Eh{constructor(){this.$implicit=null,this.ngIf=null}}function Zn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let mo=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),d=-1===s.indexOf("-")?void 0:c.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,s,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Ap=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function bo(n){return"server"===n}let Oc=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new bh((0,c.LFG)(fe),window)}),n})();class bh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function fr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=bi(this.window.history)||bi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function bi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Es extends class Vc extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){B||(B=n)}(new Es)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Bc(){return bs=bs||document.querySelector("base"),bs?bs.getAttribute("href"):null}();return null==t?null:function ns(n){An=An||document.createElement("a"),An.setAttribute("href",n);const e=An.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){bs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function il(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let An,bs=null;const Cn=new c.OlP("TRANSITION_ID"),pl=[{provide:c.ip1,useFactory:function $c(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=k(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Cn,fe,c.zs3],multi:!0}];let gl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ml=new c.OlP("EventManagerPlugins");let yl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ml),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class nu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=k().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Mo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ro=(()=>{class n extends Mo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(jc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jc))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function jc(n){k().remove(n)}const No={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hc=/%COMP%/g;function iu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?iu(n,s,t):(s=s.replace(Hc,n),t.push(s))}return t}function su(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ou=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new rs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new qc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new Mh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=iu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(yl),c.LFG(Ro),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class rs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(No[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(va(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(va(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=No[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=No[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,su(r)):this.eventManager.addEventListener(e,t,su(r))}}function va(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qc extends rs{constructor(e,t,r,s){super(e),this.component=r;const u=iu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function On(n){return"_ngcontent-%COMP%".replace(Hc,n)}(s+"-"+r.id),this.hostAttr=function ru(n){return"_nghost-%COMP%".replace(Hc,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Mh extends rs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=iu(s.id,s.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Qn=(()=>{class n extends nu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Rh=["alt","control","meta","shift"],Is={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wa=(()=>{class n extends nu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),d="code."),Rh.forEach(I=>{const A=r.indexOf(I);A>-1&&(r.splice(A,1),d+=I+".")}),d+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=d,_}static matchEventFullKeyCode(t,r){let s=Is[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Rh.forEach(d=>{d!==s&&(0,wl[d])(t)&&(u+=d+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fe))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ea=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Wc(){Es.makeCurrent()},multi:!0},{provide:fe,useFactory:function El(){return(0,c.RDi)(document),document},deps:[]}]),zs=new c.OlP(""),ba=[{provide:c.rWj,useClass:class Sh{addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const g=function(_){d=d||_,u--,0==u&&r(d)};s.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Oo=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function is(){return new c.qLn},deps:[]},{provide:ml,useClass:Qn,multi:!0,deps:[fe,c.R0b,c.Lbi]},{provide:ml,useClass:wa,multi:!0,deps:[fe]},{provide:ou,useClass:ou,deps:[yl,Ro,c.AFp]},{provide:c.FYo,useExisting:ou},{provide:Mo,useExisting:Ro},{provide:Ro,useClass:Ro,deps:[fe]},{provide:yl,useClass:yl,deps:[ml,c.R0b]},{provide:class Io{},useClass:gl,deps:[]},[]];let Po=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Cn,useExisting:c.AFp},pl]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zs,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Oo,...ba],imports:[Ap,c.hGG]}),n})(),Oi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fe))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ia(){return new Oi((0,c.LFG)(fe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=P(8996),Qr=P(9751);const{isArray:Dl}=Array,{getPrototypeOf:Yc,prototype:Ar,keys:ss}=Object;function Da(n){if(1===n.length){const e=n[0];if(Dl(e))return{args:e,keys:null};if(function Zs(n){return n&&"object"==typeof n&&Yc(n)===Ar}(e)){const t=ss(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Fi=P(8421),Ks=P(7669),rr=P(5403),St=P(4004);const{isArray:Ys}=Array;function Ca(n){return(0,St.U)(e=>function Qc(n,e){return Ys(e)?n(...e):n(e)}(n,e))}function Sr(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let Di=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),os=(()=>{class n extends Di{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Jr=new c.OlP("NgValueAccessor"),Al={provide:Jr,useExisting:(0,c.Gpc)(()=>Li),multi:!0},Np=new c.OlP("CompositionEventMode");let Li=(()=>{class n extends Di{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ta(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Np,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([Al]),c.qOj]}),n})();const En=new c.OlP("NgValidators"),Ti=new c.OlP("NgAsyncValidators");function D(n){return null!=n}function C(n){return(0,c.QGY)(n)?(0,rn.D)(n):n}function x(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function V(n,e){return e.map(t=>t(n))}function se(n){return n.map(e=>function Y(n){return!n.validate}(e)?e:t=>e.validate(t))}function Xe(n){return null!=n?function Ae(n){if(!n)return null;const e=n.filter(D);return 0==e.length?null:function(t){return x(V(t,e))}}(se(n)):null}function yt(n){return null!=n?function it(n){if(!n)return null;const e=n.filter(D);return 0==e.length?null:function(t){return function Cl(...n){const e=(0,Ks.jO)(n),{args:t,keys:r}=Da(n),s=new Qr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let _=d,I=d;for(let A=0;A<d;A++){let M=!1;(0,Fi.Xf)(t[A]).subscribe((0,rr.x)(u,j=>{M||(M=!0,I--),g[A]=j},()=>_--,void 0,()=>{(!_||!M)&&(I||u.next(r?Sr(r,g):g),u.complete())}))}});return e?s.pipe(Ca(e)):s}(V(t,e).map(C)).pipe((0,St.U)(x))}}(se(n)):null}function Ht(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ln(n){return n?Array.isArray(n)?n:[n]:[]}function Cs(n,e){return Array.isArray(n)?n.includes(e):n===e}function fu(n,e){const t=Ln(e);return Ln(n).forEach(s=>{Cs(t,s)||t.push(s)}),t}function ci(n,e){return Ln(e).filter(t=>!Cs(n,t))}class ir{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xe(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Rn extends ir{get formDirective(){return null}get path(){return null}}class Ts extends ir{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Lh{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ma=(()=>{class n extends Lh{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ts,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),pu=(()=>{class n extends Lh{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rn,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();const nd="VALID",rd="INVALID",Ra="PENDING",Xs="DISABLED";function id(n){return(od(n)?n.validators:n)||null}function xl(n){return Array.isArray(n)?Xe(n):n||null}function sd(n,e){return(od(e)?e.asyncValidators:n)||null}function Bi(n){return Array.isArray(n)?yt(n):n||null}function od(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ud{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=xl(this._rawValidators),this._composedAsyncValidatorFn=Bi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===nd}get invalid(){return this.status===rd}get pending(){return this.status==Ra}get disabled(){return this.status===Xs}get enabled(){return this.status!==Xs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=xl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Bi(e)}addValidators(e){this.setValidators(fu(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fu(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ci(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ci(e,this._rawAsyncValidators))}hasValidator(e){return Cs(this._rawValidators,e)}hasAsyncValidator(e){return Cs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ra,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xs,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nd||this.status===Ra)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xs:nd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ra,this._hasOwnPendingAsyncValidator=!0;const t=C(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Xs:this.errors?rd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ra)?Ra:this._anyControlsHaveStatus(rd)?rd:nd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){od(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class gu extends ud{constructor(e,t,r){super(id(t),sd(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Lp(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new c.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function ad(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function mu(n,e){p(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function E(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&O(n,e)})}(n,e),function ee(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function S(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&O(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function v(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yu(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p(n,e){const t=function Et(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Ht(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function gr(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Ht(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();yu(e._rawValidators,s),yu(e._rawAsyncValidators,s)}function O(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Na={provide:Rn,useExisting:(0,c.Gpc)(()=>zo)},vu=(()=>Promise.resolve())();let zo=(()=>{class n extends Rn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new gu({},Xe(t),yt(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){vu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),mu(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){vu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){vu.then(()=>{const r=this._findContainer(t.path),s=new gu({});(function xe(n,e){p(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){vu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){vu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Ml(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(En,10),c.Y36(Ti,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Na]),c.qOj]}),n})();function wu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Nl(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const $h=class extends ud{constructor(e=null,t,r){super(id(t),sd(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),od(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Nl(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Nl(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},rD={provide:Ts,useExisting:(0,c.Gpc)(()=>bu)},z0=(()=>Promise.resolve())();let bu=(()=>{class n extends Ts{constructor(t,r,s,u,d){super(),this._changeDetectorRef=d,this.control=new $h,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Rl(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Li?t=u:function _u(n){return Object.getPrototypeOf(n.constructor)===os}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ss(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mu(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){z0.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,c.D6c)(r);z0.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ld(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rn,9),c.Y36(En,10),c.Y36(Ti,10),c.Y36(Jr,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([rD]),c.qOj,c.TTD]}),n})(),cd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Q0={provide:Jr,useExisting:(0,c.Gpc)(()=>dd),multi:!0};function jp(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let dd=(()=>{class n extends os{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=jp(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function gy(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([Q0]),c.qOj]}),n})(),hd=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jp(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(dd,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const oD={provide:Jr,useExisting:(0,c.Gpc)(()=>Hp),multi:!0};function my(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Hp=(()=>{class n extends os{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const s=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(s.indexOf(d.toString())>-1)}}else r=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const s=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let g=0;g<d.length;g++){const I=this._getOptionValue(d[g].value);s.push(I)}}else{const d=r.options;for(let g=0;g<d.length;g++){const _=d[g];if(_.selected){const I=this._getOptionValue(_.value);s.push(I)}}}this.value=s,t(s)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function aD(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([oD]),c.qOj]}),n})(),Gp=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(my(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(my(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(Hp,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),zh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[W0]}),n})(),dD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[zh]}),n})();function gt(...n){const e=(0,Ks.yG)(n);return(0,rn.D)(n,e)}var to=P(7579);class xr extends to.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Zh=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var fd=P(4671),iw=P(9672);function fD(...n){const e=(0,Ks.yG)(n),t=(0,Ks.jO)(n),{args:r,keys:s}=Da(n);if(0===r.length)return(0,rn.D)([],e);const u=new Qr.y(function lx(n,e,t=fd.y){return r=>{pD(e,()=>{const{length:s}=n,u=new Array(s);let d=s,g=s;for(let _=0;_<s;_++)pD(e,()=>{const I=(0,rn.D)(n[_],e);let A=!1;I.subscribe((0,rr.x)(r,M=>{u[_]=M,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>Sr(s,d):fd.y));return t?u.pipe(Ca(t)):u}function pD(n,e,t){n?(0,iw.f)(t,n,e):e()}var Pl=P(8189);function sw(...n){return function Ey(){return(0,Pl.J)(1)}()((0,rn.D)(n,(0,Ks.yG)(n)))}function gD(n){return new Qr.y(e=>{(0,Fi.Xf)(n()).subscribe(e)})}var ow=P(9635),by=P(576);function Kh(n,e){const t=(0,by.m)(n)?n:()=>n,r=s=>s.error(t());return new Qr.y(e?s=>e.schedule(r,0,s):r)}var Fl=P(515),aw=P(727),Xr=P(4482);function pd(){return(0,Xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,rr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uw extends Qr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new aw.w0;const t=this.getSubject();e.add(this.source.subscribe((0,rr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=aw.w0.EMPTY)}return e}refCount(){return pd()(this)}}function sr(n,e){return(0,Xr.e)((t,r)=>{let s=null,u=0,d=!1;const g=()=>d&&!s&&r.complete();t.subscribe((0,rr.x)(r,_=>{s?.unsubscribe();let I=0;const A=u++;(0,Fi.Xf)(n(_,A)).subscribe(s=(0,rr.x)(r,M=>r.next(e?e(_,M,A,I++):M),()=>{s=null,g()}))},()=>{d=!0,g()}))})}function Yh(n){return n<=0?()=>Fl.E:(0,Xr.e)((e,t)=>{let r=0;e.subscribe((0,rr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Jn(...n){const e=(0,Ks.yG)(n);return(0,Xr.e)((t,r)=>{(e?sw(n,t,e):sw(n,t)).subscribe(r)})}function no(n,e){return(0,Xr.e)((t,r)=>{let s=0;t.subscribe((0,rr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Ai=P(5577);function gd(n){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,rr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Iy(n=mD){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,rr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function mD(){return new Zh}function ka(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((s,u)=>n(s,u,r)):fd.y,Yh(1),t?gd(e):Iy(()=>new Zh))}function Ll(n,e){return(0,by.m)(e)?(0,Ai.z)(n,e,1):(0,Ai.z)(n,1)}var di=P(8505);function Iu(n){return(0,Xr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,rr.x)(t,void 0,void 0,d=>{u=(0,Fi.Xf)(n(d,Iu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function cx(n,e,t,r,s){return(u,d)=>{let g=t,_=e,I=0;u.subscribe((0,rr.x)(d,A=>{const M=I++;_=g?n(_,A,M):(g=!0,A),r&&d.next(_)},s&&(()=>{g&&d.next(_),d.complete()})))}}function Wp(n,e){return(0,Xr.e)(cx(n,e,arguments.length>=2,!0))}function Ul(n){return n<=0?()=>Fl.E:(0,Xr.e)((e,t)=>{let r=[];e.subscribe((0,rr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Zp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((s,u)=>n(s,u,r)):fd.y,Ul(1),t?gd(e):Iy(()=>new Zh))}function Vl(n){return(0,Xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Jt="primary",md=Symbol("RouteTitle");class dw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Du(n){return new dw(n)}function dx(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))s[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function xs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Dy(n[s],e[s]))return!1;return!0}function Dy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Cy(n){return Array.prototype.concat.apply([],n)}function Cu(n){return n.length>0?n[n.length-1]:null}function Mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ro(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,rn.D)(Promise.resolve(n)):gt(n)}const Kp={exact:function hw(n,e,t){if(!jl(n.segments,e.segments)||!Yp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hw(n.children[r],e.children[r],t))return!1;return!0},subset:My},Tu={exact:function xy(n,e){return xs(n,e)},subset:function _D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dy(n[t],e[t]))},ignored:()=>!0};function Sy(n,e,t){return Kp[t.paths](n.root,e.root,t.matrixParams)&&Tu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function My(n,e,t){return Bl(n,e,e.segments,t)}function Bl(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!jl(s,t)||e.hasChildren()||!Yp(s,t,r))}if(n.segments.length===t.length){if(!jl(n.segments,t)||!Yp(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!My(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(jl(n.segments,s)&&Yp(n.segments,s,r)&&n.children[Jt])&&Bl(n.children[Jt],e,u,r)}}function Yp(n,e,t){return e.every((r,s)=>Tu[t](n[s].parameters,r.parameters))}class $l{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Du(this.queryParams)),this._queryParamMap}toString(){return fx.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Mr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jp(this)}}class Qh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Du(this.parameters)),this._parameterMap}toString(){return mw(this)}}function jl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let pw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new Qp},providedIn:"root"}),n})();class Qp{parse(e){const t=new ef(e);return new $l(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Oa(e.root,!0)}`,r=function wD(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Pa(t)}=${Pa(s)}`).join("&"):`${Pa(t)}=${Pa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Jh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const fx=new Qp;function Jp(n){return n.segments.map(e=>mw(e)).join("/")}function Oa(n,e){if(!n.hasChildren())return Jp(n);if(e){const t=n.children[Jt]?Oa(n.children[Jt],!1):"",r=[];return Mr(n.children,(s,u)=>{u!==Jt&&r.push(`${u}:${Oa(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function fw(n,e){let t=[];return Mr(n.children,(r,s)=>{s===Jt&&(t=t.concat(e(r,s)))}),Mr(n.children,(r,s)=>{s!==Jt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Jt?[Oa(n.children[Jt],!1)]:[`${s}:${Oa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${Jp(n)}/${t[0]}`:`${Jp(n)}/(${t.join("//")})`}}function gw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pa(n){return gw(n).replace(/%3B/gi,";")}function Ny(n){return gw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ky(n){return decodeURIComponent(n)}function Oy(n){return ky(n.replace(/\+/g,"%20"))}function mw(n){return`${Ny(n.path)}${function vD(n){return Object.keys(n).map(e=>`;${Ny(e)}=${Ny(n[e])}`).join("")}(n.parameters)}`}const yw=/^[^\/()?;=#]+/;function Xh(n){const e=n.match(yw);return e?e[0]:""}const Py=/^[^=?&#]+/,ED=/^[^&#]+/;class ef{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new en(e,t)),r}parseSegment(){const e=Xh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new Qh(ky(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Xh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Xh(this.remaining);s&&(r=s,this.capture(r))}e[ky(t)]=ky(r)}parseQueryParam(e){const t=function Fy(n){const e=n.match(Py);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Ly(n){const e=n.match(ED);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=Oy(t),u=Oy(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xh(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new c.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Jt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Jt]:new en([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function Uy(n){return n.segments.length>0?new en([],{[Jt]:n}):n}function Xp(n){const e={};for(const r of Object.keys(n.children)){const u=Xp(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function bD(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}function Hl(n){return n instanceof $l}function Fa(n,e,t,r,s){if(0===t.length)return rf(e.root,e.root,e.root,r,s);const u=function CD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new By(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Mr(u.outlets,(_,I)=>{g[I]="string"==typeof _?_.split("/"):_}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new By(t,e,r)}(t);return u.toRoot()?rf(e.root,e.root,new en([],{}),r,s):function d(_){const I=function _w(n,e,t,r){if(n.isAbsolute)return new Gl(e.root,!0,0);if(-1===r)return new Gl(t,t===e.root,0);return function vw(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new c.vHH(4005,!1);s=r.segments.length}return new Gl(r,!1,s-u)}(t,r+(tf(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),A=I.processChildren?sf(I.segmentGroup,I.index,u.commands):$y(I.segmentGroup,I.index,u.commands);return rf(e.root,I.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function tf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function nf(n){return"object"==typeof n&&null!=n&&n.outlets}function rf(n,e,t,r,s){let d,u={};r&&Mr(r,(_,I)=>{u[I]=Array.isArray(_)?_.map(A=>`${A}`):`${_}`}),d=n===e?t:DD(n,e,t);const g=Uy(Xp(d));return new $l(g,u,s)}function DD(n,e,t){const r={};return Mr(n.children,(s,u)=>{r[u]=s===e?t:DD(s,e,t)}),new en(n.segments,r)}class By{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tf(r[0]))throw new c.vHH(4003,!1);const s=r.find(nf);if(s&&s!==Cu(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $y(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return sf(n,e,t);const r=function io(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],g=t[r];if(nf(g))break;const _=`${g}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!Iw(_,I,d))return u;r+=2}else{if(!Iw(_,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new en(n.segments.slice(0,r.pathIndex),{});return u.children[Jt]=new en(n.segments.slice(r.pathIndex),n.children),sf(u,0,s)}return r.match&&0===s.length?new en(n.segments,{}):r.match&&!n.hasChildren()?jy(n,e,t):r.match?sf(n,0,s):jy(n,e,t)}function sf(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function ww(n){return nf(n[0])?n[0].outlets:{[Jt]:n}}(t),s={};return Mr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=$y(n.children[d],e,u))}),Mr(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new en(n.segments,s)}}function jy(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(nf(u)){const _=Ew(u.outlets);return new en(r,_)}if(0===s&&tf(t[0])){r.push(new Qh(n.segments[e].path,bw(t[0]))),s++;continue}const d=nf(u)?u.outlets[Jt]:`${u}`,g=s<t.length-1?t[s+1]:null;d&&g&&tf(g)?(r.push(new Qh(d,bw(g))),s+=2):(r.push(new Qh(d,{})),s++)}return new en(r,{})}function Ew(n){const e={};return Mr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jy(new en([],{}),0,t))}),e}function bw(n){const e={};return Mr(n,(t,r)=>e[r]=`${t}`),e}function Iw(n,e,t){return n==t.path&&xs(e,t.parameters)}class La{constructor(e,t){this.id=e,this.url=t}}class Hy extends La{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Au extends La{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class eg extends La{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dw extends La{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TD extends La{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gt extends La{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cw extends La{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Tw extends La{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Aw extends La{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AD{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SD{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MD{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mw{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Gy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=tg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=tg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ua(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ua(e,this._root).map(t=>t.value)}}function tg(n,e){if(n===e.value)return e;for(const t of e.children){const r=tg(n,t);if(r)return r}return null}function Ua(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ua(n,t);if(r.length)return r.unshift(e),r}return[]}class Va{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Su(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ng extends Gy{constructor(e,t){super(e),this.snapshot=t,qy(this,e)}toString(){return this.snapshot.toString()}}function Rw(n,e){const t=function yx(n,e){const d=new af([],{},{},"",{},Jt,e,null,n.root,-1,{});return new kD("",new Va(d,[]))}(n,e),r=new xr([new Qh("",{})]),s=new xr({}),u=new xr({}),d=new xr({}),g=new xr(""),_=new _d(r,s,d,g,u,Jt,e,t.root);return _.snapshot=t.root,new ng(new Va(_,[]),t)}class _d{constructor(e,t,r,s,u,d,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.pipe((0,St.U)(I=>I[md]))??gt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>Du(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>Du(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RD(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function ND(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class af{constructor(e,t,r,s,u,d,g,_,I,A,M,j){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.[md],this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=A,this._correctedLastPathIndex=j??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Du(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Du(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kD extends Gy{constructor(e,t){super(t),this.url=e,qy(this,t)}toString(){return ql(this._root)}}function qy(n,e){e.value._routerState=n,e.children.forEach(t=>qy(n,t))}function ql(n){const e=n.children.length>0?` { ${n.children.map(ql).join(", ")} } `:"";return`${n.value}${e}`}function zy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),xs(e.params,t.params)||n.params.next(t.params),function yD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),xs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rg(n,e){const t=xs(n.params,e.params)&&function Ry(n,e){return jl(n,e)&&n.every((t,r)=>xs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rg(n.parent,e.parent))}function uf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Nw(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return uf(n,r,s);return uf(n,r)})}(n,e,t);return new Va(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>uf(n,g)),d}}const r=function OD(n){return new _d(new xr(n.url),new xr(n.params),new xr(n.queryParams),new xr(n.fragment),new xr(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>uf(n,u));return new Va(r,s)}}const Wy="ngNavigationCancelingError";function kw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Hl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Ow(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Ow(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Wy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Pw(n){return Zy(n)&&Hl(n.url)}function Zy(n){return n&&n[Wy]}class PD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new vd,this.attachRef=null}}let vd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new PD,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lf=!1;let cf=(()=>{class n{constructor(t,r,s,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,lf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,lf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,lf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,lf);this._activatedRoute=t;const s=this.location,d=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new _x(t,g,s.injector);if(r&&function Ky(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(d);this.activated=s.createComponent(I,s.length,_)}else this.activated=s.createComponent(d,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vd),c.Y36(c.s_b),c.$8M("name"),c.Y36(c.sBO),c.Y36(c.lqb))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class _x{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_d?this.route:e===vd?this.childContexts:this.parent.get(e,t)}}let Yy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[cf],encapsulation:2}),n})();function FD(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function so(n){const e=n.children&&n.children.map(so),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=Yy),t}function $i(n){return n.outlet||Jt}function Xy(n,e){const t=n.filter(r=>$i(r)===e);return t.push(...n.filter(r=>$i(r)!==e)),t}function zl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Lw{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Su(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),Mr(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Su(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Su(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Su(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new MD(u.value.snapshot))}),e.children.length&&this.forwardEvent(new xD(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(zy(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),zy(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=zl(s.snapshot),_=g?.get(c._Vd)??null;d.attachRef=null,d.route=s,d.resolver=_,d.injector=g,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class BD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Wl{constructor(e,t){this.component=e,this.route=t}}function sg(n,e,t){const r=n._root;return Zl(r,e?e._root:null,t,[r.value])}function xu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function Zl(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Su(e);return n.children.forEach(d=>{(function wx(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const _=function $D(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jl(n.url,e.url)||!xs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rg(n,e)||!xs(n.queryParams,e.queryParams);default:return!rg(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new BD(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Zl(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new Wl(g.outlet.component,d))}else d&&hf(e,g,s),s.canActivateChecks.push(new BD(r)),Zl(n,null,u.component?g?g.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),Mr(u,(d,g)=>hf(d,t.getContext(g),s)),s}function hf(n,e,t){const r=Su(n),s=n.value;Mr(r,(u,d)=>{hf(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Wl(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function ff(n){return"function"==typeof n}function pf(n){return n instanceof Zh||"EmptyError"===n?.name}const t_=Symbol("INITIAL_VALUE");function gf(){return sr(n=>fD(n.map(e=>e.pipe(Yh(1),Jn(t_)))).pipe((0,St.U)(e=>{for(const t of e)if(!0!==t){if(t===t_)return t_;if(!1===t||t instanceof $l)return t}return!0}),no(e=>e!==t_),Yh(1)))}function og(n){return(0,ow.z)((0,di.b)(e=>{if(Hl(e))throw kw(0,e)}),(0,St.U)(e=>!0===e))}const ag={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ug(n,e,t,r,s){const u=lg(n,e,t);return u.matched?function zD(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?gt(s.map(d=>{const g=xu(d,n);return ro(function Vw(n){return n&&ff(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(gf(),og()):gt(!0)}(r=FD(e,r),e,t).pipe((0,St.U)(d=>!0===d?u:{...ag})):gt(u)}function lg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ag}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||dx)(t,n,e);if(!s)return{...ag};const u={};Mr(s.posParams,(g,_)=>{u[_]=g.path});const d=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function wd(n,e,t,r,s="corrected"){if(t.length>0&&function Bw(n,e,t){return t.some(r=>cg(n,e,r)&&$i(r)!==Jt)}(n,t,r)){const d=new en(e,function Ru(n,e,t,r){const s={};s[Jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&$i(u)!==Jt){const d=new en([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[$i(u)]=d}return s}(n,e,r,new en(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function ZD(n,e,t){return t.some(r=>cg(n,e,r))}(n,t,r)){const d=new en(n.segments,function WD(n,e,t,r,s,u){const d={};for(const g of r)if(cg(n,t,g)&&!s[$i(g)]){const _=new en([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[$i(g)]=_}return{...s,...d}}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new en(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function cg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function n_(n,e,t,r){return!!($i(n)===r||r!==Jt&&cg(e,t,n))&&("**"===n.path||lg(e,n,t).matched)}function $w(n,e,t){return 0===e.length&&!n.children[t]}const dg=!1;class Kl{constructor(e){this.segmentGroup=e||null}}class Yl{constructor(e){this.urlTree=e}}function Ql(n){return Kh(new Kl(n))}function Jl(n){return Kh(new Yl(n))}class Hw{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=wd(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Jt).pipe((0,St.U)(u=>this.createUrlTree(Xp(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Iu(u=>{if(u instanceof Yl)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Kl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Jt).pipe((0,St.U)(s=>this.createUrlTree(Xp(s),e.queryParams,e.fragment))).pipe(Iu(s=>{throw s instanceof Kl?this.noMatchError(s):s}))}noMatchError(e){return new c.vHH(4002,dg)}createUrlTree(e,t,r){const s=Uy(e);return new $l(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(u=>new en([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,rn.D)(s).pipe(Ll(u=>{const d=r.children[u],g=Xy(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,St.U)(_=>({segment:_,outlet:u})))}),Wp((u,d)=>(u[d.outlet]=d.segment,u),{}),Zp())}expandSegment(e,t,r,s,u,d){return(0,rn.D)(r).pipe(Ll(g=>this.expandSegmentAgainstRoute(e,t,r,g,s,u,d).pipe(Iu(I=>{if(I instanceof Kl)return gt(null);throw I}))),ka(g=>!!g),Iu((g,_)=>{if(pf(g))return $w(t,s,u)?gt(new en([],{})):Ql(t);throw g}))}expandSegmentAgainstRoute(e,t,r,s,u,d,g){return n_(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):Ql(t):Ql(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jl(u):this.lineralizeSegments(r,u).pipe((0,Ai.z)(d=>{const g=new en(d,{});return this.expandSegment(e,g,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:g,consumedSegments:_,remainingSegments:I,positionalParamSegments:A}=lg(t,s,u);if(!g)return Ql(t);const M=this.applyRedirectCommands(_,s.redirectTo,A);return s.redirectTo.startsWith("/")?Jl(M):this.lineralizeSegments(s,M).pipe((0,Ai.z)(j=>this.expandSegment(e,t,r,j.concat(I),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=FD(r,e),r.loadChildren?(r._loadedRoutes?gt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,St.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new en(s,{})))):gt(new en(s,{}))):ug(t,r,s,e).pipe(sr(({matched:d,consumedSegments:g,remainingSegments:_})=>d?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Ai.z)(A=>{const M=A.injector??e,j=A.routes,{segmentGroup:Q,slicedSegments:oe}=wd(t,g,_,j),Oe=new en(Q.segments,Q.children);if(0===oe.length&&Oe.hasChildren())return this.expandChildren(M,j,Oe).pipe((0,St.U)(mt=>new en(g,mt)));if(0===j.length&&0===oe.length)return gt(new en(g,{}));const Pe=$i(r)===u;return this.expandSegment(M,Oe,j,oe,Pe?Jt:u,!0).pipe((0,St.U)(xt=>new en(g.concat(xt.segments),xt.children)))})):Ql(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Mu(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?gt(!0):gt(s.map(d=>{const g=xu(d,n);return ro(function Uw(n){return n&&ff(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(gf(),og())}(e,t,r).pipe((0,Ai.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,di.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function hg(n){return Kh(Ow(dg,3))}())):gt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return gt(r);if(s.numberOfChildren>1||!s.children[Jt])return Kh(new c.vHH(4e3,dg));s=s.children[Jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new $l(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Mr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);r[u]=t[g]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return Mr(t.children,(g,_)=>{d[_]=this.createSegmentGroup(e,g,r,s)}),new en(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new c.vHH(4001,dg);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Gw{}class Rx{constructor(e,t,r,s,u,d,g,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g,this.urlSerializer=_}recognize(){const e=wd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Jt).pipe((0,St.U)(t=>{if(null===t)return null;const r=new af([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Va(r,t),u=new kD(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=RD(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(Ll(s=>{const u=r.children[s],d=Xy(t,s);return this.processSegmentGroup(e,d,u,s)}),Wp((s,u)=>s&&u?(s.push(...u),s):null),function lw(n,e=!1){return(0,Xr.e)((t,r)=>{let s=0;t.subscribe((0,rr.x)(r,u=>{const d=n(u,s++);(d||e)&&r.next(u),!d&&r.complete()}))})}(s=>null!==s),gd(null),Zp(),(0,St.U)(s=>{if(null===s)return null;const u=o_(s);return function YD(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,rn.D)(t).pipe(Ll(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,s,u)),ka(d=>!!d),Iu(d=>{if(pf(d))return $w(r,s,u)?gt([]):gt(null);throw d}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!n_(t,r,s,u))return gt(null);let d;if("**"===t.path){const g=s.length>0?Cu(s).parameters:{},_=ji(r)+s.length;d=gt({snapshot:new af(s,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zw(t),$i(t),t.component??t._loadedComponent??null,t,Ww(r),_,JD(t),_),consumedSegments:[],remainingSegments:[]})}else d=ug(r,t,s,e).pipe((0,St.U)(({matched:g,consumedSegments:_,remainingSegments:I,parameters:A})=>{if(!g)return null;const M=ji(r)+_.length;return{snapshot:new af(_,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zw(t),$i(t),t.component??t._loadedComponent??null,t,Ww(r),M,JD(t),M),consumedSegments:_,remainingSegments:I}}));return d.pipe(sr(g=>{if(null===g)return gt(null);const{snapshot:_,consumedSegments:I,remainingSegments:A}=g;e=t._injector??e;const M=t._loadedInjector??e,j=function qw(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Q,slicedSegments:oe}=wd(r,I,A,j.filter(Pe=>void 0===Pe.redirectTo),this.relativeLinkResolution);if(0===oe.length&&Q.hasChildren())return this.processChildren(M,j,Q).pipe((0,St.U)(Pe=>null===Pe?null:[new Va(_,Pe)]));if(0===j.length&&0===oe.length)return gt([new Va(_,[])]);const Oe=$i(t)===u;return this.processSegment(M,j,Q,oe,Oe?Jt:u).pipe((0,St.U)(Pe=>null===Pe?null:[new Va(_,Pe)]))}))}}function QD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function o_(n){const e=[],t=new Set;for(const r of n){if(!QD(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=o_(r.children);e.push(new Va(r.value,s))}return e.filter(r=>!t.has(r))}function Ww(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ji(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Zw(n){return n.data||{}}function JD(n){return n.resolve||{}}function l_(n){return"string"==typeof n.title||null===n.title}function c_(n){return sr(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,St.U)(()=>e)):gt(e)})}let d_=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Jt);return r}getResolvedTitleForRoute(t){return t.data[md]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Yw)},providedIn:"root"}),n})(),Yw=(()=>{class n extends d_{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Oi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Qw{}class rC extends class Jw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bd=new c.OlP("",{providedIn:"root",factory:()=>({})}),h_=new c.OlP("ROUTES");let eE=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ro(t.loadComponent()).pipe((0,di.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Vl(()=>{this.componentLoaders.delete(t)})),s=new uw(r,()=>new to.x).pipe(pd());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,St.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,I,A=!1;Array.isArray(g)?I=g:(_=g.create(t).injector,I=Cy(_.get(h_,[],c.XFs.Self|c.XFs.Optional)));return{routes:I.map(so),injector:_}}),Vl(()=>{this.childrenLoaders.delete(r)})),d=new uw(u,()=>new to.x).pipe(pd());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return ro(t()).pipe((0,Ai.z)(r=>r instanceof c.YKP||Array.isArray(r)?gt(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tE{}class iC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sC(n){throw n}function f_(n,e,t){return e.parse("/")}const oC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function gg(){const n=(0,c.f3M)(pw),e=(0,c.f3M)(vd),t=(0,c.f3M)(Fe),r=(0,c.f3M)(c.zs3),s=(0,c.f3M)(c.Sil),u=(0,c.f3M)(h_,{optional:!0})??[],d=(0,c.f3M)(bd,{optional:!0})??{},g=(0,c.f3M)(Yw),_=(0,c.f3M)(d_,{optional:!0}),I=(0,c.f3M)(tE,{optional:!0}),A=(0,c.f3M)(Qw,{optional:!0}),M=new mr(null,n,e,t,r,s,Cy(u));return I&&(M.urlHandlingStrategy=I),A&&(M.routeReuseStrategy=A),M.titleStrategy=_??g,function pg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,M),M}let mr=(()=>{class n{constructor(t,r,s,u,d,g,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new to.x,this.errorHandler=sC,this.malformedUriErrorHandler=f_,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>gt(void 0),this.urlHandlingStrategy=new iC,this.routeReuseStrategy=new rC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(eE),this.configLoader.onLoadEndListener=j=>this.triggerEvent(new SD(j)),this.configLoader.onLoadStartListener=j=>this.triggerEvent(new AD(j)),this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const M=d.get(c.R0b);this.isNgZoneEnabled=M instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function Ay(){return new $l(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Rw(this.currentUrlTree,this.rootComponentType),this.transitions=new xr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(no(s=>0!==s.id),(0,St.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),sr(s=>{let u=!1,d=!1;return gt(s).pipe((0,di.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),sr(g=>{const _=this.browserUrlTree.toString(),I=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return mg(g.source)&&(this.browserUrlTree=g.extractedUrl),gt(g).pipe(sr(M=>{const j=this.transitions.getValue();return r.next(new Hy(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),j!==this.transitions.getValue()?Fl.E:Promise.resolve(M)}),function i_(n,e,t,r){return sr(s=>function jw(n,e,t,r,s){return new Hw(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,St.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,di.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},s.urlAfterRedirects=M.urlAfterRedirects}),function XD(n,e,t,r,s,u){return(0,Ai.z)(d=>function KD(n,e,t,r,s,u,d="emptyOnly",g="legacy"){return new Rx(n,e,t,r,s,d,g,u).recognize().pipe(sr(_=>null===_?function s_(n){return new Qr.y(e=>e.error(n))}(new Gw):gt(_)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,s,u).pipe((0,St.U)(g=>({...d,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,di.b)(M=>{if(s.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(Q,M)}this.browserUrlTree=M.urlAfterRedirects}const j=new TD(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(j)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:Q,source:oe,restoredState:Oe,extras:Pe}=g,At=new Hy(j,this.serializeUrl(Q),oe,Oe);r.next(At);const xt=Rw(Q,this.rootComponentType).snapshot;return gt(s={...g,targetSnapshot:xt,urlAfterRedirects:Q,extras:{...Pe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Fl.E}),(0,di.b)(g=>{const _=new Gt(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,St.U)(g=>s={...g,guards:sg(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function Ix(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?gt({...t,guardsResult:!0}):function Dx(n,e,t,r){return(0,rn.D)(n).pipe((0,Ai.z)(s=>function Mx(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(g=>{const _=zl(e)??s,I=xu(g,_);return ro(function bx(n){return n&&ff(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(ka())})).pipe(gf()):gt(!0)}(s.component,s.route,t,e,r)),ka(s=>!0!==s,!0))}(d,r,s,n).pipe((0,Ai.z)(g=>g&&function jD(n){return"boolean"==typeof n}(g)?function Cx(n,e,t,r){return(0,rn.D)(e).pipe(Ll(s=>sw(function Ax(n,e){return null!==n&&e&&e(new Sw(n)),gt(!0)}(s.route.parent,r),function Tx(n,e){return null!==n&&e&&e(new xw(n)),gt(!0)}(s.route,r),function xx(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function e_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>gD(()=>gt(d.guards.map(_=>{const I=zl(d.node)??t,A=xu(_,I);return ro(function HD(n){return n&&ff(n.canActivateChild)}(A)?A.canActivateChild(r,n):I.runInContext(()=>A(r,n))).pipe(ka())})).pipe(gf())));return gt(u).pipe(gf())}(n,s.path,t),function Sx(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const s=r.map(u=>gD(()=>{const d=zl(e)??t,g=xu(u,d);return ro(function Ex(n){return n&&ff(n.canActivate)}(g)?g.canActivate(e,n):d.runInContext(()=>g(e,n))).pipe(ka())}));return gt(s).pipe(gf())}(n,s.route,t))),ka(s=>!0!==s,!0))}(r,u,n,e):gt(g)),(0,St.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,di.b)(g=>{if(s.guardsResult=g.guardsResult,Hl(g.guardsResult))throw kw(0,g.guardsResult);const _=new Cw(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),no(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),c_(g=>{if(g.guards.canActivateChecks.length)return gt(g).pipe((0,di.b)(_=>{const I=new Tw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),sr(_=>{let I=!1;return gt(_).pipe(function u_(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return gt(t);let u=0;return(0,rn.D)(s).pipe(Ll(d=>function Kw(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!l_(s)&&(u[md]=s.title),function eC(n,e,t,r){const s=function tC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return gt({});const u={};return(0,rn.D)(s).pipe((0,Ai.z)(d=>function nC(n,e,t,r){const s=zl(e)??r,u=xu(n,s);return ro(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ka(),(0,di.b)(g=>{u[d]=g}))),Ul(1),function cw(n){return(0,St.U)(()=>n)}(u),Iu(d=>pf(d)?Fl.E:Kh(d)))}(u,n,e,r).pipe((0,St.U)(d=>(n._resolvedData=d,n.data=RD(n,t).resolve,s&&l_(s)&&(n.data[md]=s.title),null)))}(d.route,r,n,e)),(0,di.b)(()=>u++),Ul(1),(0,Ai.z)(d=>u===s.length?gt(t):Fl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,di.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,di.b)(_=>{const I=new Aw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}))}),c_(g=>{const _=I=>{const A=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,di.b)(M=>{I.component=M}),(0,St.U)(()=>{})));for(const M of I.children)A.push(..._(M));return A};return fD(_(g.targetSnapshot.root)).pipe(gd(),Yh(1))}),c_(()=>this.afterPreactivation()),(0,St.U)(g=>{const _=function ig(n,e,t){const r=uf(n,e._root,t?t._root:void 0);return new ng(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return s={...g,targetRouterState:_}}),(0,di.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new Lw(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,di.b)({next(){u=!0},complete(){u=!0}}),Vl(()=>{u||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Iu(g=>{if(d=!0,Zy(g)){Pw(g)||(this.navigated=!0,this.restoreHistory(s,!0));const _=new eg(s.id,this.serializeUrl(s.extractedUrl),g.message,g.cancellationCode);if(r.next(_),Pw(g)){const I=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),A={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mg(s.source)};this.scheduleNavigation(I,"imperative",null,A,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const _=new Dw(s.id,this.serializeUrl(s.extractedUrl),g,s.targetSnapshot??void 0);r.next(_);try{s.resolve(this.errorHandler(g))}catch(I){s.reject(I)}}return Fl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(so),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:_}=r,I=s||this.routerState.root,A=_?this.currentUrlTree.fragment:d;let M=null;switch(g){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),Fa(I,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Hl(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function kx(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...oC}:!1===r?{...aC}:r,Hl(t))return Sy(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Sy(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Au(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,d){if(this.disposed)return Promise.resolve(!1);let g,_,I;d?(g=d.resolve,_=d.reject,I=d.promise):I=new Promise((j,Q)=>{g=j,_=Q});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),M=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new eg(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:function(){return gg()},providedIn:"root"}),n})();function mg(n){return"imperative"!==n}class p_{}let _g=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(no(t=>t instanceof Au),Ll(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,c.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,g=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,rn.D)(s).pipe((0,Pl.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gt(null);const u=s.pipe((0,Ai.z)(d=>null===d?gt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,rn.D)([u,d]).pipe((0,Pl.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(mr),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(p_),c.LFG(eE))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Id=new c.OlP("");let Dd=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Au&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Mw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Cd(n,e){return{\u0275kind:n,\u0275providers:e}}function m_(n){return[{provide:h_,multi:!0,useValue:n}]}function aE(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(mr),s=n.get(uC);1===n.get(y_)&&r.initialNavigation(),n.get(uE,null,c.XFs.Optional)?.setUpPreloading(),n.get(Id,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const uC=new c.OlP("",{factory:()=>new to.x}),y_=new c.OlP("",{providedIn:"root",factory:()=>1});const uE=new c.OlP("");function lE(n){return Cd(0,[{provide:uE,useExisting:_g},{provide:p_,useExisting:n}])}const hE=new c.OlP("ROUTER_FORROOT_GUARD"),dC=[Fe,{provide:pw,useClass:Qp},{provide:mr,useFactory:gg},vd,{provide:_d,useFactory:function g_(n){return n.routerState.root},deps:[mr]},eE];function hC(){return new c.PXZ("Router",mr)}let fE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dC,[],m_(t),{provide:hE,useFactory:Xl,deps:[[mr,new c.FiY,new c.tp0]]},{provide:bd,useValue:r||{}},r?.useHash?{provide:we,useClass:Ze}:{provide:we,useClass:Ye},{provide:Id,useFactory:()=>{const n=(0,c.f3M)(mr),e=(0,c.f3M)(Oc),t=(0,c.f3M)(bd);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Dd(n,e,t)}},r?.preloadingStrategy?lE(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:hC},r?.initialNavigation?Px(r):[],[{provide:Td,useFactory:aE},{provide:c.tb,multi:!0,useExisting:Td}]]}}static forChild(t){return{ngModule:n,providers:[m_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hE,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Yy]}),n})();function Xl(n){return"guarded"}function Px(n){return["disabled"===n.initialNavigation?Cd(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(mr);return()=>{e.setUpLocationChangeListener()}}},{provide:y_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Cd(2,[{provide:y_,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(q,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(mr),g=e.get(uC);(function s(u){e.get(mr).events.pipe(no(g=>g instanceof Au||g instanceof eg||g instanceof Dw),(0,St.U)(g=>g instanceof Au||g instanceof eg&&(0===g.code||1===g.code)&&null),no(g=>null!==g),Yh(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||g.closed?gt(void 0):g),d.initialNavigation()}))}}]).\u0275providers:[]]}const Td=new c.OlP("");class __{constructor(e){this.id="",this.name="",this.size=0,this.url="",this.file=e}}var pE=P(4986),qt=P(2122);function ec(){return(0,Xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,rr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function tc(n,e){return n===e}var ot,$r=P(2011),Ig=(P(9568),P(3942)),_e=P(5861),jr=P(9681),ao=P(4859),ls=P(1877),Ot=P(2090),Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hi={},ku=ku||{},Ut=Ad||self;function mf(){}function yf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Dg="closure_uid_"+(1e9*Math.random()>>>0),mE=0;function yE(n,e,t){return n.call.apply(n.bind,arguments)}function _E(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function fi(n,e,t){return(fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yE:_E).apply(null,arguments)}function Cg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[s].apply(r,d)}}function Ou(){this.s=this.s,this.o=this.o}Ou.prototype.s=!1,Ou.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function gE(n){Object.prototype.hasOwnProperty.call(n,Dg)&&n[Dg]||(n[Dg]=++mE)}(this)},Ou.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Tg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function _f(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function vE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(yf(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let d=0;d<u;d++)n[s+d]=r[d]}else n.push(r)}}function Rr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Rr.prototype.h=function(){this.defaultPrevented=!0};var Ag=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",mf,e),Ut.removeEventListener("test",mf,e)}catch{}return n}();function xd(n){return/^[\s\xa0]*$/.test(n)}var wE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Md(n,e){return n<e?-1:n>e?1:0}function nc(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function uo(n){return-1!=nc().indexOf(n)}function Sg(n){return Sg[" "](n),n}Sg[" "]=mf;var vf,n,EE=uo("Opera"),rc=uo("Trident")||uo("MSIE"),xg=uo("Edge"),Mg=xg||rc,bE=uo("Gecko")&&!(-1!=nc().toLowerCase().indexOf("webkit")&&!uo("Edge"))&&!(uo("Trident")||uo("MSIE"))&&!uo("Edge"),IE=-1!=nc().toLowerCase().indexOf("webkit")&&!uo("Edge");function w_(){var n=Ut.document;return n?n.documentMode:void 0}e:{var Rg="",E_=(n=nc(),bE?/rv:([^\);]+)(\)|;)/.exec(n):xg?/Edge\/([\d\.]+)/.exec(n):rc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):IE?/WebKit\/(\S+)/.exec(n):EE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(E_&&(Rg=E_?E_[1]:""),rc){var b_=w_();if(null!=b_&&b_>parseFloat(Rg)){vf=String(b_);break e}}vf=Rg}var yC={};var DE=Ut.document&&rc&&(w_()||parseInt(vf,10))||void 0;function Rd(n,e){if(Rr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(bE){e:{try{Sg(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:CE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rd.X.h.call(this)}}Hr(Rd,Rr);var CE={2:"touch",3:"pen",4:"mouse"};Rd.prototype.h=function(){Rd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Nd="closure_listenable_"+(1e6*Math.random()|0),TE=0;function AE(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++TE,this.ba=this.ea=!1}function Ef(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function SE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function xE(n){const e={};for(const t in n)e[t]=n[t];return e}const ME="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C_(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<ME.length;u++)t=ME[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ng(n){this.src=n,this.g={},this.h=0}function yr(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Tg(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Ef(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kg(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}Ng.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=kg(n,e,r,s);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new AE(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var T_="closure_lm_"+(1e6*Math.random()|0),A_={};function S_(n,e,t,r,s){if(r&&r.once)return x_(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)S_(n,e[u],t,r,s);return null}return t=PE(t),n&&n[Nd]?n.N(e,t,Sd(r)?!!r.capture:!!r,s):RE(n,e,t,!1,r,s)}function RE(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=Sd(s)?!!s.capture:!!s,g=R_(n);if(g||(n[T_]=g=new Ng(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function NE(){const e=OE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ag||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(kE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function x_(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)x_(n,e[u],t,r,s);return null}return t=PE(t),n&&n[Nd]?n.O(e,t,Sd(r)?!!r.capture:!!r,s):RE(n,e,t,!0,r,s)}function ic(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)ic(n,e[u],t,r,s);else r=Sd(r)?!!r.capture:!!r,t=PE(t),n&&n[Nd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kg(u=n.g[e],t,r,s))&&(Ef(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=R_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kg(e,t,r,s)),(t=-1<n?e[n]:null)&&M_(t))}function M_(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Nd])yr(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(kE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=R_(e))?(yr(t,n),0==t.h&&(t.src=null,e[T_]=null)):Ef(n)}}}function kE(n){return n in A_?A_[n]:A_[n]="on"+n}function OE(n,e){if(n.ba)n=!0;else{e=new Rd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&M_(n),n=t.call(r,e)}return n}function R_(n){return(n=n[T_])instanceof Ng?n:null}var Og="__closure_events_fn_"+(1e9*Math.random()>>>0);function PE(n){return"function"==typeof n?n:(n[Og]||(n[Og]=function(e){return n.handleEvent(e)}),n[Og])}function Nr(){Ou.call(this),this.i=new Ng(this),this.P=this,this.I=null}function kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Rr(e,n);else if(e instanceof Rr)e.target=e.target||n;else{var s=e;C_(e=new Rr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=cs(d,r,!0,e)&&s}if(s=cs(d=e.g=n,r,!0,e)&&s,s=cs(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=cs(d=e.g=t[u],r,!1,e)&&s}function cs(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,_=d.ha||d.src;d.ea&&yr(n.i,d),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}Hr(Nr,Ou),Nr.prototype[Nd]=!0,Nr.prototype.removeEventListener=function(n,e,t,r){ic(this,n,e,t,r)},Nr.prototype.M=function(){if(Nr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ef(t[r]);delete n.g[e],n.h--}}this.I=null},Nr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Nr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var N_=Ut.JSON.stringify;function _C(){var n=LE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var O_,Ms=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lo,n=>n.reset());class lo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function FE(n){Ut.setTimeout(()=>{throw n},0)}function k_(n,e){O_||function vC(){var n=Ut.Promise.resolve(void 0);O_=function(){n.then(F_)}}(),P_||(O_(),P_=!0),LE.add(n,e)}var P_=!1,LE=new class Zo{constructor(){this.h=this.g=null}add(e,t){const r=Ms.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function F_(){for(var n;n=_C();){try{n.h.call(n.g)}catch(t){FE(t)}var e=Ms;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}P_=!1}function Pu(n,e){Nr.call(this),this.h=n||1,this.g=e||Ut,this.j=fi(this.lb,this),this.l=Date.now()}function L_(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Pg(n,e,t){if("function"==typeof n)t&&(n=fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function UE(n){n.g=Pg(()=>{n.g=null,n.i&&(n.i=!1,UE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hr(Pu,Nr),(ot=Pu.prototype).ca=!1,ot.R=null,ot.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),kr(this,"tick"),this.ca&&(L_(this),this.start()))}},ot.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){Pu.X.M.call(this),L_(this),delete this.g};class VE extends Ou{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:UE(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kd(n){Ou.call(this),this.h=n,this.g={}}Hr(kd,Ou);var bf=[];function BE(n,e,t,r){Array.isArray(t)||(t&&(bf[0]=t.toString()),t=bf);for(var s=0;s<t.length;s++){var u=S_(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function U_(n){SE(n.g,function(e,t){this.g.hasOwnProperty(t)&&M_(e)},n),n.g={}}function If(){this.g=!0}function sc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return N_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}kd.prototype.M=function(){kd.X.M.call(this),U_(this)},kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},If.prototype.Aa=function(){this.g=!1},If.prototype.info=function(){};var Fu={},B_=null;function Df(){return B_=B_||new Nr}function $_(n){Rr.call(this,Fu.Pa,n)}function Od(n){const e=Df();kr(e,new $_(e))}function HE(n,e){Rr.call(this,Fu.STAT_EVENT,n),this.stat=e}function Si(n){const e=Df();kr(e,new HE(e,n))}function GE(n,e){Rr.call(this,Fu.Qa,n),this.size=e}function Cf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Fu.Pa="serverreachability",Hr($_,Rr),Fu.STAT_EVENT="statevent",Hr(HE,Rr),Fu.Qa="timingevent",Hr(GE,Rr);var Lg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function j_(){}function WE(){}j_.prototype.h=null;var q_,Tf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function H_(){Rr.call(this,"d")}function G_(){Rr.call(this,"c")}function Ug(){}function Af(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new kd(this),this.O=wC,this.T=new Pu(n=Mg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ZE}function ZE(){this.i=null,this.g="",this.h=!1}Hr(H_,Rr),Hr(G_,Rr),Hr(Ug,j_),Ug.prototype.g=function(){return new XMLHttpRequest},Ug.prototype.i=function(){return{}},q_=new Ug;var wC=45e3,z_={},Sf={};function Vg(n,e,t){n.K=1,n.v=Bg(Ko(e)),n.s=t,n.P=!0,W_(n,null)}function W_(n,e){n.F=Date.now(),Pd(n),n.A=Ko(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),tv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ZE,n.g=hb(n.l,t?e:null,!n.s),0<n.N&&(n.L=new VE(fi(n.La,n,n.g),n.N)),BE(n.S,n.g,"readystatechange",n.ib),e=n.H?xE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Od(),function V_(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),_=0;_<g.length;_++){var I=g[_].split("=");if(1<I.length){var A=I[0];I=I[1];var M=A.split("_");d=2<=M.length&&"type"==M[1]?d+(A+"=")+I+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Z_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function K_(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=KE(n,t),s==Sf){4==e&&(n.o=4,Si(14),r=!1),sc(n.j,n.m,null,"[Incomplete Response]");break}if(s==z_){n.o=4,Si(15),sc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}sc(n.j,n.m,s,null),Ba(n,s)}Z_(n)&&s!=Sf&&s!=z_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Si(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zg(e),e.K=!0,Si(11))):(sc(n.j,n.m,t,"[Invalid Chunked Response]"),Lu(n),Fd(n))}function KE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Sf:(t=Number(e.substring(t,r)),isNaN(t)?z_:(r+=1)+t>e.length?Sf:(e=e.substr(r,t),n.C=r+t,e))}function Pd(n){n.V=Date.now()+n.O,Y_(n,n.O)}function Y_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cf(fi(n.gb,n),e)}function xf(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function Fd(n){0==n.l.G||n.I||lb(n.l,n)}function Lu(n){xf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,L_(n.T),U_(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ba(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||nv(t.h,n)))if(!n.J&&nv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Hd(t),Bf(t)}cv(t),Si(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Cf(fi(t.cb,t),6e3));if(1>=XE(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Vu(t,11)}else if((n.J||t.g==n)&&Hd(t),!xd(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const A=I[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const M=I[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const j=I[5];null!=j&&"number"==typeof j&&0<j&&(t.J=r=1.5*j,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const oe=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.h;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Vd(u,u.h),u.h=null))}if(r.D){const Oe=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.za=Oe,Gn(r.F,r.D,Oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=db(r,r.H?r.ka:null,r.V),d.J){rv(r.h,d);var g=d,_=r.J;_&&g.setTimeout(_),g.B&&(xf(g),Pd(g)),r.g=d}else lv(r);0<t.i.length&&Wg(t)}else"stop"!=I[0]&&"close"!=I[0]||Vu(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Vu(t,7):uv(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}Od()}catch{}}function oc(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(yf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function bC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(yf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function EC(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(yf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ot=Af.prototype).setTimeout=function(n){this.O=n},ot.ib=function(n){n=n.target;const e=this.L;e&&3==Qo(n)?e.l():this.La(n)},ot.La=function(n){try{if(n==this.g)e:{const A=Qo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Mg||this.g&&(this.h.h||this.g.fa()||$d(this.g)))){this.I||4!=A||7==e||Od(),xf(this);var t=this.g.aa();this.Y=t;t:if(Z_(this)){var r=$d(this.g);n="";var s=r.length,u=4==Qo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Lu(this),Fd(this);var d="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Fg(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xd(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Si(12),Lu(this),Fd(this);break e}sc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ba(this,t)}this.P?(K_(this,A,d),Mg&&this.i&&3==A&&(BE(this.S,this.T,"tick",this.hb),this.T.start())):(sc(this.j,this.m,d,null),Ba(this,d)),4==A&&Lu(this),this.i&&!this.I&&(4==A?lb(this.l,this):(this.i=!1,Pd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Si(12)):(this.o=0,Si(13)),Lu(this),Fd(this)}}}catch{}},ot.hb=function(){if(this.g){var n=Qo(this.g),e=this.g.fa();this.C<e.length&&(xf(this),K_(this,n,e),this.i&&4!=n&&Pd(this))}},ot.cancel=function(){this.I=!0,Lu(this)},ot.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function $E(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Od(),Si(17)),Lu(this),this.o=2,Fd(this)):Y_(this,this.V-n)};var IC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ld){this.h=void 0!==e?e:n.h,Mf(this,n.j),this.s=n.s,this.g=n.g,J_(this,n.m),this.l=n.l,e=n.i;var t=new Ud;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),It(this,t),this.o=n.o}else n&&(t=String(n).match(IC))?(this.h=!!e,Mf(this,t[1]||"",!0),this.s=Rf(t[2]||""),this.g=Rf(t[3]||"",!0),J_(this,t[4]),this.l=Rf(t[5]||"",!0),It(this,t[6]||"",!0),this.o=Rf(t[7]||"")):(this.h=!!e,this.i=new Ud(null,this.h))}function Ko(n){return new Ld(n)}function Mf(n,e,t){n.j=t?Rf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function J_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function It(n,e,t){e instanceof Ud?(n.i=e,function CC(n,e){e&&!n.j&&(Uu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(X_(this,r),tv(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Yo(e,Lx)),n.i=new Ud(e,n.h))}function Gn(n,e,t){n.i.set(e,t)}function Bg(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Rf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,DC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function DC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ld.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Yo(e,Nf,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Yo(e,Nf,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Yo(t,"/"==t.charAt(0)?or:$g,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Yo(t,YE)),n.join("")};var Nf=/[#\/\?@]/g,$g=/[#\?:]/g,or=/[#\?]/g,Lx=/[#\?@]/g,YE=/#/g;function Ud(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Uu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Q_(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function X_(n,e){Uu(n),e=ac(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ev(n,e){return Uu(n),e=ac(n,e),n.g.has(e)}function tv(n,e,t){X_(n,e),0<t.length&&(n.i=null,n.g.set(ac(n,e),_f(t)),n.h+=t.length)}function ac(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function QE(n){this.l=n||kf,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Ud.prototype).add=function(n,e){Uu(this),this.i=null,n=ac(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Uu(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ot.oa=function(){Uu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ot.W=function(n){Uu(this);let e=[];if("string"==typeof n)ev(this,n)&&(e=e.concat(this.g.get(ac(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Uu(this),this.i=null,ev(this,n=ac(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var s=u;""!==d[r]&&(s+="="+encodeURIComponent(String(d[r]))),n.push(s)}}return this.i=n.join("&")};var kf=10;function JE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function XE(n){return n.h?1:n.g?n.g.size:0}function nv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Vd(n,e){n.g?n.g.add(e):n.h=e}function rv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function iv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _f(n.i)}function jg(){}function AC(){this.g=new jg}function Of(n,e,t){const r=t||"";try{oc(n,function(s,u){let d=s;Sd(s)&&(d=N_(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Hg(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Ff(n){this.l=n.ac||null,this.j=n.jb||!1}function Gg(n,e){Nr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=qg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}QE.prototype.cancel=function(){if(this.i=iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jg.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},jg.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Hr(Ff,j_),Ff.prototype.g=function(){return new Gg(this.l,this.j)},Ff.prototype.i=function(n){return function(){return n}}({}),Hr(Gg,Nr);var qg=0;function sv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Bd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Lf(n)}function Lf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=Gg.prototype).open=function(n,e){if(this.readyState!=qg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Lf(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bd(this)),this.readyState=qg},ot.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Lf(this)),this.g&&(this.readyState=3,Lf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ot.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bd(this):Lf(this),3==this.readyState&&sv(this)}},ot.Va=function(n){this.g&&(this.response=this.responseText=n,Bd(this))},ot.Ua=function(n){this.g&&(this.response=n,Bd(this))},ot.ga=function(){this.g&&Bd(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Gg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var eb=Ut.JSON.parse;function ar(n){Nr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tb,this.K=this.L=!1}Hr(ar,Nr);var tb="",Ux=/^https?$/i,Vx=["POST","PUT"];function SC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ov(n),zg(n)}function ov(n){n.D||(n.D=!0,kr(n,"complete"),kr(n,"error"))}function Uf(n){if(n.h&&typeof ku<"u"&&(!n.C[1]||4!=Qo(n)||2!=n.aa()))if(n.v&&4==Qo(n))Pg(n.Ha,0,n);else if(kr(n,"readystatechange"),4==Qo(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var s=String(n.H).match(IC)[1]||null;if(!s&&Ut.self&&Ut.self.location){var u=Ut.self.location.protocol;s=u.substr(0,u.length-1)}r=!Ux.test(s?s.toLowerCase():"")}t=r}if(t)kr(n,"complete"),kr(n,"success");else{n.m=6;try{var d=2<Qo(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",ov(n)}}finally{zg(n)}}}function zg(n,e){if(n.g){nb(n);const t=n.g,r=n.C[0]?mf:null;n.g=null,n.C=null,e||kr(n,"ready");try{t.onreadystatechange=r}catch{}}}function nb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Qo(n){return n.g?n.g.readyState:0}function $d(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rb(n){let e="";return SE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function av(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=rb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Gn(n,e,t))}function Vf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ib(n){this.Ca=0,this.i=[],this.j=new If,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Vf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Vf("baseRetryDelayMs",5e3,n),this.bb=Vf("retryDelaySeedMs",1e4,n),this.$a=Vf("forwardChannelMaxRetries",2,n),this.ta=Vf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new QE(n&&n.concurrentRequestLimit),this.Fa=new AC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function uv(n){if(sb(n),3==n.G){var e=n.U++,t=Ko(n.F);Gn(t,"SID",n.I),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),jd(n,t),(e=new Af(n,n.j,e,void 0)).K=2,e.v=Bg(Ko(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=hb(e.l,null),e.g.da(e.v)),e.F=Date.now(),Pd(e)}cb(n)}function Bf(n){n.g&&(Zg(n),n.g.cancel(),n.g=null)}function sb(n){Bf(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),Hd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function Wg(n){JE(n.h)||n.m||(n.m=!0,k_(n.Ja,n),n.C=0)}function ob(n,e){var t;t=e?e.m:n.U++;const r=Ko(n.F);Gn(r,"SID",n.I),Gn(r,"RID",t),Gn(r,"AID",n.T),jd(n,r),n.o&&n.s&&av(r,n.o,n.s),t=new Af(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=ab(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Vd(n.h,t),Vg(t,r,e)}function jd(n,e){n.ia&&SE(n.ia,function(t,r){Gn(e,r,t)}),n.l&&oc({},function(t,r){Gn(e,r,t)})}function ab(n,e,t){t=Math.min(n.i.length,t);var r=n.l?fi(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let I=s[_].h;const A=s[_].g;if(I-=u,0>I)u=Math.max(0,s[_].h-100),g=!1;else try{Of(A,d,"req"+I+"_")}catch{r&&r(A)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function lv(n){n.g||n.u||(n.Z=1,k_(n.Ia,n),n.A=0)}function cv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Cf(fi(n.Ia,n),dv(n,n.A)),n.A++,0))}function Zg(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function ub(n){n.g=new Af(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ko(n.sa);Gn(e,"RID","rpc"),Gn(e,"SID",n.I),Gn(e,"CI",n.L?"0":"1"),Gn(e,"AID",n.T),Gn(e,"TYPE","xmlhttp"),jd(n,e),n.o&&n.s&&av(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Bg(Ko(e)),t.s=null,t.P=!0,W_(t,n)}function Hd(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function lb(n,e){var t=null;if(n.g==e){Hd(n),Zg(n),n.g=null;var r=2}else{if(!nv(n.h,e))return;t=e.D,rv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;kr(r=Df(),new GE(r,t)),Wg(n)}else lv(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function $f(n,e){return!(XE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Cf(fi(n.Ja,n,e),dv(n,n.C)),n.C++,0)))}(n,e)||2==r&&cv(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Vu(n,5);break;case 4:Vu(n,10);break;case 3:Vu(n,6);break;default:Vu(n,2)}}function dv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Vu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=fi(n.kb,n);t||(t=new Ld("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Mf(t,"https"),Bg(t)),function Pf(n,e){const t=new If;if(Ut.Image){const r=new Image;r.onload=Cg(Hg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Cg(Hg,t,r,"TestLoadImage: error",!1,e),r.onabort=Cg(Hg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cg(Hg,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Si(2);n.G=0,n.l&&n.l.va(e),cb(n),sb(n)}function cb(n){if(n.G=0,n.la=[],n.l){const e=iv(n.h);(0!=e.length||0!=n.i.length)&&(vE(n.la,e),vE(n.la,n.i),n.h.i.length=0,_f(n.i),n.i.length=0),n.l.ua()}}function db(n,e,t){var r=t instanceof Ld?Ko(t):new Ld(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),J_(r,r.m);else{var s=Ut.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ld(null,void 0);r&&Mf(u,r),e&&(u.g=e),s&&J_(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Gn(r,t,e),Gn(r,"VER",n.ma),jd(n,r),r}function hb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Da&&!n.ra?new Ff({jb:!0}):n.ra)).Ka(n.H),e}function Kg(){}function Yg(){if(rc&&!(10<=Number(DE)))throw Error("Environmental error: no available transport.")}function Gi(n,e){Nr.call(this),this.g=new ib(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!xd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gd(this)}function fb(n){H_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function pb(){G_.call(this),this.status=1}function Gd(n){this.g=n}(ot=ar.prototype).Ka=function(n){this.L=n},ot.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():q_.g(),this.C=function zE(n){return n.h||(n.h=n.i())}(this.u?this.u:q_),this.g.onreadystatechange=fi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void SC(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ut.FormData&&n instanceof Ut.FormData,!(0<=Tg(Vx,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nb(this),0<this.B&&((this.K=function Bx(n){return rc&&function I_(){return function v_(n){var e=yC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wE(String(vf)).split("."),t=wE("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Md(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Md(0==s[2].length,0==u[2].length)||Md(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fi(this.qa,this)):this.A=Pg(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){SC(this,u)}},ot.qa=function(){typeof ku<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kr(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,kr(this,"complete"),kr(this,"abort"),zg(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zg(this,!0)),ar.X.M.call(this)},ot.Ha=function(){this.s||(this.F||this.v||this.l?Uf(this):this.fb())},ot.fb=function(){Uf(this)},ot.aa=function(){try{return 2<Qo(this)?this.g.status:-1}catch{return-1}},ot.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),eb(e)}},ot.Ea=function(){return this.m},ot.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=ib.prototype).ma=8,ot.G=1,ot.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Af(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=xE(u),C_(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ab(this,s,e),Gn(t=Ko(this.F),"RID",n),Gn(t,"CVER",22),this.D&&Gn(t,"X-HTTP-Session-Id",this.D),jd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(rb(u)))+"&"+e:this.o&&av(t,this.o,u)),Vd(this.h,s),this.Ya&&Gn(t,"TYPE","init"),this.O?(Gn(t,"$req",e),Gn(t,"SID","null"),s.Z=!0,Vg(s,t,null)):Vg(s,t,e),this.G=2}}else 3==this.G&&(n?ob(this,n):0==this.i.length||JE(this.h)||ob(this))},ot.Ia=function(){if(this.u=null,ub(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Cf(fi(this.eb,this),n)}},ot.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Si(10),Bf(this),ub(this))},ot.cb=function(){null!=this.v&&(this.v=null,Bf(this),cv(this),Si(19))},ot.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Si(2)):(this.j.info("Failed to ping google.com"),Si(1))},(ot=Kg.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Ra=function(){},Yg.prototype.g=function(n,e){return new Gi(n,e)},Hr(Gi,Nr),Gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Si(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=db(n,null,n.V),Wg(n)},Gi.prototype.close=function(){uv(this.g)},Gi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=N_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Wg(e)},Gi.prototype.M=function(){this.g.l=null,delete this.j,uv(this.g),delete this.g,Gi.X.M.call(this)},Hr(fb,H_),Hr(pb,G_),Hr(Gd,Kg),Gd.prototype.xa=function(){kr(this.g,"a")},Gd.prototype.wa=function(n){kr(this.g,new fb(n))},Gd.prototype.va=function(n){kr(this.g,new pb)},Gd.prototype.ua=function(){kr(this.g,"b")},Yg.prototype.createWebChannel=Yg.prototype.g,Gi.prototype.send=Gi.prototype.u,Gi.prototype.open=Gi.prototype.m,Gi.prototype.close=Gi.prototype.close,Lg.NO_ERROR=0,Lg.TIMEOUT=8,Lg.HTTP_ERROR=6,qE.COMPLETE="complete",WE.EventType=Tf,Tf.OPEN="a",Tf.CLOSE="b",Tf.ERROR="c",Tf.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.Oa,ar.prototype.getLastErrorCode=ar.prototype.Ea,ar.prototype.getStatus=ar.prototype.aa,ar.prototype.getResponseJson=ar.prototype.Sa,ar.prototype.getResponseText=ar.prototype.fa,ar.prototype.send=ar.prototype.da,ar.prototype.setWithCredentials=ar.prototype.Ka;var xC=Hi.createWebChannelTransport=function(){return new Yg},MC=Hi.getStatEventTarget=function(){return Df()},hv=Hi.ErrorCode=Lg,RC=Hi.EventType=qE,NC=Hi.Event=Fu,fv=Hi.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gb=Hi.FetchXmlHttpFactory=Ff,Qg=Hi.WebChannel=WE,kC=Hi.XhrIo=ar;const pv="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let qd="9.15.0";const Bu=new ls.Yd("@firebase/firestore");function jf(){return Bu.logLevel}function Be(n,...e){if(Bu.logLevel<=ls.in.DEBUG){const t=e.map(mv);Bu.debug(`Firestore (${qd}): ${n}`,...t)}}function Xn(n,...e){if(Bu.logLevel<=ls.in.ERROR){const t=e.map(mv);Bu.error(`Firestore (${qd}): ${n}`,...t)}}function uc(n,...e){if(Bu.logLevel<=ls.in.WARN){const t=e.map(mv);Bu.warn(`Firestore (${qd}): ${n}`,...t)}}function mv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${qd}) INTERNAL ASSERTION FAILED: `+n;throw Xn(e),new Error(e)}function ht(n,e){n||rt()}function qe(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _v{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class OC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vv{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let d=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new qr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=d;e.enqueueRetryable((0,_e.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new qr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new yv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new Gr(e)}}class PC{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yb{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new PC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _b{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Be("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.A=t.token,new Jg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vb(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function zd(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function wb(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new qn(0,0))}static max(){return new vt(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xg{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends Xg{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new an(t)}static emptyPath(){return new an([])}}const LC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends Xg{construct(e,t,r){return new ur(e,t,r)}static isValidIdentifier(e){return LC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new ke(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new ke(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new ke(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(d=!d,s++):"."!==g||d?(r+=g,s++):(u(),s++)}if(u(),d)throw new ke(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(t)}static emptyPath(){return new ur([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(an.fromString(e))}static fromName(e){return new We(an.fromString(e).popFirst(5))}static empty(){return new We(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new an(e.slice()))}}class Ev{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function bv(n){return n.fields.find(e=>2===e.kind)}function lc(n){return n.fields.filter(e=>2!==e.kind)}Ev.UNKNOWN_ID=-1;class Hf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gf(0,ds.min())}}function Eb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=vt.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new ds(s,We.empty(),e)}function bb(n){return new ds(n.readTime,n.key,-1)}class ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ds(vt.min(),We.empty(),-1)}static max(){return new ds(vt.max(),We.empty(),-1)}}function Iv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const Ib="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Db{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Rs(n){return em.apply(this,arguments)}function em(){return em=(0,_e.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==Ib)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),em.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let s=0,u=0,d=!1;e.forEach(g=>{++s,g.next(()=>{++u,d&&u===s&&t()},_=>r(_))}),d=!0,u===s&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(s=>s?le.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,s)=>{const u=e.length,d=new Array(u);let g=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(A=>{d[I]=A,++g,g===u&&r(d)},A=>s(A))}})}static doWhile(e,t){return new le((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class qf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new qr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Wd(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Cv(r.target.error);this.P.reject(new Wd(e,s))}}static open(e,t,r,s){try{return new qf(t,e.transaction(s,r))}catch(u){throw new Wd(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $x(t)}}class Ns{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ns.D((0,Ot.z$)())&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),cc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ot.hl)())return!1;if(Ns.N())return!0;const e=(0,Ot.z$)(),t=Ns.D(e),r=0<t&&t<10,s=Ns.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new Wd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;s("VersionError"===g.name?new ke(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new ke(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Wd(e,g))},u.onupgradeneeded=d=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,_e.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const _=qf.open(u.db,e,d?"readonly":"readwrite",r),I=s(_).next(A=>(_.V(),A)).catch(A=>(_.abort(A),le.reject(A))).toPromise();return I.catch(()=>{}),yield _.v,I}catch(_){const I=_,A="FirebaseError"!==I.name&&g<3;if(Be("SimpleDb","Transaction failed with error:",I.message,"Retrying:",A),u.close(),!A)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cb{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return cc(this.q.delete())}}class Wd extends ke{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $u(n){return"IndexedDbTransactionError"===n.name}class $x{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cc(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),cc(this.store.add(e))}get(e){return cc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),cc(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),cc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(d,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new le((u,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}Y(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,d,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new le((r,s)=>{t.onerror=u=>{const d=Cv(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new le((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void s();const _=new Cb(g),I=t(g.primaryKey,g.value,_);if(I instanceof le){const A=I.catch(M=>(_.done(),le.reject(M)));r.push(A)}_.isDone?s():null===_.G?g.continue():g.continue(_.G)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cc(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Cv(r.target.error);t(s)}})}let Dv=!1;function Cv(n){const e=Ns.D((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dv||(Dv=!0,setTimeout(()=>{throw r},0)),r}}return n}class BC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){$u(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Rs(r)}yield t.nt(6e4)}))}}class $C{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return le.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Be("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,s).next(g=>{s-=g,r.add(d)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(s,u)).next(g=>(Be("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const d=bb(u);Iv(d,r)>0&&(r=d)}),new ds(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ei=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>r.writeSequenceNumber(s))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class jC{constructor(e,t,r,s,u,d,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class Jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}function co(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $a(n){return null==n}function zf(n){return 0===n&&1/n==-1/0}function Tb(n){return"number"==typeof n&&Number.isInteger(n)&&!zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new lr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const nm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ju(n){if(ht(!!n),"string"==typeof n){let e=0;const t=nm.exec(n);if(ht(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hu(n){return"string"==typeof n?lr.fromBase64String(n):lr.fromUint8Array(n)}function rm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function im(n){const e=n.mapValue.fields.__previous_value__;return rm(e)?im(e):e}function Zd(n){const e=ju(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}const Gu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sm={nullValue:"NULL_VALUE"};function Kd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rm(n)?4:xv(n)?9007199254740991:10:rt()}function ks(n,e){if(n===e)return!0;const t=Kd(n);if(t!==Kd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zd(n).isEqual(Zd(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ju(r.timestampValue),d=ju(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Hu(n.bytesValue).isEqual(Hu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return cr(r.geoPointValue.latitude)===cr(s.geoPointValue.latitude)&&cr(r.geoPointValue.longitude)===cr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return cr(r.integerValue)===cr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=cr(r.doubleValue),d=cr(s.doubleValue);return u===d?zf(u)===zf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return zd(n.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(co(u)!==co(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!ks(u[g],d[g])))return!1;return!0}(n,e);default:return rt()}var s}function hc(n,e){return void 0!==(n.values||[]).find(t=>ks(t,e))}function ja(n,e){if(n===e)return 0;const t=Kd(n),r=Kd(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=cr(s.integerValue||s.doubleValue),g=cr(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return om(n.timestampValue,e.timestampValue);case 4:return om(Zd(n),Zd(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=Hu(s),g=Hu(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),g=u.split("/");for(let _=0;_<d.length&&_<g.length;_++){const I=Vt(d[_],g[_]);if(0!==I)return I}return Vt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Vt(cr(s.latitude),cr(u.latitude));return 0!==d?d:Vt(cr(s.longitude),cr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],g=u.values||[];for(let _=0;_<d.length&&_<g.length;++_){const I=ja(d[_],g[_]);if(I)return I}return Vt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Gu.mapValue&&u===Gu.mapValue)return 0;if(s===Gu.mapValue)return 1;if(u===Gu.mapValue)return-1;const d=s.fields||{},g=Object.keys(d),_=u.fields||{},I=Object.keys(_);g.sort(),I.sort();for(let A=0;A<g.length&&A<I.length;++A){const M=Vt(g[A],I[A]);if(0!==M)return M;const j=ja(d[g[A]],_[I[A]]);if(0!==j)return j}return Vt(g.length,I.length)}(n.mapValue,e.mapValue);default:throw rt()}}function om(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=ju(n),r=ju(e),s=Vt(t.seconds,r.seconds);return 0!==s?s:Vt(t.nanos,r.nanos)}function qu(n){return Tv(n)}function Tv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ju(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hu(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=Tv(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of s)d?d=!1:u+=",",u+=`${g}:${Tv(r.fields[g])}`;return u+"}"}(n.mapValue):rt();var e}function fc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Av(n){return!!n&&"integerValue"in n}function Wf(n){return!!n&&"arrayValue"in n}function Sv(n){return!!n&&"nullValue"in n}function am(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zf(n){return!!n&&"mapValue"in n}function Kf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ab(n){return"nullValue"in n?sm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fc(Jo.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function GC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fc(Jo.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Gu:rt()}function Mv(n,e){const t=ja(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Rv(n,e){const t=ja(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zu{constructor(e,t){this.position=e,this.inclusive=t}}function Nv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?We.comparator(We.fromName(d.referenceValue),t.key):ja(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Sb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ks(n.position[t],e.position[t]))return!1;return!0}class pi{}class Yt extends pi{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new zC(e,t,r):"array-contains"===t?new ZC(e,r):"in"===t?new lm(e,r):"not-in"===t?new kb(e,r):"array-contains-any"===t?new Ob(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Rb(e,r):new WC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ja(t,this.value)):null!==t&&Kd(this.value)===Kd(t)&&this.matchesComparison(ja(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bn extends pi{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new bn(e,t)}matches(e){return Yd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Yd(n){return"and"===n.op}function xb(n){return"or"===n.op}function qC(n){return kv(n)&&Yd(n)}function kv(n){for(const e of n.filters)if(e instanceof bn)return!1;return!0}function Ov(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+qu(n.value);{const e=n.filters.map(t=>Ov(t)).join(",");return`${n.op}(${e})`}}function Qd(n,e){return n instanceof Yt?(t=n,(r=e)instanceof Yt&&t.op===r.op&&t.field.isEqual(r.field)&&ks(t.value,r.value)):n instanceof bn?function(t,r){return r instanceof bn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,d)=>s&&Qd(u,r.filters[d]),!0)}(n,e):void rt();var t,r}function Mb(n,e){const t=n.filters.concat(e);return bn.create(t,n.op)}function um(n){return n instanceof Yt?`${(e=n).field.canonicalString()} ${e.op} ${qu(e.value)}`:n instanceof bn?function(e){return e.op.toString()+" {"+e.getFilters().map(um).join(" ,")+"}"}(n):"Filter";var e}class zC extends Yt{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rb extends Yt{constructor(e,t){super(e,"in",t),this.keys=Nb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WC extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=Nb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class ZC extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wf(t)&&hc(t.arrayValue,this.value)}}class lm extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hc(this.value.arrayValue,t)}}class kb extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hc(this.value.arrayValue,t)}}class Ob extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hc(this.value.arrayValue,r))}}class Ha{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class _r{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new _r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new _r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yf(this.root,e,this.comparator,!0)}}class Yf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??ti.RED,this.left=s??ti.EMPTY,this.right=u??ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new ti(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return ti.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1,ti.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pc(this.data.getIterator())}getIteratorFrom(e){return new pc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class pc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jd(n){return n.hasNext()?n.getNext():void 0}class qi{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new qi([])}unionWith(e){let t=new In(ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Or{constructor(e){this.value=e}static empty(){return new Or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kf(t)}setAll(e){let t=ur.emptyPath(),r={},s=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}d?r[g.lastSegment()]=Kf(d):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Zf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){dc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Or(Kf(this.value))}}function KC(n){const e=[];return dc(n.fields,(t,r)=>{const s=new ur([t]);if(Zf(r)){const u=KC(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new qi(e)}class Un{constructor(e,t,r,s,u,d,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Un(e,0,vt.min(),vt.min(),vt.min(),Or.empty(),0)}static newFoundDocument(e,t,r,s){return new Un(e,1,t,vt.min(),r,s,0)}static newNoDocument(e,t){return new Un(e,2,t,vt.min(),vt.min(),Or.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,vt.min(),vt.min(),Or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jx{constructor(e,t=null,r=[],s=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=g,this.ft=null}}function Fv(n,e=null,t=[],r=[],s=null,u=null,d=null){return new jx(n,e,t,r,s,u,d)}function gc(n){const e=qe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ov(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),$a(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qu(r)).join(",")),e.ft=t}return e.ft}function Qf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Pv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Qd(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Sb(n.startAt,e.startAt)&&Sb(n.endAt,e.endAt)}function Jf(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Xf(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function Pb(n,e,t){let r=sm,s=!0;for(const u of Xf(n,e)){let d=sm,g=!0;switch(u.op){case"<":case"<=":d=Ab(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=sm}Mv({value:r,inclusive:s},{value:d,inclusive:g})<0&&(r=d,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Mv({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function Lv(n,e,t){let r=Gu,s=!0;for(const u of Xf(n,e)){let d=Gu,g=!0;switch(u.op){case">=":case">":d=GC(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Gu}Rv({value:r,inclusive:s},{value:d,inclusive:g})>0&&(r=d,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Rv({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class Xo{constructor(e,t=null,r=[],s=[],u=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=_,this.dt=null,this._t=null}}function Fb(n,e,t,r,s,u,d,g){return new Xo(n,e,t,r,s,u,d,g)}function Xd(n){return new Xo(n)}function Uv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Vv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ep(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function cm(n){return null!==n.collectionGroup}function Wu(n){const e=qe(n);if(null===e.dt){e.dt=[];const t=ep(e),r=Vv(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Ha(t)),e.dt.push(new Ha(ur.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ha(ur.keyField(),u))}}}return e.dt}function gi(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=Fv(e.path,e.collectionGroup,Wu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Wu(e))t.push(new Ha(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new zu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new zu(e.startAt.position,e.startAt.inclusive):null;e._t=Fv(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function Bv(n,e){e.getFirstInequalityField(),ep(n);const t=n.filters.concat([e]);return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dm(n,e,t){return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hm(n,e){return Qf(gi(n),gi(e))&&n.limitType===e.limitType}function $v(n){return`${gc(gi(n))}|lt:${n.limitType}`}function Lb(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>um(r)).join(", ")}]`),$a(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qu(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qu(r)).join(",")),`Target(${t})`}(gi(n))}; limitType=${n.limitType})`}function Ub(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):We.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Wu(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const g=Nv(s,u,d);return s.inclusive?g<=0:g<0}(t.startAt,Wu(t),r)||t.endAt&&!function(s,u,d){const g=Nv(s,u,d);return s.inclusive?g>=0:g>0}(t.endAt,Wu(t),r)));var t,r}function YC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QC(n){return(e,t)=>{let r=!1;for(const s of Wu(n)){const u=Hx(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Hx(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(s,u,d){const g=u.data.field(s),_=d.data.field(s);return null!==g&&null!==_?ja(g,_):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function JC(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zf(e)?"-0":e}}function XC(n){return{integerValue:""+n}}function eT(n,e){return Tb(e)?XC(e):JC(n,e)}class mc{constructor(){this._=void 0}}function Gx(n,e,t){return n instanceof yc?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Zu?tT(n,e):n instanceof Ga?jv(n,e):function(r,s){const u=tp(r,s),d=Hv(u)+Hv(r.gt);return Av(u)&&Av(r.gt)?XC(d):JC(r.yt,d)}(n,e)}function Vb(n,e,t){return n instanceof Zu?tT(n,e):n instanceof Ga?jv(n,e):t}function tp(n,e){return n instanceof eh?Av(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yc extends mc{}class Zu extends mc{constructor(e){super(),this.elements=e}}function tT(n,e){const t=nT(e);for(const r of n.elements)t.some(s=>ks(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ga extends mc{constructor(e){super(),this.elements=e}}function jv(n,e){let t=nT(e);for(const r of n.elements)t=t.filter(s=>!ks(s,r));return{arrayValue:{values:t}}}class eh extends mc{constructor(e,t){super(),this.yt=e,this.gt=t}}function Hv(n){return cr(n.integerValue||n.doubleValue)}function nT(n){return Wf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fm{constructor(e,t){this.field=e,this.transform=t}}class iT{constructor(e,t){this.version=e,this.transformResults=t}}class Sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Gv{}function sT(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new mi(n.key,Sn.none()):new rp(n.key,n.data,Sn.none());{const t=n.data,r=Or.empty();let s=new In(ur.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new qa(n.key,r,new qi(s.toArray()),Sn.none())}}function qx(n,e,t){n instanceof rp?function(r,s,u){const d=r.value.clone(),g=zv(r.fieldTransforms,s,u.transformResults);d.setAll(g),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof qa?function(r,s,u){if(!pm(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=zv(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(qv(r)),g.setAll(d),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function np(n,e,t,r){return n instanceof rp?function(s,u,d,g){if(!pm(s.precondition,u))return d;const _=s.value.clone(),I=aT(s.fieldTransforms,g,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof qa?function(s,u,d,g){if(!pm(s.precondition,u))return d;const _=aT(s.fieldTransforms,g,u),I=u.data;return I.setAll(qv(s)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,pm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function oT(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=tp(r.transform,s||null);null!=u&&(null===t&&(t=Or.empty()),t.set(r.field,u))}return t||null}function Bb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&zd(t,r,(s,u)=>function rT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zu&&r instanceof Zu||t instanceof Ga&&r instanceof Ga?zd(t.elements,r.elements,ks):t instanceof eh&&r instanceof eh?ks(t.gt,r.gt):t instanceof yc&&r instanceof yc);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class rp extends Gv{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qa extends Gv{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function qv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zv(n,e,t){const r=new Map;ht(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,g=e.data.field(u.field);r.set(u.field,Vb(d,g,t[s]))}return r}function aT(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,Gx(u,d,e))}return r}class mi extends Gv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wv extends Gv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zv{constructor(e){this.count=e}}var Ir,Bt;function $b(n){switch(n){default:return rt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function gm(n){if(void 0===n)return Xn("GRPC error has no .code"),he.UNKNOWN;switch(n){case Ir.OK:return he.OK;case Ir.CANCELLED:return he.CANCELLED;case Ir.UNKNOWN:return he.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return he.INTERNAL;case Ir.UNAVAILABLE:return he.UNAVAILABLE;case Ir.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Ir.NOT_FOUND:return he.NOT_FOUND;case Ir.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Ir.ABORTED:return he.ABORTED;case Ir.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Ir.DATA_LOSS:return he.DATA_LOSS;default:return rt()}}(Bt=Ir||(Ir={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";class Ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){dc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return tm(this.inner)}size(){return this.innerSize}}const uT=new _r(We.comparator);function yi(){return uT}const Kv=new _r(We.comparator);function th(...n){let e=Kv;for(const t of n)e=e.insert(t.key,t);return e}function jb(n){let e=Kv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ho(){return ip()}function Yv(){return ip()}function ip(){return new Ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const Hb=new _r(We.comparator),lT=new In(We.comparator);function zt(...n){let e=lT;for(const t of n)e=e.add(t);return e}const Yu=new In(Vt);function sp(){return Yu}class _c{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,hs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _c(vt.min(),s,sp(),yi(),zt())}}class hs{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hs(r,t,zt(),zt(),zt())}}class mm{constructor(e,t,r,s){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=s}}class cT{constructor(e,t){this.targetId=e,this.Et=t}}class Gb{constructor(e,t,r=lr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class qb{constructor(){this.At=0,this.Rt=Qv(),this.bt=lr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=zt(),t=zt(),r=zt();return this.Rt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:rt()}}),new hs(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=Qv()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class dT{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=yi(),this.qt=zb(),this.Ut=new In(Vt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,r=e.Et.count,s=this.Yt(t);if(s){const u=s.target;if(Jf(u))if(0===r){const d=new We(u.path);this.Qt(t,d,Un.newNoDocument(d,vt.min()))}else ht(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,d)=>{const g=this.Yt(d);if(g){if(u.current&&Jf(g.target)){const _=new We(g.target.path);null!==this.Lt.get(_)||this.te(d,_)||this.Qt(d,_,Un.newNoDocument(_,e))}u.St&&(t.set(d,u.Ct()),u.xt())}});let r=zt();this.qt.forEach((u,d)=>{let g=!0;d.forEachWhile(_=>{const I=this.Yt(_);return!I||2===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Lt.forEach((u,d)=>d.setReadTime(e));const s=new _c(e,t,this.Ut,this.Lt,r);return this.Lt=yi(),this.qt=zb(),this.Ut=new In(Vt),s}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new qb,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new In(Vt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new qb),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function zb(){return new _r(We.comparator)}function Qv(){return new _r(We.comparator)}const zx={asc:"ASCENDING",desc:"DESCENDING"},Wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hT={and:"AND",or:"OR"};class Zb{constructor(e,t){this.databaseId=e,this.wt=t}}function op(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ym(n,e){return n.wt?e.toBase64():e.toUint8Array()}function Kb(n,e){return op(n,e.toTimestamp())}function dr(n){return ht(!!n),vt.fromTimestamp(function(e){const t=ju(e);return new qn(t.seconds,t.nanos)}(n))}function _m(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Jv(n){const e=an.fromString(n);return ht(Qu(e)),e}function nh(n,e){return _m(n.databaseId,e.path)}function fs(n,e){const t=Jv(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(e0(t))}function rh(n,e){return _m(n.databaseId,e)}function Xv(n){const e=Jv(n);return 4===e.length?an.emptyPath():e0(e)}function ap(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e0(n){return ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function t0(n,e,t){return{name:nh(n,e),fields:t.value.mapValue.fields}}function Yb(n,e,t){const r=fs(n,e.name),s=dr(e.updateTime),u=e.createTime?dr(e.createTime):vt.min(),d=new Or({mapValue:{fields:e.fields}}),g=Un.newFoundDocument(r,s,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function vm(n,e){let t;if(e instanceof rp)t={update:t0(n,e.key,e.value)};else if(e instanceof mi)t={delete:nh(n,e.key)};else if(e instanceof qa)t={update:t0(n,e.key,e.data),updateMask:Xb(e.fieldMask)};else{if(!(e instanceof Wv))return rt();t={verify:nh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof yc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ga)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof eh)return{fieldPath:u.field.canonicalString(),increment:d.gt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Kb(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:rt()),t;var s}function wm(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Sn.updateTime(dr(s.updateTime)):void 0!==s.exists?Sn.exists(s.exists):Sn.none():Sn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let g=null;"setToServerValue"in d?(ht("REQUEST_TIME"===d.setToServerValue),g=new yc):"appendMissingElements"in d?g=new Zu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new Ga(d.removeAllFromArray.values||[]):"increment"in d?g=new eh(u,d.increment):rt();const _=ur.fromServerFormat(d.fieldPath);return new fm(_,g)}(n,s)):[];var s;if(e.update){const s=fs(n,e.update.name),u=new Or({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new qi((e.updateMask.fieldPaths||[]).map(I=>ur.fromServerFormat(I)));return new qa(s,u,d,t,r)}return new rp(s,u,t,r)}if(e.delete){const s=fs(n,e.delete);return new mi(s,t)}if(e.verify){const s=fs(n,e.verify);return new Wv(s,t)}return rt()}function Qb(n,e){return{documents:[rh(n,e.path)]}}function n0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=rh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=rh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return Jb(bn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:za((A=I).field),direction:Kx(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(I=e.limit,n.wt||$a(I)?I:{value:I});var I,g,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function gT(n){let e=Xv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ht(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const M=mT(A);return M instanceof bn&&qC(M)?M.getFilters():[M]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Ha(ih((M=A).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let g=null;t.limit&&(g=function(A){let M;return M="object"==typeof A?A.value:A,$a(M)?null:M}(t.limit));let _=null;var A;t.startAt&&(_=new zu((A=t.startAt).values||[],!!A.before));let I=null;return t.endAt&&(I=function(A){return new zu(A.values||[],!A.before)}(t.endAt)),Fb(e,s,d,u,g,"F",_,I)}function mT(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ih(e.unaryFilter.field);return Yt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ih(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ih(e.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ih(e.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Yt.create(ih((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return bn.create(e.compositeFilter.filters.map(t=>mT(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function Kx(n){return zx[n]}function Yx(n){return Wb[n]}function yT(n){return hT[n]}function za(n){return{fieldPath:n.canonicalString()}}function ih(n){return ur.fromServerFormat(n.fieldPath)}function Jb(n){return n instanceof Yt?function(e){if("=="===e.op){if(am(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NAN"}};if(Sv(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(am(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NAN"}};if(Sv(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(e.field),op:Yx(e.op),value:e.value}}}(n):n instanceof bn?function(e){const t=e.getFilters().map(r=>Jb(r));return 1===t.length?t[0]:{compositeFilter:{op:yT(e.op),filters:t}}}(n):rt()}function Xb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qu(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Em(e)),e=r0(n.get(t),e);return Em(e)}function r0(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Em(n){return n+"\x01\x01"}function ea(n){const e=n.length;if(ht(e>=2),2===e)return ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&rt(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:rt()}u=d+2}return new an(r)}const bm=["userId","batchId"];function sh(n,e){return[n,_i(e)]}function up(n,e,t){return[n,_i(e),t]}const Qx={},Jx=["prefixPath","collectionGroup","readTime","documentId"],Xx=["prefixPath","collectionGroup","documentId"],eM=["collectionGroup","readTime","prefixPath","documentId"],eI=["canonicalId","targetId"],_T=["targetId","path"],vT=["path","targetId"],wT=["collectionId","parent"],ET=["indexId","uid"],tI=["uid","sequenceNumber"],nI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rI=["indexId","uid","orderedDocumentKey"],bT=["userId","collectionPath","documentId"],IT=["userId","collectionPath","largestBatchId"],iI=["userId","collectionGroup","largestBatchId"],Im=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tM=[...Im,"documentOverlays"],s0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dm=s0,DT=[...Dm,"indexConfiguration","indexState","indexEntries"];class o0 extends Db{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ni(n,e){const t=qe(n);return Ns.M(t.se,e)}class sI{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&qx(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=np(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=np(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Yv();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(s.key)?null:g;const _=sT(d,g);null!==_&&r.set(s.key,_),d.isValidDocument()||d.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&zd(this.mutations,e.mutations,(t,r)=>Bb(t,r))&&zd(this.baseMutations,e.baseMutations,(t,r)=>Bb(t,r))}}class a0{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ht(e.mutations.length===r.length);let s=Hb;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new a0(e,t,r,s)}}class u0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ju{constructor(e,t,r,s,u=vt.min(),d=vt.min(),g=lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class CT{constructor(e){this.ie=e}}function TT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:l0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:nh(s=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:op(s,u.version.toTimestamp()),createTime:op(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:oh(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:oh(e.version)}}var s,u;return r}function l0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function oh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vc(n){const e=new qn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function ah(n,e){const t=(e.baseMutations||[]).map(u=>wm(n.ie,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>wm(n.ie,u)),s=qn.fromMillis(e.localWriteTimeMs);return new sI(e.batchId,s,t,r)}function Cm(n){const e=vc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var s;return void 0!==n.query.documents?(ht(1===(s=n.query).documents.length),r=gi(Xd(Xv(s.documents[0])))):r=gi(gT(n.query)),new Ju(r,n.targetId,0,n.lastListenSequenceNumber,e,t,lr.fromBase64String(n.resumeToken))}function AT(n,e){const t=oh(e.snapshotVersion),r=oh(e.lastLimboFreeSnapshotVersion);let s;s=Jf(e.target)?Qb(n.ie,e.target):n0(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function oI(n){const e=gT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dm(e,e.limit,"L"):e}function aI(n,e){return new u0(e.largestBatchId,wm(n.ie,e.overlayMutation))}function ST(n,e){const t=e.path.lastSegment();return[n,_i(e.path.popLast()),t]}function i(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:oh(r.readTime),documentKey:_i(r.documentKey.path),largestBatchId:r.largestBatchId}}class o{getBundleMetadata(e,t){return a(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:vc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return a(e).put({bundleId:(r=t).id,createTime:oh(dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return l(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:oI(s.bundledQuery),readTime:vc(s.readTime)};var s})}saveNamedQuery(e,t){return l(e).put({name:(r=t).name,readTime:oh(dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function a(n){return ni(n,"bundles")}function l(n){return ni(n,"namedQueries")}class h{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new h(e,t.uid||"")}getOverlay(e,t){return f(e).get(ST(this.userId,t)).next(r=>r?aI(this.yt,r):null)}getOverlays(e,t){const r=ho();return le.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const g=new u0(t,d);s.push(this.oe(e,g))}),le.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(_i(d.getCollectionPath())));const u=[];return s.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(f(e).Y("collectionPathOverlayIndex",g))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const s=ho(),u=_i(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return f(e).W("collectionPathOverlayIndex",d).next(g=>{for(const _ of g){const I=aI(this.yt,_);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=ho();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return f(e).Z({index:"collectionGroupOverlayIndex",range:g},(_,I,A)=>{const M=aI(this.yt,I);u.size()<s||M.largestBatchId===d?(u.set(M.getKey(),M),d=M.largestBatchId):A.done()}).next(()=>u)}oe(e,t){return f(e).put(function(r,s,u){const[d,g,_]=ST(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:vm(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function f(n){return ni(n,"documentOverlays")}class y{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(cr(e.integerValue));else if("doubleValue"in e){const r=cr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),zf(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Hu(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?xv(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):rt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const s of Object.keys(r))this.de(s,t),this.ce(r[s],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const s of r)this.ce(s,t)}me(e,t){this.he(t,37),We.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function w(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function b(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=w(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}y.Ie=new y;class T{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const s=t.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const s=t.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}this.Pe()}Se(e){const t=this.De(e),r=b(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}xe(e){const t=this.De(e),r=b(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class N{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class F{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class z{constructor(){this.$e=new T,this.Be=new N(this.$e),this.Le=new F(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class X{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new X(this.indexId,this.documentKey,this.arrayValue,r)}}function ve(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=je(n.arrayValue,e.arrayValue),0!==t?t:(t=je(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function je(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ze{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ht(e.collectionGroup===this.collectionId);const t=bv(e);if(void 0!==t&&!this.We(t))return!1;const r=lc(e);let s=0,u=0;for(;s<r.length&&this.We(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Qe){const d=r[s];if(!this.ze(this.Qe,d)||!this.He(this.Ke[u++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(u>=this.Ke.length||!this.He(this.Ke[u++],d))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function at(n){var e,t;if(ht(n instanceof Yt||n instanceof bn),n instanceof Yt){if(n instanceof lm){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Yt.create(n.field,"==",u)))||[];return bn.create(s,"or")}return n}const r=n.filters.map(s=>at(s));return bn.create(r,n.op)}function bt(n){if(0===n.getFilters().length)return[];const e=Nn(at(n));return ht(fn(e)),Me(e)||Tt(e)?[e]:e.getFilters()}function Me(n){return n instanceof Yt}function Tt(n){return n instanceof bn&&qC(n)}function fn(n){return Me(n)||Tt(n)||function(e){if(e instanceof bn&&xb(e)){for(const t of e.getFilters())if(!Me(t)&&!Tt(t))return!1;return!0}return!1}(n)}function Nn(n){if(ht(n instanceof Yt||n instanceof bn),n instanceof Yt)return n;if(1===n.filters.length)return Nn(n.filters[0]);const e=n.filters.map(r=>Nn(r));let t=bn.create(e,n.op);return t=uh(t),fn(t)?t:(ht(t instanceof bn),ht(Yd(t)),ht(t.filters.length>1),t.filters.reduce((r,s)=>Wa(r,s)))}function Wa(n,e){let t;return ht(n instanceof Yt||n instanceof bn),ht(e instanceof Yt||e instanceof bn),t=n instanceof Yt?e instanceof Yt?bn.create([n,e],"and"):Tm(n,e):e instanceof Yt?Tm(e,n):function(r,s){if(ht(r.filters.length>0&&s.filters.length>0),Yd(r)&&Yd(s))return Mb(r,s.getFilters());const u=xb(r)?r:s,d=xb(r)?s:r,g=u.filters.map(_=>Wa(_,d));return bn.create(g,"or")}(n,e),uh(t)}function Tm(n,e){if(Yd(e))return Mb(e,n.getFilters());{const t=e.filters.map(r=>Wa(n,r));return bn.create(t,"or")}}function uh(n){if(ht(n instanceof Yt||n instanceof bn),n instanceof Yt)return n;const e=n.getFilters();if(1===e.length)return uh(e[0]);if(kv(n))return n;const t=e.map(s=>uh(s)),r=[];return t.forEach(s=>{s instanceof Yt?r.push(s):s instanceof bn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:bn.create(r,n.op)}class c0{constructor(){this.Je=new lp}addToCollectionParentIndex(e,t){return this.Je.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ds.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class lp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new In(an.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new In(an.comparator)).toArray()}}const lh=new Uint8Array(0);class d0{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new lp,this.Xe=new Ku(r=>gc(r),(r,s)=>Qf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:_i(s)};return Am(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[wb(t),""],!1,!0);return Am(e).W(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ea(d.parent))}return r})}addFieldIndex(e,t){const r=ch(e),s={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete s.indexId;const u=r.add(s);if(t.indexState){const d=h0(e);return u.next(g=>{d.put(i(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ch(e),s=h0(e),u=wc(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=wc(e);let s=!0;const u=new Map;return le.forEach(this.Ze(t),d=>this.tn(e,d).next(g=>{s&&(s=!!g),u.set(d,g)})).next(()=>{if(s){let d=zt();const g=[];return le.forEach(u,(_,I)=>{var A;Be("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(mt=>`${mt.fieldPath}:${mt.kind}`).join(",")}`} to execute ${gc(t)}`);const M=function(mt,ft){const Mt=bv(ft);if(void 0===Mt)return null;for(const $t of Xf(mt,Mt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(I,_),j=function(mt,ft){const Mt=new Map;for(const $t of lc(ft))for(const wr of Xf(mt,$t.fieldPath))switch(wr.op){case"==":case"in":Mt.set($t.fieldPath.canonicalString(),wr.value);break;case"not-in":case"!=":return Mt.set($t.fieldPath.canonicalString(),wr.value),Array.from(Mt.values())}return null}(I,_),Q=function(mt,ft){const Mt=[];let $t=!0;for(const wr of lc(ft)){const Ka=0===wr.kind?Pb(mt,wr.fieldPath,mt.startAt):Lv(mt,wr.fieldPath,mt.startAt);Mt.push(Ka.value),$t&&($t=Ka.inclusive)}return new zu(Mt,$t)}(I,_),oe=function(mt,ft){const Mt=[];let $t=!0;for(const wr of lc(ft)){const Ka=0===wr.kind?Lv(mt,wr.fieldPath,mt.endAt):Pb(mt,wr.fieldPath,mt.endAt);Mt.push(Ka.value),$t&&($t=Ka.inclusive)}return new zu(Mt,$t)}(I,_),Oe=this.en(_,I,Q),Pe=this.en(_,I,oe),At=this.nn(_,I,j),xt=this.sn(_.indexId,M,Oe,Q.inclusive,Pe,oe.inclusive,At);return le.forEach(xt,mt=>r.J(mt,t.limit).next(ft=>{ft.forEach(Mt=>{const $t=We.fromSegments(Mt.documentKey);d.has($t)||(d=d.add($t),g.push($t))})}))}).next(()=>g)}return le.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:bt(bn.create(e.filters,"and")).map(r=>Fv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,s,u,d,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),A=[];for(let M=0;M<_;++M){const j=t?this.rn(t[M/I]):lh,Q=this.on(e,j,r[M%I],s),oe=this.un(e,j,u[M%I],d),Oe=g.map(Pe=>this.on(e,j,Pe,!0));A.push(...this.createRange(Q,oe,Oe))}return A}on(e,t,r,s){const u=new X(e,We.empty(),t,r);return s?u:u.Ue()}un(e,t,r,s){const u=new X(e,We.empty(),t,r);return s?u.Ue():u}tn(e,t){const r=new ze(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let d=null;for(const g of u)r.je(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;const s=this.Ze(t);return le.forEach(s,u=>this.tn(e,u).next(d=>{d?0!==r&&d.fields.length<function(g){let _=new In(ur.comparator),I=!1;for(const A of g.filters)for(const M of A.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?I=!0:_=_.add(M.field));for(const A of g.orderBy)A.field.isKeyField()||(_=_.add(A.field));return _.size+(I?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}cn(e,t){const r=new z;for(const s of lc(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.qe(s.kind);y.Ie.ue(u,d)}return r.Fe()}rn(e){const t=new z;return y.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new z;return y.Ie.ue(fc(this.databaseId,t),r.qe(function(s){const u=lc(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let s=[];s.push(new z);let u=0;for(const d of lc(e)){const g=r[u++];for(const _ of s)if(this.hn(t,d.fieldPath)&&Wf(g))s=this.ln(s,d,g);else{const I=_.qe(d.kind);y.Ie.ue(g,I)}}return this.fn(s)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of s){const _=new z;_.seed(g.Fe()),y.Ie.ue(d,_.qe(t.kind)),u.push(_)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ch(e),s=h0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return le.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{d.push(function(I,A){const M=A?new Gf(A.sequenceNumber,new ds(vc(A.readTime),new We(ea(A.documentKey)),A.largestBatchId)):Gf.empty(),j=I.fields.map(([Q,oe])=>new Hf(ur.fromServerFormat(Q),oe));return new Ev(I.indexId,I.collectionGroup,j,M)}(g,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=ch(e),u=h0(e);return this.dn(e).next(d=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>le.forEach(g,_=>u.put(i(_.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?le.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),le.forEach(g,_=>this._n(e,s,_).next(I=>{const A=this.wn(u,_);return I.isEqual(A)?le.resolve():this.mn(e,u,_,I,A)}))))})}gn(e,t,r,s){return wc(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,s){return wc(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const s=wc(e);let u=new In(ve);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(d,g)=>{u=u.add(new X(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}wn(e,t){let r=new In(ve);const s=this.cn(t,e);if(null==s)return r;const u=bv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Wf(d))for(const g of d.arrayValue.values||[])r=r.add(new X(t.indexId,e.key,this.rn(g),s))}else r=r.add(new X(t.indexId,e.key,lh,s));return r}mn(e,t,r,s,u){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,_,I,A,M){const j=g.getIterator(),Q=_.getIterator();let oe=Jd(j),Oe=Jd(Q);for(;oe||Oe;){let Pe=!1,At=!1;if(oe&&Oe){const xt=I(oe,Oe);xt<0?At=!0:xt>0&&(Pe=!0)}else null!=oe?At=!0:Pe=!0;Pe?(A(Oe),Oe=Jd(Q)):At?(M(oe),oe=Jd(j)):(oe=Jd(j),Oe=Jd(Q))}}(s,u,ve,g=>{d.push(this.gn(e,t,r,g))},g=>{d.push(this.yn(e,t,r,g))}),le.waitFor(d)}dn(e){let t=1;return h0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>ve(d,g)).filter((d,g,_)=>!g||0!==ve(d,_[g-1]));const s=[];s.push(e);for(const d of r){const g=ve(d,e),_=ve(d,t);if(0===g)s[0]=e.Ue();else if(g>0&&_<0)s.push(d),s.push(d.Ue());else if(_>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2){if(this.pn(s[d],s[d+1]))return[];u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,lh,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,lh,[]]))}return u}pn(e,t){return ve(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rM)}getMinOffset(e,t){return le.mapArray(this.Ze(t),r=>this.tn(e,r).next(s=>s||rt())).next(rM)}}function Am(n){return ni(n,"collectionParents")}function wc(n){return ni(n,"indexEntries")}function ch(n){return ni(n,"indexConfiguration")}function h0(n){return ni(n,"indexState")}function rM(n){ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Iv(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ds(e.readTime,e.documentKey,t)}const iM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Os(e,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sM(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const _=r.Z({range:d},(A,M,j)=>(g++,j.delete()));u.push(_.next(()=>{ht(1===g)}));const I=[];for(const A of t.mutations){const M=up(e,A.key.path,t.batchId);u.push(s.delete(M)),I.push(A.key)}return le.waitFor(u).next(()=>I)}function uI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(41943040,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);class lI{constructor(e,t,r,s){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static re(e,t,r,s){ht(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new lI(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).Z({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Sm(e),d=dh(e);return d.add({}).next(g=>{ht("number"==typeof g);const _=new sI(g,t,r,s),I=function(j,Q,oe){const Oe=oe.baseMutations.map(At=>vm(j.ie,At)),Pe=oe.mutations.map(At=>vm(j.ie,At));return{userId:Q,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Oe,mutations:Pe}}(this.yt,this.userId,_),A=[];let M=new In((j,Q)=>Vt(j.canonicalString(),Q.canonicalString()));for(const j of s){const Q=up(this.userId,j.key.path,g);M=M.add(j.key.path.popLast()),A.push(d.put(I)),A.push(u.put(Q,Qx))}return M.forEach(j=>{A.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.In[g]=_.keys()}),le.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return dh(e).get(t).next(r=>r?(ht(r.userId===this.userId),ah(this.yt,r)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return dh(e).Z({index:"userMutationsIndex",range:s},(d,g,_)=>{g.userId===this.userId&&(ht(g.batchId>=r),u=ah(this.yt,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).W("userMutationsIndex",t).next(r=>r.map(s=>ah(this.yt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Sm(e).Z({range:s},(d,g,_)=>{const[I,A,M]=d,j=ea(A);if(I===this.userId&&t.path.isEqual(j))return dh(e).get(M).next(Q=>{if(!Q)throw rt();ht(Q.userId===this.userId),u.push(ah(this.yt,Q))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Vt);const s=[];return t.forEach(u=>{const d=sh(this.userId,u.path),g=IDBKeyRange.lowerBound(d),_=Sm(e).Z({range:g},(I,A,M)=>{const[j,Q,oe]=I,Oe=ea(Q);j===this.userId&&u.path.isEqual(Oe)?r=r.add(oe):M.done()});s.push(_)}),le.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=sh(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new In(Vt);return Sm(e).Z({range:d},(_,I,A)=>{const[M,j,Q]=_,oe=ea(j);M===this.userId&&r.isPrefixOf(oe)?oe.length===s&&(g=g.add(Q)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(dh(e).get(u).next(d=>{if(null===d)throw rt();ht(d.userId===this.userId),r.push(ah(this.yt,d))}))}),le.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return sM(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Sm(e).Z({range:r},(u,d,g)=>{if(u[0]===this.userId){const _=ea(u[1]);s.push(_)}else g.done()}).next(()=>{ht(0===s.length)})})}containsKey(e,t){return oM(e,this.userId,t)}Rn(e){return aM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oM(n,e,t){const r=sh(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Sm(n).Z({range:u,X:!0},(g,_,I)=>{const[A,M,j]=g;A===e&&M===s&&(d=!0),I.done()}).next(()=>d)}function dh(n){return ni(n,"mutations")}function Sm(n){return ni(n,"documentMutations")}function aM(n){return ni(n,"mutationQueues")}class cp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new cp(0)}static vn(){return new cp(-1)}}class EN{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new cp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>vt.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return xm(e).Z((d,g)=>{const _=Cm(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(u)).next(()=>s)}forEachTarget(e,t){return xm(e).Z((r,s)=>{const u=Cm(s);t(u)})}Vn(e){return uM(e).get("targetGlobalKey").next(t=>(ht(null!==t),t))}Sn(e,t){return uM(e).put("targetGlobalKey",t)}Dn(e,t){return xm(e).put(AT(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=gc(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return xm(e).Z({range:s,index:"queryTargetsIndex"},(d,g,_)=>{const I=Cm(g);Qf(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=hh(e);return t.forEach(d=>{const g=_i(d.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,d))}),le.waitFor(s)}removeMatchingKeys(e,t,r){const s=hh(e);return le.forEach(t,u=>{const d=_i(u.path);return le.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=hh(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=hh(e);let u=zt();return s.Z({range:r,X:!0},(d,g,_)=>{const I=ea(d[1]),A=new We(I);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=_i(t.path),s=IDBKeyRange.bound([r],[wb(r)],!1,!0);let u=0;return hh(e).Z({index:"documentTargetsIndex",X:!0,range:s},([d,g],_,I)=>{0!==d&&(u++,I.done())}).next(()=>u>0)}ne(e,t){return xm(e).get(t).next(r=>r?Cm(r):null)}}function xm(n){return ni(n,"targets")}function uM(n){return ni(n,"targetGlobal")}function hh(n){return ni(n,"targetDocuments")}function lM([n,e],[t,r]){const s=Vt(n,t);return 0===s?Vt(e,r):s}class bN{constructor(e){this.xn=e,this.buffer=new In(lM),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){$u(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Rs(r)}yield t.Fn(3e5)}))}}class DN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ei.at);const r=new bN(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(iM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iM):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,s,u,d,g,_,I;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,d=Date.now(),this.nthSequenceNumber(e,s))).next(M=>(r=M,g=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),jf()<=ls.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${s} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${M} documents in `+(I-_)+`ms\nTotal Duration: ${I-A}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:M})))}}class CN{constructor(e,t){this.db=e,this.garbageCollector=new DN(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return cI(e,r)}removeReference(e,t,r){return cI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cI(e,t)}Gn(e,t){return function(r,s){let u=!1;return aM(r).tt(d=>oM(r,d,s).next(g=>(g&&(u=!0),le.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(d,g)=>{if(g<=t){const _=this.Gn(e,d).next(I=>{if(!I)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,vt.min()),hh(e).delete([0,_i(d.path)])))});s.push(_)}}).next(()=>le.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cI(e,t)}Kn(e,t){const r=hh(e);let s,u=ei.at;return r.Z({index:"documentTargetsIndex"},([d,g],{path:_,sequenceNumber:I})=>{0===d?(u!==ei.at&&t(new We(ea(s)),u),u=I,s=_):u=ei.at}).next(()=>{u!==ei.at&&t(new We(ea(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cI(n,e){return hh(n).put((r=n.currentSequenceNumber,{targetId:0,path:_i(e.path),sequenceNumber:r}));var r}class cM{constructor(){this.changes=new Ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TN{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return dp(e).put(r)}removeEntry(e,t,r){return dp(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],l0(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Un.newInvalidDocument(t);return dp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(f0(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Un.newInvalidDocument(t)};return dp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(f0(t))},(s,u)=>{r={document:this.jn(t,u),size:uI(u)}}).next(()=>r)}getEntries(e,t){let r=yi();return this.zn(e,t,(s,u)=>{const d=this.jn(s,u);r=r.insert(s,d)}).next(()=>r)}Hn(e,t){let r=yi(),s=new _r(We.comparator);return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);r=r.insert(u,g),s=s.insert(u,uI(d))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return le.resolve();let s=new In(pM);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(f0(s.first()),f0(s.last())),d=s.getIterator();let g=d.getNext();return dp(e).Z({index:"documentKeyIndex",range:u},(_,I,A)=>{const M=We.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&pM(g,M)<0;)r(g,null),g=d.getNext();g&&g.isEqual(M)&&(r(g,I),g=d.hasNext()?d.getNext():null),g?A.j(f0(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),l0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dp(e).W(IDBKeyRange.bound(s,u,!0)).next(d=>{let g=yi();for(const _ of d){const I=this.jn(We.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(I.key,I)}return g})}getAllFromCollectionGroup(e,t,r,s){let u=yi();const d=fM(t,r),g=fM(t,ds.max());return dp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(_,I,A)=>{const M=this.jn(We.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new AN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return hM(e).get("remoteDocumentGlobalKey").next(t=>(ht(!!t),t))}Qn(e,t){return hM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function nM(n,e){let t;if(e.document)t=Yb(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),s=vc(e.noDocument.readTime);t=Un.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=We.fromSegments(e.unknownDocument.path),s=vc(e.unknownDocument.version);t=Un.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new qn(r[0],r[1]);return vt.fromTimestamp(s)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Un.newInvalidDocument(e)}}function dM(n){return new TN(n)}class AN extends cM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ku(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new In((u,d)=>Vt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const _=TT(this.Yn.yt,d);s=s.add(u.path.popLast()),r+=uI(_)-g.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=TT(this.Yn.yt,d.convertToNoDocument(vt.min()));t.push(this.Yn.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function hM(n){return ni(n,"remoteDocumentGlobal")}function dp(n){return ni(n,"remoteDocumentsV14")}function f0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fM(n,e){const t=e.documentKey.path.toArray();return[n,l0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pM(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Vt(t[u],r[u]),s)return s;return s=Vt(t.length,r.length),s||(s=Vt(t[t.length-2],r[r.length-2]),s||Vt(t[t.length-1],r[r.length-1]))}class SN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&np(r.mutation,s,qi.empty(),qn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zt()){const s=ho();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=th();return u.forEach((g,_)=>{d=d.insert(g,_.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,s){let u=yi();const d=ip(),g=ip();return t.forEach((_,I)=>{const A=r.get(I.key);s.has(I.key)&&(void 0===A||A.mutation instanceof qa)?u=u.insert(I.key,I):void 0!==A&&(d.set(I.key,A.mutation.getFieldMask()),np(A.mutation,I,A.mutation.getFieldMask(),qn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,A)=>d.set(I,A)),t.forEach((I,A)=>{var M;return g.set(I,new SN(A,null!==(M=d.get(I))&&void 0!==M?M:null))}),g))}recalculateAndSaveOverlays(e,t){const r=ip();let s=new _r((d,g)=>d-g),u=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let A=r.get(_)||qi.empty();A=g.applyToLocalView(I,A),r.set(_,A);const M=(s.get(g.batchId)||zt()).add(_);s=s.insert(g.batchId,M)})}).next(()=>{const d=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),I=_.key,A=_.value,M=Yv();A.forEach(j=>{if(!u.has(j)){const Q=sT(t.get(j),r.get(j));null!==Q&&M.set(j,Q),u=u.add(j)}}),d.push(this.documentOverlayCache.saveOverlays(e,I,M))}return le.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):le.resolve(ho());let g=-1,_=u;return d.next(I=>le.forEach(I,(A,M)=>(g<M.largestBatchId&&(g=M.largestBatchId),u.get(A)?le.resolve():this.remoteDocumentCache.getEntry(e,A).next(j=>{_=_.insert(A,j)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,zt())).next(A=>({batchId:g,changes:jb(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let s=th();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=th();return this.indexManager.getCollectionParents(e,s).next(d=>le.forEach(d,g=>{const _=(I=t,A=g.child(s),new Xo(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,A;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,_)=>{const I=_.getKey();null===s.get(I)&&(s=s.insert(I,Un.newInvalidDocument(I)))});let d=th();return s.forEach((g,_)=>{const I=u.get(g);void 0!==I&&np(I.mutation,_,qi.empty(),qn.now()),Ub(t,_)&&(d=d.insert(g,_))}),d})}}class xN{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:dr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:oI(r.bundledQuery),readTime:dr(r.readTime)}),le.resolve();var r}}class MN{constructor(){this.overlays=new _r(We.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ho();return le.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.oe(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const s=ho(),u=t.length+1,d=new We(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return le.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new _r((I,A)=>I-A);const d=this.overlays.getIterator();for(;d.hasNext();){const I=d.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let A=u.get(I.largestBatchId);null===A&&(A=ho(),u=u.insert(I.largestBatchId,A)),A.set(I.getKey(),I)}}const g=ho(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,A)=>g.set(I,A)),!(g.size()>=s)););return le.resolve(g)}oe(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new u0(t,r));let u=this.es.get(t);void 0===u&&(u=zt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class xT{constructor(){this.ns=new In(vi.ss),this.rs=new In(vi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new vi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new vi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new We(new an([])),r=new vi(t,e),s=new vi(t,e+1),u=[];return this.rs.forEachInRange([r,s],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new We(new an([])),r=new vi(t,e),s=new vi(t,e+1);let u=zt();return this.rs.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new vi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return We.comparator(e.key,t.key)||Vt(e._s,t._s)}static os(e,t){return Vt(e._s,t._s)||We.comparator(e.key,t.key)}}class RN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new In(vi.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const d=new sI(u,t,r,s);this.mutationQueue.push(d);for(const g of s)this.gs=this.gs.add(new vi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),s=new vi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],d=>{const g=this.ys(d._s);u.push(g)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Vt);return t.forEach(s=>{const u=new vi(s,0),d=new vi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],g=>{r=r.add(g._s)})}),le.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;We.isDocumentKey(u)||(u=u.child(""));const d=new vi(new We(u),0);let g=new In(Vt);return this.gs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(g=g.add(_._s)),!0)},d),le.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){ht(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return le.forEach(t.mutations,s=>{const u=new vi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new vi(t,0),s=this.gs.firstAfterOrEqual(r);return le.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NN{constructor(e){this.Es=e,this.docs=new _r(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=yi();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Un.newInvalidDocument(s))}),le.resolve(r)}getAllFromCollection(e,t,r){let s=yi();const u=new We(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:_}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Iv(bb(_),r)<=0||(s=s.insert(_.key,_.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,s){rt()}As(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kN(this)}getSize(e){return le.resolve(this.size)}}class kN extends cM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class ON{constructor(e){this.persistence=e,this.Rs=new Ku(t=>gc(t),Qf),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xT,this.targetCount=0,this.vs=cp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new cp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),le.waitFor(u).next(()=>s)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class mM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ei(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new ON(this),this.indexManager=new c0,this.remoteDocumentCache=new NN(r=>this.referenceDelegate.xs(r)),this.yt=new CT(t),this.Ns=new xN(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new RN(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const s=new PN(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return le.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class PN extends Db{constructor(e){super(),this.currentSequenceNumber=e}}class dI{constructor(e){this.persistence=e,this.Fs=new xT,this.$s=null}static Bs(e){return new dI(e)}get Ls(){if(this.$s)return this.$s;throw rt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,r=>{const s=We.fromPath(r);return this.qs(e,s).next(u=>{u||t.removeEntry(s,vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class FN{constructor(e){this.yt=e}$(e,t,r,s){const u=new qf("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bm,{unique:!0}),g.createObjectStore("documentMutations"),yM(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=le.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),yM(e)),d=d.next(()=>function(g){const _=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(g,_){return _.store("mutations").W().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bm,{unique:!0});const A=_.store("mutations"),M=I.map(j=>A.put(j));return le.waitFor(M)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.Us(u))),r<6&&s>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(d=d.next(()=>this.Gs(u))),r<8&&s>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.js(u))),r<11&&s>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:bT});_.createIndex("collectionPathOverlayIndex",IT,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",iI,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:Jx});_.createIndex("documentKeyIndex",Xx),_.createIndex("collectionGroupIndex",eM)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&s>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:ET}).createIndex("sequenceNumberIndex",tI,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:nI}).createIndex("documentKeyIndex",rI,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=uI(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>le.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>le.forEach(g,_=>{ht(_.userId===u.userId);const I=ah(this.yt,_);return sM(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((d,g)=>{const _=new an(d),I=[0,_i(_)];u.push(t.get(I).next(A=>A?le.resolve():t.put({targetId:0,path:_i(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:wT});const r=t.store("collectionParents"),s=new lp,u=d=>{if(s.add(d)){const g=d.lastSegment(),_=d.popLast();return r.put({collectionId:g,parent:_i(_)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const _=new an(d);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,_],I)=>{const A=ea(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=Cm(s),d=AT(this.yt,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,d)=>{const g=t.store("remoteDocumentsV14"),_=(I=d,I.document?new We(an.fromString(I.document.name).popFirst(5)):I.noDocument?We.fromSegments(I.noDocument.path):I.unknownDocument?We.fromSegments(I.unknownDocument.path):rt()).path.toArray();var I;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(g.put(A))}).next(()=>le.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=dM(this.yt),u=new mM(dI.Bs,this.yt.ie);return r.W().next(d=>{const g=new Map;return d.forEach(_=>{var I;let A=null!==(I=g.get(_.userId))&&void 0!==I?I:zt();ah(this.yt,_).keys().forEach(M=>A=A.add(M)),g.set(_.userId,A)}),le.forEach(g,(_,I)=>{const A=new Gr(I),M=h.re(this.yt,A),j=u.getIndexManager(A),Q=lI.re(A,this.yt,j,u.referenceDelegate);return new gM(s,Q,M,j).recalculateAndSaveOverlaysForDocumentKeys(new o0(t,ei.at),_).next()})})}}function yM(n){n.createObjectStore("targetDocuments",{keyPath:_T}).createIndex("documentTargetsIndex",vT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eI,{unique:!0}),n.createObjectStore("targetGlobal")}const MT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RT{constructor(e,t,r,s,u,d,g,_,I,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=g,this.Js=I,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=j=>Promise.resolve(),!RT.C())throw new ke(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CN(this,s),this.ii=t+"main",this.yt=new CT(_),this.ri=new Ns(this.ii,this.Xs,new FN(this.yt)),this.Cs=new EN(this.referenceDelegate,this.yt),this.remoteDocumentCache=dM(this.yt),this.Ns=new o,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,MT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ei(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if($u(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return p0(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return hI(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ni(r,"clientMetadata");return s.W().next(u=>{const d=e.Ii(u,18e5),g=u.filter(_=>-1===d.indexOf(_));return le.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):p0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,MT);return!1}}return!(!this.networkEnabled||!this.inForeground)||hI(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,g=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new o0(t,ei.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>hI(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return lI.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d0(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return h.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?DT:14===d?Dm:13===d?s0:12===d?tM:11===d?Im:void rt();var d;let g;return this.ri.runTransaction(e,s,u,_=>(g=new o0(_,this.Ss?this.Ss.next():ei.at),"readwrite-primary"===t?this.fi(g).next(I=>!!I||this.di(g)).next(I=>{if(!I)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ke(he.FAILED_PRECONDITION,Ib);return r(g)}).next(I=>this.wi(g).next(()=>I)):this.Vi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Vi(e){return p0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(he.FAILED_PRECONDITION,MT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return p0(e).put("owner",t)}static C(){return Ns.C()}_i(e){const t=p0(e);return t.get("owner").next(r=>this.mi(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ot.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function p0(n){return ni(n,"owner")}function hI(n){return ni(n,"clientMetadata")}function NT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=zt(),s=zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new kT(e,t.fromCache,r,s)}}class _M{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(Uv(t))return le.resolve(null);let r=gi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=dm(t,null,"F"),r=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=zt(...u);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.Fi(t,g);return this.$i(t,I,d,_.readTime)?this.ki(e,dm(t,null,"F")):this.Bi(e,I,t,_)}))})))}Oi(e,t,r,s){return Uv(t)||s.isEqual(vt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,s)?this.Mi(e,t):(jf()<=ls.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Lb(t)),this.Bi(e,d,t,Eb(s,-1)))})}Fi(e,t){let r=new In(QC(e));return t.forEach((s,u)=>{Ub(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return jf()<=ls.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Lb(t)),this.Ni.getDocumentsMatchingQuery(e,t,ds.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class LN{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new _r(Vt),this.Ui=new Ku(u=>gc(u),Qf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function vM(n,e,t,r){return new LN(n,e,t,r)}function wM(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,_e.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let _=zt();for(const I of s){d.push(I.batchId);for(const A of I.mutations)_=_.add(A.key)}for(const I of u){g.push(I.batchId);for(const A of I.mutations)_=_.add(A.key)}return t.localDocuments.getDocuments(r,_).next(I=>({ji:I,removedBatchIds:d,addedBatchIds:g}))})})}),OT.apply(this,arguments)}function UN(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,_,I){const A=_.batch,M=A.keys();let j=le.resolve();return M.forEach(Q=>{j=j.next(()=>I.getEntry(g,Q)).next(oe=>{const Oe=_.docVersions.get(Q);ht(null!==Oe),oe.version.compareTo(Oe)<0&&(A.applyToRemoteDocument(oe,_),oe.isValidDocument()&&(oe.setReadTime(_.commitVersion),I.addEntry(oe)))})}),j.next(()=>d.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=zt();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(g=g.add(d.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function EM(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function VN(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const g=[];e.targetChanges.forEach((A,M)=>{const j=s.get(M);if(!j)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let Q=j.withSequenceNumber(u.currentSequenceNumber);var oe,Oe,Pe;e.targetMismatches.has(M)?Q=Q.withResumeToken(lr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):A.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(A.resumeToken,r)),s=s.insert(M,Q),Oe=Q,Pe=A,(0===(oe=j).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,Q))});let _=yi(),I=zt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(bM(u,d,e.documentUpdates).next(A=>{_=A.Wi,I=A.zi})),!r.isEqual(vt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return le.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.qi=s,u))}function bM(n,e,t){let r=zt(),s=zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=yi();return t.forEach((g,_)=>{const I=u.get(g);_.isFoundDocument()!==I.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(vt.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):Be("LocalStore","Ignoring outdated watch update for ",g,". Current version:",I.version," Watch version:",_.version)}),{Wi:d,zi:s}})}function BN(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mm(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,le.resolve(s)):t.Cs.allocateTargetId(r).next(d=>(s=new Ju(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.qi.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Rm(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,_e.Z)(function*(n,e,t){const r=qe(n),s=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!$u(d))throw d;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}),PT.apply(this,arguments)}function fI(n,e,t){const r=qe(n);let s=vt.min(),u=zt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,_,I){const A=qe(g),M=A.Ui.get(I);return void 0!==M?le.resolve(A.qi.get(M)):A.Cs.getTargetData(_,I)}(r,d,gi(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,g.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?s:vt.min(),t?u:zt())).next(g=>(CM(r,YC(e),g),{documents:g,Hi:u})))}function IM(n,e){const t=qe(n),r=qe(t.Cs),s=t.qi.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(d=>d?d.target:null))}function DM(n,e){const t=qe(n),r=t.Ki.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Eb(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(CM(t,e,s),s))}function CM(n,e,t){let r=n.Ki.get(e)||vt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function FT(){return FT=(0,_e.Z)(function*(n,e,t,r){const s=qe(n);let u=zt(),d=yi();for(const I of t){const A=e.Ji(I.metadata.name);I.document&&(u=u.add(A));const M=e.Yi(I);M.setReadTime(e.Xi(I.metadata.readTime)),d=d.insert(A,M)}const g=s.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Mm(s,(I=r,gi(Xd(an.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>bM(I,g,d).next(A=>(g.apply(I),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>s.Cs.addMatchingKeys(I,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(I,A.Wi,A.zi)).next(()=>A.Wi)))}),FT.apply(this,arguments)}function jN(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,_e.Z)(function*(n,e,t=zt()){const r=yield Mm(n,gi(oI(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=dr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(lr.EMPTY_BYTE_STRING,d);return s.qi=s.qi.insert(g.targetId,g),s.Cs.updateTargetData(u,g).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),LT.apply(this,arguments)}function TM(n,e){return`firestore_clients_${n}_${e}`}function AM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function UT(n,e){return`firestore_targets_${n}_${e}`}class pI{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new ke(s.error.code,s.error.message))),d?new pI(e,t,s.state,u):(Xn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class g0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new ke(r.error.code,r.error.message))),u?new g0(e,r.state,s):(Xn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=sp();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=Tb(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new gI(e,u):(Xn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class VT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new VT(t.clientId,t.onlineState):(Xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class BT{constructor(){this.activeTargetIds=sp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $T{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new _r(Vt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=TM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new BT),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(TM(e.persistenceKey,s));if(u){const d=gI.Zi(s,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(UT(this.persistenceKey,e));if(r){const s=g0.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let d=ei.at;if(null!=u)try{const g=JSON.parse(u);ht("number"==typeof g),d=g}catch(g){Xn("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);s!==ei.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new pI(this.currentUser,e,t,r),u=AM(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=AM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=UT(this.persistenceKey,e),u=new g0(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return gI.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return pI.Zi(new Gr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return g0.Zi(s,t)}yr(e){return VT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),d=[],g=[];return u.forEach(_=>{s.has(_)||d.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Br(d,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=sp();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class SM{constructor(){this.Lr=new BT,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new BT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HN{Ur(e){}shutdown(){}}class xM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const GN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class zN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const d=this.ho(e,t);Be("RestConnection","Sending: ",d,r);const g={};return this.lo(g,s,u),this.fo(e,d,g,r).then(_=>(Be("RestConnection","Received: ",_),_),_=>{throw uc("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}_o(e,t,r,s,u,d){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${GN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,d)=>{const g=new kC;g.setWithCredentials(!0),g.listenOnce(RC.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case hv.NO_ERROR:const I=g.getResponseJson();Be("Connection","XHR received:",JSON.stringify(I)),u(I);break;case hv.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),d(new ke(he.DEADLINE_EXCEEDED,"Request time out"));break;case hv.HTTP_ERROR:const A=g.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const j=M?.error;if(j&&j.status&&j.message){const Q=function(oe){const Oe=oe.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(Oe)>=0?Oe:he.UNKNOWN}(j.status);d(new ke(Q,j.message))}else d(new ke(he.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new ke(he.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(s);g.send(t,"POST",_,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xC(),d=MC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new gb({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=s.join("");Be("Connection","Creating WebChannel: "+_,g);const I=u.createWebChannel(_,g);let A=!1,M=!1;const j=new qN({Hr:oe=>{M?Be("Connection","Not sending because WebChannel is closed:",oe):(A||(Be("Connection","Opening WebChannel transport."),I.open(),A=!0),Be("Connection","WebChannel sending:",oe),I.send(oe))},Jr:()=>I.close()}),Q=(oe,Oe,Pe)=>{oe.listen(Oe,At=>{try{Pe(At)}catch(xt){setTimeout(()=>{throw xt},0)}})};return Q(I,Qg.EventType.OPEN,()=>{M||Be("Connection","WebChannel transport opened.")}),Q(I,Qg.EventType.CLOSE,()=>{M||(M=!0,Be("Connection","WebChannel transport closed"),j.io())}),Q(I,Qg.EventType.ERROR,oe=>{M||(M=!0,uc("Connection","WebChannel transport errored:",oe),j.io(new ke(he.UNAVAILABLE,"The operation could not be completed")))}),Q(I,Qg.EventType.MESSAGE,oe=>{var Oe;if(!M){const Pe=oe.data[0];ht(!!Pe);const At=Pe,xt=At.error||(null===(Oe=At[0])||void 0===Oe?void 0:Oe.error);if(xt){Be("Connection","WebChannel received error:",xt);const mt=xt.status;let ft=function($t){const wr=Ir[$t];if(void 0!==wr)return gm(wr)}(mt),Mt=xt.message;void 0===ft&&(ft=he.INTERNAL,Mt="Unknown error status: "+mt+" with message "+xt.message),M=!0,j.io(new ke(ft,Mt)),I.close()}else Be("Connection","WebChannel received:",Pe),j.ro(Pe)}}),Q(d,NC.STAT_EVENT,oe=>{oe.stat===fv.PROXY?Be("Connection","Detected buffering proxy"):oe.stat===fv.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{j.so()},0),j}}function MM(){return typeof window<"u"?window:null}function mI(){return typeof document<"u"?document:null}function m0(n){return new Zb(n,!0)}class jT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class RM{constructor(e,t,r,s,u,d,g,_){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new jT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,_e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new ke(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WN extends RM{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Wx(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:rt(),s=e.targetChange.targetIds||[],u=function(_,I){return _.wt?(ht(void 0===I||"string"==typeof I),lr.fromBase64String(I||"")):(ht(void 0===I||I instanceof Uint8Array),lr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(_){const I=void 0===_.code?he.UNKNOWN:gm(_.code);return new ke(I,_.message||"")}(d);t=new Gb(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=fs(n,r.document.name),u=dr(r.document.updateTime),d=r.document.createTime?dr(r.document.createTime):vt.min(),g=new Or({mapValue:{fields:r.document.fields}}),_=Un.newFoundDocument(s,u,d,g);t=new mm(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=fs(n,r.document),u=r.readTime?dr(r.readTime):vt.min(),d=Un.newNoDocument(s,u);t=new mm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=fs(n,r.document);t=new mm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new Zv(r.count||0);t=new cT(r.targetId,u)}}var _;return t}(this.yt,e),r=function(s){if(!("targetChange"in s))return vt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?dr(u.readTime):vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=ap(this.yt),t.addTarget=function(s,u){let d;const g=u.target;return d=Jf(g)?{documents:Qb(s,g)}:{query:n0(s,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=ym(s,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(d.readTime=op(s,u.snapshotVersion.toTimestamp())),d}(this.yt,e);const r=function Zx(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=ap(this.yt),t.removeTarget=e,this.Bo(t)}}class ZN extends RM{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function pT(n,e){return n&&n.length>0?(ht(void 0!==e),n.map(t=>function(r,s){let u=dr(r.updateTime?r.updateTime:s);return u.isEqual(vt.min())&&(u=dr(s)),new iT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.Zo(r,t)}return ht(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ap(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vm(this.yt,r))};this.Bo(t)}}class KN extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(he.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(he.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class QN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Xn(t),this.ou=!1):Be("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class JN{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(g=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;Ec(d)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(I){const A=qe(I);A._u.add(4),yield Nm(A),A.gu.set("Unknown"),A._u.delete(4),yield y0(A)}),function(I){return _.apply(this,arguments)})(d))}))}),this.gu=new QN(r,s)}}function y0(n){return GT.apply(this,arguments)}function GT(){return GT=(0,_e.Z)(function*(n){if(Ec(n))for(const e of n.wu)yield e(!0)}),GT.apply(this,arguments)}function Nm(n){return qT.apply(this,arguments)}function qT(){return qT=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),qT.apply(this,arguments)}function yI(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ZT(t)?WT(t):Om(t).ko()&&zT(t,e))}function _0(n,e){const t=qe(n),r=Om(t);t.du.delete(e),r.ko()&&NM(t,e),0===t.du.size&&(r.ko()?r.Fo():Ec(t)&&t.gu.set("Unknown"))}function zT(n,e){n.yu.Ot(e.targetId),Om(n).zo(e)}function NM(n,e){n.yu.Ot(e),Om(n).Ho(e)}function WT(n){n.yu=new dT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Om(n).start(),n.gu.uu()}function ZT(n){return Ec(n)&&!Om(n).No()&&n.du.size>0}function Ec(n){return 0===qe(n)._u.size}function kM(n){n.yu=void 0}function XN(n){return KT.apply(this,arguments)}function KT(){return KT=(0,_e.Z)(function*(n){n.du.forEach((e,t)=>{zT(n,e)})}),KT.apply(this,arguments)}function ek(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,_e.Z)(function*(n,e){kM(n),ZT(n)?(n.gu.hu(e),WT(n)):n.gu.set("Unknown")}),YT.apply(this,arguments)}function tk(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,_e.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Gb&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(s,u){const d=u.cause;for(const g of u.targetIds)s.du.has(g)&&(yield s.remoteSyncer.rejectListen(g,d),s.du.delete(g),s.yu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _I(n,r)}else if(e instanceof mm?n.yu.Kt(e):e instanceof cT?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(vt.min()))try{const r=yield EM(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.yu.Zt(u);return d.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const I=s.du.get(_);I&&s.du.set(_,I.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const _=s.du.get(g);if(!_)return;s.du.set(g,_.withResumeToken(lr.EMPTY_BYTE_STRING,_.snapshotVersion)),NM(s,g);const I=new Ju(_.target,g,1,_.sequenceNumber);zT(s,I)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield _I(n,r)}var r}),QT.apply(this,arguments)}function _I(n,e,t){return JT.apply(this,arguments)}function JT(){return JT=(0,_e.Z)(function*(n,e,t){if(!$u(e))throw e;n._u.add(1),yield Nm(n),n.gu.set("Offline"),t||(t=()=>EM(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield y0(n)}))}),JT.apply(this,arguments)}function OM(n,e){return e().catch(t=>_I(n,t,e))}function km(n){return XT.apply(this,arguments)}function XT(){return XT=(0,_e.Z)(function*(n){const e=qe(n),t=fh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;nk(e);)try{const s=yield BN(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,rk(e,s)}catch(s){yield _I(e,s)}PM(e)&&FM(e)}),XT.apply(this,arguments)}function nk(n){return Ec(n)&&n.fu.length<10}function rk(n,e){n.fu.push(e);const t=fh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function PM(n){return Ec(n)&&!fh(n).No()&&n.fu.length>0}function FM(n){fh(n).start()}function ik(n){return eA.apply(this,arguments)}function eA(){return eA=(0,_e.Z)(function*(n){fh(n).eu()}),eA.apply(this,arguments)}function sk(n){return tA.apply(this,arguments)}function tA(){return tA=(0,_e.Z)(function*(n){const e=fh(n);for(const t of n.fu)e.Xo(t.mutations)}),tA.apply(this,arguments)}function ok(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,_e.Z)(function*(n,e,t){const r=n.fu.shift(),s=a0.from(r,e,t);yield OM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield km(n)}),nA.apply(this,arguments)}function ak(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,_e.Z)(function*(n,e){var t;e&&fh(n).Yo&&(yield(t=(0,_e.Z)(function*(r,s){if($b(u=s.code)&&u!==he.ABORTED){const d=r.fu.shift();fh(r).Mo(),yield OM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield km(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),PM(n)&&FM(n)}),rA.apply(this,arguments)}function LM(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,_e.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Ec(t);t._u.add(3),yield Nm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield y0(t)}),iA.apply(this,arguments)}function sA(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,_e.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield y0(t)):e||(t._u.add(2),yield Nm(t),t.gu.set("Unknown"))}),oA.apply(this,arguments)}function Om(n){return n.pu||(n.pu=function(e,t,r){const s=qe(e);return s.su(),new WN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:XN.bind(null,n),Zr:ek.bind(null,n),Wo:tk.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Mo(),ZT(n)?WT(n):n.gu.set("Unknown")):(yield n.pu.stop(),kM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function fh(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.su(),new ZN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:ik.bind(null,n),Zr:ak.bind(null,n),tu:sk.bind(null,n),Zo:ok.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Mo(),yield km(n)):(yield n.Iu.stop(),n.fu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class aA{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,g=new aA(e,t,d,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),$u(n))return new ke(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Fm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=th(),this.sortedSet=new _r(this.comparator)}static emptySet(e){return new Fm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Fm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UM{constructor(){this.Tu=new _r(We.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):rt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lm{constructor(e,t,r,s,u,d,g,_,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,s,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Lm(e,t,Fm.emptySet(t),d,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class uk{constructor(){this.Au=void 0,this.listeners=[]}}class lk{constructor(){this.queries=new Ku(e=>$v(e),hm),this.onlineState="Unknown",this.Ru=new Set}}function uA(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new uk),s)try{u.Au=yield t.onListen(r)}catch(d){const g=Pm(d,`Initialization of query '${Lb(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&hA(t)}),lA.apply(this,arguments)}function cA(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),dA.apply(this,arguments)}function ck(n,e){const t=qe(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const g of d.listeners)g.Pu(s)&&(r=!0);d.Au=s}}r&&hA(t)}function dk(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function hA(n){n.Ru.forEach(e=>{e.next()})}class fA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Lm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Lm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class hk{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class VM{constructor(e){this.yt=e}Ji(e){return fs(this.yt,e)}Yi(e){return e.metadata.exists?Yb(this.yt,e.document,!1):Un.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return dr(e)}}class fk{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=an.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new VM(this.yt);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const d of s.metadata.queries){const g=(t.get(d)||zt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function $N(n,e,t,r){return FT.apply(this,arguments)}(e.localStore,new VM(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield jN(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function BM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $M{constructor(e){this.key=e}}class jM{constructor(e){this.key=e}}class HM{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=zt(),this.mutatedKeys=zt(),this.Gu=QC(e),this.Qu=new Fm(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new UM,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,M)=>{const j=s.get(A),Q=Ub(this.query,M)?M:null,oe=!!j&&this.mutatedKeys.has(j.key),Oe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Pe=!1;j&&Q?j.data.isEqual(Q.data)?oe!==Oe&&(r.track({type:3,doc:Q}),Pe=!0):this.Hu(j,Q)||(r.track({type:2,doc:Q}),Pe=!0,(_&&this.Gu(Q,_)>0||I&&this.Gu(Q,I)<0)&&(g=!0)):!j&&Q?(r.track({type:0,doc:Q}),Pe=!0):j&&!Q&&(r.track({type:1,doc:j}),Pe=!0,(_||I)&&(g=!0)),Pe&&(Q?(d=d.add(Q),u=Oe?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((I,A)=>function(M,j){const Q=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return Q(M)-Q(j)}(I.type,A.type)||this.Gu(I.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.Uu;return this.Uu=g,0!==u.length||_?{snapshot:new Lm(this.query,e.Qu,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new UM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=zt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new jM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new $M(r))}),t}tc(e){this.qu=e.Hi,this.Ku=zt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Lm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class pk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gk{constructor(e){this.key=e,this.nc=!1}}class mk{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new Ku(g=>$v(g),hm),this.rc=new Map,this.oc=new Set,this.uc=new _r(We.comparator),this.cc=new Map,this.ac=new xT,this.hc={},this.lc=new Map,this.fc=cp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function yk(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,_e.Z)(function*(n,e){const t=LA(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const d=yield Mm(t.localStore,gi(e));t.isPrimaryClient&&yI(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield gA(t,e,r,"current"===g,d.resumeToken)}return s}),pA.apply(this,arguments)}function gA(n,e,t,r,s){return mA.apply(this,arguments)}function mA(){return mA=(0,_e.Z)(function*(n,e,t,r,s){n._c=(M,j,Q)=>{return(oe=(0,_e.Z)(function*(Oe,Pe,At,xt){let mt=Pe.view.Wu(At);mt.$i&&(mt=yield fI(Oe.localStore,Pe.query,!1).then(({documents:$t})=>Pe.view.Wu($t,mt)));const ft=xt&&xt.targetChanges.get(Pe.targetId),Mt=Pe.view.applyChanges(mt,Oe.isPrimaryClient,ft);return TA(Oe,Pe.targetId,Mt.Xu),Mt.snapshot}),function(Oe,Pe,At,xt){return oe.apply(this,arguments)})(n,M,j,Q);var oe};const u=yield fI(n.localStore,e,!0),d=new HM(e,u.Hi),g=d.Wu(u.documents),_=hs.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),I=d.applyChanges(g,n.isPrimaryClient,_);TA(n,t,I.Xu);const A=new pk(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),I.snapshot}),mA.apply(this,arguments)}function _k(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,_e.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!hm(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_0(t.remoteStore,r.targetId),Um(t,r.targetId)}).catch(Rs))):(Um(t,r.targetId),yield Rm(t.localStore,r.targetId,!0))}),yA.apply(this,arguments)}function _A(){return _A=(0,_e.Z)(function*(n,e,t){const r=UA(n);try{const s=yield function(u,d){const g=qe(u),_=qn.now(),I=d.reduce((j,Q)=>j.add(Q.key),zt());let A,M;return g.persistence.runTransaction("Locally write mutations","readwrite",j=>{let Q=yi(),oe=zt();return g.Gi.getEntries(j,I).next(Oe=>{Q=Oe,Q.forEach((Pe,At)=>{At.isValidDocument()||(oe=oe.add(Pe))})}).next(()=>g.localDocuments.getOverlayedDocuments(j,Q)).next(Oe=>{A=Oe;const Pe=[];for(const At of d){const xt=oT(At,A.get(At.key).overlayedDocument);null!=xt&&Pe.push(new qa(At.key,xt,KC(xt.value.mapValue),Sn.exists(!0)))}return g.mutationQueue.addMutationBatch(j,_,Pe,d)}).next(Oe=>{M=Oe;const Pe=Oe.applyToLocalDocumentSet(A,oe);return g.documentOverlayCache.saveOverlays(j,Oe.batchId,Pe)})}).then(()=>({batchId:M.batchId,changes:jb(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,g){let _=u.hc[u.currentUser.toKey()];_||(_=new _r(Vt)),_=_.insert(d,g),u.hc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield bc(r,s.changes),yield km(r.remoteStore)}catch(s){const u=Pm(s,"Failed to persist write");t.reject(u)}}),_A.apply(this,arguments)}function GM(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,_e.Z)(function*(n,e){const t=qe(n);try{const r=yield VN(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.cc.get(u);d&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.nc=!0:s.modifiedDocuments.size>0?ht(d.nc):s.removedDocuments.size>0&&(ht(d.nc),d.nc=!1))}),yield bc(t,r,e)}catch(r){yield Rs(r)}}),vA.apply(this,arguments)}function qM(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,d)=>{const g=d.view.bu(e);g.snapshot&&s.push(g.snapshot)}),function(u,d){const g=qe(u);g.onlineState=d;let _=!1;g.queries.forEach((I,A)=>{for(const M of A.listeners)M.bu(d)&&(_=!0)}),_&&hA(g)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wk(n,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,_e.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let d=new _r(We.comparator);d=d.insert(u,Un.newNoDocument(u,vt.min()));const g=zt().add(u),_=new _c(vt.min(),new Map,new In(Vt),d,g);yield GM(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),AA(r)}else yield Rm(r.localStore,e,!1).then(()=>Um(r,e,t)).catch(Rs)}),wA.apply(this,arguments)}function Ek(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield UN(t.localStore,e);CA(t,r,null),DA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield bc(t,s)}catch(s){yield Rs(s)}}),EA.apply(this,arguments)}function bk(n,e,t){return bA.apply(this,arguments)}function bA(){return bA=(0,_e.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,d){const g=qe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return g.mutationQueue.lookupMutationBatch(_,d).next(A=>(ht(null!==A),I=A.keys(),g.mutationQueue.removeMutationBatch(_,A))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,I,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>g.localDocuments.getDocuments(_,I))})}(r.localStore,e);CA(r,e,t),DA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield bc(r,s)}catch(s){yield Rs(s)}}),bA.apply(this,arguments)}function IA(){return IA=(0,_e.Z)(function*(n,e){const t=qe(n);Ec(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=Pm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),IA.apply(this,arguments)}function DA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function CA(n,e,t){const r=qe(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function Um(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||zM(n,r)})}function zM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(_0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),AA(n))}function TA(n,e,t){for(const r of t)r instanceof $M?(n.ac.addReference(r.key,e),Dk(n,r)):r instanceof jM?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||zM(n,r.key)):rt()}function Dk(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.oc.add(r),AA(n))}function AA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new We(an.fromString(e)),r=n.fc.next();n.cc.set(r,new gk(t)),n.uc=n.uc.insert(t,r),yI(n.remoteStore,new Ju(gi(Xd(t.path)),r,2,ei.at))}}function bc(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,_e.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],d=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,_)=>{d.push(r._c(_,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I?.fromCache?"not-current":"current"),I){s.push(I);const A=kT.Ci(_.targetId,I);u.push(A)}}))}),yield Promise.all(d),r.sc.Wo(s),yield(g=(0,_e.Z)(function*(_,I){const A=qe(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>le.forEach(I,j=>le.forEach(j.Si,Q=>A.persistence.referenceDelegate.addReference(M,j.targetId,Q)).next(()=>le.forEach(j.Di,Q=>A.persistence.referenceDelegate.removeReference(M,j.targetId,Q)))))}catch(M){if(!$u(M))throw M;Be("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const j=M.targetId;if(!M.fromCache){const Q=A.qi.get(j),Oe=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);A.qi=A.qi.insert(j,Oe)}}}),function(_,I){return g.apply(this,arguments)})(r.localStore,u))}),SA.apply(this,arguments)}function Ck(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,_e.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield wM(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(d=>{d.forEach(g=>{g.reject(new ke(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bc(t,r.ji)}var s}),xA.apply(this,arguments)}function Tk(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return zt().add(r.key);{let s=zt();const u=t.rc.get(e);if(!u)return s;for(const d of u){const g=t.ic.get(d);s=s.unionWith(g.view.ju)}return s}}function Ak(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,_e.Z)(function*(n,e){const t=qe(n),r=yield fI(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&TA(t,e.targetId,s.Xu),s}),MA.apply(this,arguments)}function Sk(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,_e.Z)(function*(n,e){const t=qe(n);return DM(t.localStore,e).then(r=>bc(t,r))}),RA.apply(this,arguments)}function xk(n,e,t,r){return NA.apply(this,arguments)}function NA(){return NA=(0,_e.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(d,g){const _=qe(d),I=qe(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>I.Tn(A,g).next(M=>M?_.localDocuments.getDocuments(A,M):le.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield km(s.remoteStore):"acknowledged"===t||"rejected"===t?(CA(s,e,r||null),DA(s,e),g=e,qe(qe(s.localStore).mutationQueue).An(g)):rt(),yield bc(s,u)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),NA.apply(this,arguments)}function kA(){return kA=(0,_e.Z)(function*(n,e){const t=qe(n);if(LA(t),UA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield WM(t,r.toArray());t.dc=!0,yield sA(t.remoteStore,!0);for(const u of s)yI(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(Um(t,d),Rm(t.localStore,d,!0))),_0(t.remoteStore,d)}),yield s,yield WM(t,r),function(u){const d=qe(u);d.cc.forEach((g,_)=>{_0(d.remoteStore,_)}),d.ac.fs(),d.cc=new Map,d.uc=new _r(We.comparator)}(t),t.dc=!1,yield sA(t.remoteStore,!1)}}),kA.apply(this,arguments)}function WM(n,e,t){return OA.apply(this,arguments)}function OA(){return OA=(0,_e.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const d of e){let g;const _=r.rc.get(d);if(_&&0!==_.length){g=yield Mm(r.localStore,gi(_[0]));for(const I of _){const A=r.ic.get(I),M=yield Ak(r,A);M.snapshot&&u.push(M.snapshot)}}else{const I=yield IM(r.localStore,d);g=yield Mm(r.localStore,I),yield gA(r,ZM(I),d,!1,g.resumeToken)}s.push(g)}return r.sc.Wo(u),s}),OA.apply(this,arguments)}function ZM(n){return Fb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Rk(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Nk(n,e,t,r){return PA.apply(this,arguments)}function PA(){return PA=(0,_e.Z)(function*(n,e,t,r){const s=qe(n);if(s.dc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield DM(s.localStore,YC(u[0])),g=_c.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,lr.EMPTY_BYTE_STRING);yield bc(s,d,g);break}case"rejected":yield Rm(s.localStore,e,!0),Um(s,e,r);break;default:rt()}}),PA.apply(this,arguments)}function kk(n,e,t){return FA.apply(this,arguments)}function FA(){return FA=(0,_e.Z)(function*(n,e,t){const r=LA(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Be("SyncEngine","Adding an already active target "+s);continue}const u=yield IM(r.localStore,s),d=yield Mm(r.localStore,u);yield gA(r,ZM(u),d.targetId,!1,d.resumeToken),yI(r.remoteStore,d)}for(const s of t)r.rc.has(s)&&(yield Rm(r.localStore,s,!1).then(()=>{_0(r.remoteStore,s),Um(r,s)}).catch(Rs))}}),FA.apply(this,arguments)}function LA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wk.bind(null,e),e.sc.Wo=ck.bind(null,e.eventManager),e.sc.wc=dk.bind(null,e.eventManager),e}function UA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bk.bind(null,e),e}class KM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.yt=m0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return vM(this.persistence,new _M,e.initialUser,this.yt)}yc(e){return new mM(dI.Bs,this.yt)}gc(e){return new SM}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YM extends KM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield UA(r.Ac.syncEngine),yield km(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return vM(this.persistence,new _M,e.initialUser,this.yt)}Tc(e,t){return new IN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new $C(t,this.persistence);return new BC(e.asyncQueue,r)}yc(e){const t=NT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new RT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MM(),mI(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new SM}}class Pk extends YM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof $T&&(r.sharedClientState.syncEngine={Fr:xk.bind(null,s),$r:Nk.bind(null,s),Br:kk.bind(null,s),vi:Rk.bind(null,s),Mr:Sk.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,_e.Z)(function*(d){yield function Mk(n,e){return kA.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=MM();if(!$T.C(t))throw new ke(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=NT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $T(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class VA{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>qM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ck.bind(null,r.syncEngine),yield sA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lk}createDatastore(e){const t=m0(e.databaseInfo.databaseId),r=new zN(e.databaseInfo);return new KN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>qM(this.syncEngine,g,0),d=xM.C()?new xM:new HN,new JN(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,g,_,I){const A=new mk(r,s,u,d,g,_);return I&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=qe(t);Be("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Nm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function BA(n,e,t){if(!t)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QM(n,e,t,r){if(!0===e&&!0===r)throw new ke(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JM(n){if(!We.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XM(n){if(We.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vI(n);throw new ke(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function e1(n,e){if(e<=0)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const t1=new Map;class n1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,QM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _v;switch(t.type){case"gapi":return new yb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ke(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=t1.get(e);t&&(Be("ComponentProvider","Removing Datastore"),t1.delete(e),t.terminate())}(this),Promise.resolve()}}function r1(n,e,t,r={}){var s;const u=(n=un(n,v0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&uc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=Gr.MOCK_USER;else{d=(0,Ot.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ke(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Gr(_)}n._authCredentials=new OC(new yv(d,g))}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class Xu extends xi{constructor(e,t,r){super(e,t,Xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new We(e))}withConverter(e){return new Xu(this.firestore,e,this._path)}}function i1(n,e,...t){if(n=(0,Ot.m9)(n),BA("collection","path",e),n instanceof v0){const r=an.fromString(e,...t);return XM(r),new Xu(n,null,r)}{if(!(n instanceof er||n instanceof Xu))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return XM(r),new Xu(n.firestore,null,r)}}function wI(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=wv.R()),BA("doc","path",e),n instanceof v0){const r=an.fromString(e,...t);return JM(r),new er(n,null,new We(r))}{if(!(n instanceof er||n instanceof Xu))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return JM(r),new er(n.firestore,n instanceof Xu?n.converter:null,new We(r))}}function s1(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof er||n instanceof Xu)&&(e instanceof er||e instanceof Xu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $A(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof xi&&e instanceof xi&&n.firestore===e.firestore&&hm(n._query,e._query)&&n.converter===e.converter}function o1(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class EI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lk{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new qr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new hk(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Bk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,_e.Z)(function*(u,d){const g=qe(u),_=ap(g.yt)+"/documents",I={documents:d.map(Q=>nh(g.yt,Q))},A=yield g._o("BatchGetDocuments",_,I,d.length),M=new Map;A.forEach(Q=>{const oe=function fT(n,e){return"found"in e?function(t,r){ht(!!r.found);const s=fs(t,r.found.name),u=dr(r.found.updateTime),d=r.found.createTime?dr(r.found.createTime):vt.min(),g=new Or({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(s,u,d,g)}(n,e):"missing"in e?function(t,r){ht(!!r.missing),ht(!!r.readTime);const s=fs(t,r.missing),u=dr(r.readTime);return Un.newNoDocument(s,u)}(n,e):rt()}(g.yt,Q);M.set(oe.key.toString(),oe)});const j=[];return d.forEach(Q=>{const oe=M.get(Q.toString());ht(!!oe),j.push(oe)}),j}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=We.fromPath(s);e.mutations.push(new Wv(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(s,u){const d=qe(s),g=ap(d.yt)+"/documents",_={writes:u.map(I=>vm(d.yt,I))};yield d.ao("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Sn.exists(!1):Sn.updateTime(t):Sn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new ke(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sn.updateTime(t)}return Sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $k{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new jT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,_e.Z)(function*(){const t=new Bk(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!$a(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!$b(t)}return!1}}class jk{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Gr.UNAUTHENTICATED,this.clientId=wv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,_e.Z)(function*(g){Be("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Be("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Pm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function a1(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,_e.Z)(function*(u){r.isEqual(u)||(yield wM(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jA.apply(this,arguments)}function u1(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield GA(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>LM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>LM(e.remoteStore,u)),n.onlineComponents=e}),HA.apply(this,arguments)}function GA(n){return qA.apply(this,arguments)}function qA(){return qA=(0,_e.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield a1(n,new KM)),n.offlineComponents}),qA.apply(this,arguments)}function bI(n){return zA.apply(this,arguments)}function zA(){return zA=(0,_e.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield u1(n,new VA)),n.onlineComponents}),zA.apply(this,arguments)}function l1(n){return GA(n).then(e=>e.persistence)}function II(n){return GA(n).then(e=>e.localStore)}function WA(n){return bI(n).then(e=>e.remoteStore)}function ZA(n){return bI(n).then(e=>e.syncEngine)}function Vm(n){return KA.apply(this,arguments)}function KA(){return KA=(0,_e.Z)(function*(n){const e=yield bI(n),t=e.eventManager;return t.onListen=yk.bind(null,e.syncEngine),t.onUnlisten=_k.bind(null,e.syncEngine),t}),KA.apply(this,arguments)}function d1(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,u,d,g,_){const I=new EI({next:M=>{u.enqueueAndForget(()=>cA(s,A));const j=M.docs.has(d);!j&&M.fromCache?_.reject(new ke(he.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&M.fromCache&&g&&"server"===g.source?_.reject(new ke(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),A=new fA(Xd(d.path),I,{includeMetadataChanges:!0,Nu:!0});return uA(s,A)}(yield Vm(n),n.asyncQueue,e,t,r)})),r.promise}function h1(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,u,d,g,_){const I=new EI({next:M=>{u.enqueueAndForget(()=>cA(s,A)),M.fromCache&&"server"===g.source?_.reject(new ke(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),A=new fA(d,I,{includeMetadataChanges:!0,Nu:!0});return uA(s,A)}(yield Vm(n),n.asyncQueue,e,t,r)})),r.promise}class Yk{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new jT(this,"async_queue_retry"),this.Wc=()=>{const t=mI();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=mI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=mI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new qr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!$u(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Xn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=aA.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(s),s}zc(){this.Kc&&rt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function YA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Qk{constructor(){this._progressObserver={},this._taskCompletionResolver=new qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends v0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Yk,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||f1(this),this._firestoreClient.terminate()}}function Xk(n,e){const t="object"==typeof n?n:(0,jr.getApp)(),r="string"==typeof n?n:e||"(default)",s=(0,jr._getProvider)(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const u=(0,Ot.P0)("firestore");u&&r1(s,...u)}return s}function Pr(n){return n._firestoreClient||f1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function f1(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new jC(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new jk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function p1(n,e,t){const r=new qr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield a1(n,t),yield u1(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(d=u).name?d.code===he.FAILED_PRECONDITION||d.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;uc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function g1(n){if(n._initialized||n._terminated)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class el{constructor(e){this._byteString=e}static fromBase64String(e){try{return new el(lr.fromBase64String(e))}catch(t){throw new ke(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new el(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hp{constructor(e){this._methodName=e}}class DI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const uO=/^__.*__$/;class lO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new qa(e,this.data,this.fieldMask,t,this.fieldTransforms):new rp(e,this.data,t,this.fieldTransforms)}}class m1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function y1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class CI{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new CI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return SI(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(y1(this.sa)&&uO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class cO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||m0(e)}da(e,t,r,s=!1){return new CI({sa:e,methodName:t,fa:r,path:ur.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function fp(n){const e=n._freezeSettings(),t=m0(n._databaseId);return new cO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TI(n,e,t,r,s,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,s);eS("Data must be an object, but it was:",d,r);const g=w1(r,d);let _,I;if(u.merge)_=new qi(d.fieldMask),I=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const j=tS(e,M,t);if(!d.contains(j))throw new ke(he.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);b1(A,j)||A.push(j)}_=new qi(A),I=d.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,I=d.fieldTransforms;return new lO(new Or(g),_,I)}class w0 extends hp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof w0}}function _1(n,e,t){return new CI({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class QA extends hp{_toFieldTransform(e){return new fm(e.path,new yc)}isEqual(e){return e instanceof QA}}class dO extends hp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_1(this,e,!0),r=this._a.map(u=>pp(u,t)),s=new Zu(r);return new fm(e.path,s)}isEqual(e){return this===e}}class hO extends hp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_1(this,e,!0),r=this._a.map(u=>pp(u,t)),s=new Ga(r);return new fm(e.path,s)}isEqual(e){return this===e}}class fO extends hp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new eh(e.yt,eT(e.yt,this.wa));return new fm(e.path,t)}isEqual(e){return this===e}}function JA(n,e,t,r){const s=n.da(1,e,t);eS("Data must be an object, but it was:",s,r);const u=[],d=Or.empty();dc(r,(_,I)=>{const A=AI(e,_,t);I=(0,Ot.m9)(I);const M=s.ca(A);if(I instanceof w0)u.push(A);else{const j=pp(I,M);null!=j&&(u.push(A),d.set(A,j))}});const g=new qi(u);return new m1(d,g,s.fieldTransforms)}function XA(n,e,t,r,s,u){const d=n.da(1,e,t),g=[tS(e,r,t)],_=[s];if(u.length%2!=0)throw new ke(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)g.push(tS(e,u[j])),_.push(u[j+1]);const I=[],A=Or.empty();for(let j=g.length-1;j>=0;--j)if(!b1(I,g[j])){const Q=g[j];let oe=_[j];oe=(0,Ot.m9)(oe);const Oe=d.ca(Q);if(oe instanceof w0)I.push(Q);else{const Pe=pp(oe,Oe);null!=Pe&&(I.push(Q),A.set(Q,Pe))}}const M=new qi(I);return new m1(A,M,d.fieldTransforms)}function v1(n,e,t,r=!1){return pp(t,n.da(r?4:3,e))}function pp(n,e){if(E1(n=(0,Ot.m9)(n)))return eS("Unsupported field value:",e,n),w1(n,e);if(n instanceof hp)return function(t,r){if(!y1(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let g=pp(d,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return eT(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=qn.fromDate(t);return{timestampValue:op(r.yt,s)}}if(t instanceof qn){const s=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:op(r.yt,s)}}if(t instanceof DI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof el)return{bytesValue:ym(r.yt,t._byteString)};if(t instanceof er){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_m(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${vI(t)}`)}(n,e)}function w1(n,e){const t={};return tm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dc(n,(r,s)=>{const u=pp(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function E1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof DI||n instanceof el||n instanceof er||n instanceof hp)}function eS(n,e,t){if(!E1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vI(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function tS(n,e,t){if((e=(0,Ot.m9)(e))instanceof Ic)return e._internalPath;if("string"==typeof e)return AI(n,e);throw SI("Field path arguments must be of type string or ",n,!1,void 0,t)}const pO=new RegExp("[~\\*/\\[\\]]");function AI(n,e,t){if(e.search(pO)>=0)throw SI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ic(...e.split("."))._internalPath}catch{throw SI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function SI(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${r}`),d&&(_+=` in document ${s}`),_+=")"),new ke(he.INVALID_ARGUMENT,g+n+_)}function b1(n,e){return n.some(t=>t.isEqual(e))}class E0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gO extends E0{data(){return super.data()}}function xI(n,e){return"string"==typeof e?AI(n,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}function I1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nS{}class b0 extends nS{}function ph(n,e,...t){let r=[];e instanceof nS&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof Bm).length,d=s.filter(g=>g instanceof I0).length;if(u>1||u>0&&d>0)throw new ke(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class I0 extends b0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new I0(e,t,r)}_apply(e){const t=this._parse(e);return A1(e._query,t),new xi(e.firestore,e.converter,Bv(e._query,t))}_parse(e){const t=fp(e.firestore);return function(s,u,d,g,_,I,A){let M;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){T1(A,I);const j=[];for(const Q of A)j.push(C1(g,s,Q));M={arrayValue:{values:j}}}else M=C1(g,s,A)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||T1(A,I),M=v1(d,"where",A,"in"===I||"not-in"===I);return Yt.create(_,I,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Bm extends nS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const d=s.getFlattenedFilters();for(const g of d)A1(u,g),u=Bv(u,g)}(e._query,t),new xi(e.firestore,e.converter,Bv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rS extends b0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rS(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Ha(s,u);return function(g,_){if(null===Vv(g)){const I=ep(g);null!==I&&S1(0,I,_.field)}}(r,d),d}(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Xo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class MI extends b0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new MI(e,t,r)}_apply(e){return new xi(e.firestore,e.converter,dm(e._query,this._limit,this._limitType))}}class RI extends b0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new RI(e,t,r)}_apply(e){const t=D1(e,this.type,this._docOrFields,this._inclusive);return new xi(e.firestore,e.converter,(s=t,new Xo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class NI extends b0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new NI(e,t,r)}_apply(e){const t=D1(e,this.type,this._docOrFields,this._inclusive);return new xi(e.firestore,e.converter,(s=t,new Xo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function D1(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof E0)return function(s,u,d,g,_){if(!g)throw new ke(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const I=[];for(const A of Wu(s))if(A.field.isKeyField())I.push(fc(u,g.key));else{const M=g.data.field(A.field);if(rm(M))throw new ke(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const j=A.field.canonicalString();throw new ke(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}I.push(M)}return new zu(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=fp(n.firestore);return function(u,d,g,_,I,A){const M=u.explicitOrderBy;if(I.length>M.length)throw new ke(he.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let Q=0;Q<I.length;Q++){const oe=I[Q];if(M[Q].field.isKeyField()){if("string"!=typeof oe)throw new ke(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof oe}`);if(!cm(u)&&-1!==oe.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${oe}' contains a slash.`);const Oe=u.path.child(an.fromString(oe));if(!We.isDocumentKey(Oe))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Pe=new We(Oe);j.push(fc(d,Pe))}else{const Oe=v1(g,_,oe);j.push(Oe)}}return new zu(j,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function C1(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new ke(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cm(e)&&-1!==t.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!We.isDocumentKey(r))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fc(n,new We(r))}if(t instanceof er)return fc(n,t._key);throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vI(t)}.`)}function T1(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function A1(n,e){if(e.isInequality()){const r=ep(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new ke(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=Vv(n);null!==u&&S1(0,s,u)}const t=function(r,s){for(const u of r)for(const d of u.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function S1(n,e,t){if(!t.isEqual(e))throw new ke(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class iS{convertValue(e,t="none"){switch(Kd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return dc(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new DI(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=im(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zd(e));default:return null}}convertTimestamp(e){const t=ju(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);ht(Qu(r));const s=new Jo(r.get(1),r.get(3)),u=new We(r.popFirst(5));return s.isEqual(t)||Xn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function kI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class DO extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}class gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dc extends E0{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new D0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class D0 extends Dc{data(e={}){return super.data(e)}}class gh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new gp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new D0(this._firestore,this._userDataWriter,r.key,r,new gp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new D0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new gp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const g=new D0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new gp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==d.type&&(_=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),I=u.indexOf(d.doc.key)),{type:CO(d.type),doc:g,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function CO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function M1(n,e){return n instanceof Dc&&e instanceof Dc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gh&&e instanceof gh&&n._firestore===e._firestore&&$A(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class mh extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function R1(n,e,t){n=un(n,er);const r=un(n.firestore,tr),s=kI(n.converter,e,t);return $m(r,[TI(fp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Sn.none())])}function N1(n,e,t,...r){n=un(n,er);const s=un(n.firestore,tr),u=fp(s);let d;return d="string"==typeof(e=(0,Ot.m9)(e))||e instanceof Ic?XA(u,"updateDoc",n._key,e,t,r):JA(u,"updateDoc",n._key,e),$m(s,[d.toMutation(n._key,Sn.exists(!0))])}function k1(n,...e){var t,r,s;n=(0,Ot.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||YA(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(YA(e[d])){const M=e[d];e[d]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[d+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[d+2]=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}let _,I,A;if(n instanceof er)I=un(n.firestore,tr),A=Xd(n._key.path),_={next:M=>{e[d]&&e[d](sS(I,n,M))},error:e[d+1],complete:e[d+2]};else{const M=un(n,xi);I=un(M.firestore,tr),A=M._query;const j=new mh(I);_={next:Q=>{e[d]&&e[d](new gh(I,j,M,Q))},error:e[d+1],complete:e[d+2]},I1(n._query)}return function(M,j,Q,oe){const Oe=new EI(oe),Pe=new fA(j,Oe,Q);return M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return uA(yield Vm(M),Pe)})),()=>{Oe.bc(),M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return cA(yield Vm(M),Pe)}))}}(Pr(I),A,g,_)}function $m(n,e){return function(t,r){const s=new qr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function vk(n,e,t){return _A.apply(this,arguments)}(yield ZA(t),r,s)})),s.promise}(Pr(n),e)}function sS(n,e,t){const r=t.docs.get(e._key),s=new mh(n);return new Dc(n,s,e._key,r,new gp(t.hasPendingWrites,t.fromCache),e.converter)}const PO={maxAttempts:5};class O1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fp(e)}set(e,t,r){this._verifyNotCommitted();const s=yh(e,this._firestore),u=kI(s.converter,t,r),d=TI(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,Sn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=yh(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Ic?XA(this._dataReader,"WriteBatch.update",u._key,t,r,s):JA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yh(e,this._firestore);return this._mutations=this._mutations.concat(new mi(t._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yh(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new ke(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class FO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fp(e)}get(e){const t=yh(e,this._firestore),r=new DO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return rt();const u=s[0];if(u.isFoundDocument())return new E0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new E0(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const s=yh(e,this._firestore),u=kI(s.converter,t,r),d=TI(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=yh(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Ic?XA(this._dataReader,"Transaction.update",u._key,t,r,s):JA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=yh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yh(e,this._firestore),r=new mh(this._firestore);return super.get(e).then(s=>new Dc(this._firestore,r,t._key,s._document,new gp(!1,!1),t.converter))}}function oS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function F1(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function L1(){if(!function HC(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){qd=jr.SDK_VERSION,(0,jr._registerComponent)(new ao.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),d=new tr(new vv(t.getProvider("auth-internal")),new _b(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ke(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,jr.registerVersion)(pv,"3.8.0",n),(0,jr.registerVersion)(pv,"3.8.0","esm2017")}();class C0{constructor(e){this._delegate=e}static fromBase64String(e){return L1(),new C0(el.fromBase64String(e))}static fromUint8Array(e){return F1(),new C0(el.fromUint8Array(e))}toBase64(){return L1(),this._delegate.toBase64()}toUint8Array(){return F1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function aS(n){return function qO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class zO{enableIndexedDbPersistence(e,t){return function eO(n,e){g1(n=un(n,tr));const t=Pr(n),r=n._freezeSettings(),s=new VA;return p1(t,s,new YM(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tO(n){g1(n=un(n,tr));const e=Pr(n),t=n._freezeSettings(),r=new VA;return p1(e,r,new Pk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nO(n){if(n._initialized&&!n._terminated)throw new ke(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Ns.C())return Promise.resolve();const s=r+"main";yield Ns.delete(s)}),function(r){return t.apply(this,arguments)})(NT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class U1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&uc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){r1(this._delegate,e,t,r)}enableNetwork(){return function iO(n){return function Hk(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield l1(n),t=yield WA(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s._u.delete(0),y0(s)}(t)}))}(Pr(n=un(n,tr)))}(this._delegate)}disableNetwork(){return function sO(n){return function Gk(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield l1(n),t=yield WA(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(s){const u=qe(s);u._u.add(0),yield Nm(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Pr(n=un(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rO(n){return function(e){const t=new qr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Ik(n,e){return IA.apply(this,arguments)}(yield ZA(e),t)})),t.promise}(Pr(n=un(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function OO(n,e){return function Wk(n,e){const t=new EI(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Vm(n),s=t,qe(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Vm(n),s=t,void qe(r).Ru.delete(s);var r,s}))}}(Pr(n=un(n,tr)),YA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jm(this,i1(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,wI(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function Fk(n,e){if(n=un(n,v0),BA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xi(n,null,(t=e,new Xo(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function LO(n,e,t){n=un(n,tr);const r=Object.assign(Object.assign({},PO),t);return function(s){if(s.maxAttempts<1)throw new ke(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,d){const g=new qr;return s.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const _=yield function c1(n){return bI(n).then(e=>e.datastore)}(s);new $k(s.asyncQueue,_,d,u,g).run()})),g.promise}(Pr(n),s=>e(new FO(n,s)),r)}(this._delegate,t=>e(new V1(this,t)))}batch(){return Pr(this._delegate),new B1(new O1(this._delegate,e=>$m(this._delegate,e)))}loadBundle(e){return function oO(n,e){const t=Pr(n=un(n,tr)),r=new Qk;return function Zk(n,e,t,r){const s=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return o1(_,I);if(_ instanceof ArrayBuffer)return o1(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Lk(_,d);var _}(t,m0(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function Ok(n,e,t){const r=qe(n);var s;(s=(0,_e.Z)(function*(u,d,g){try{const _=yield d.getMetadata();if(yield function(j,Q){const oe=qe(j),Oe=dr(Q.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Pe=>oe.Ns.getBundleMetadata(Pe,Q.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Oe)>=0)}(u.localStore,_))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(j=_).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);g._updateProgress(BM(_));const I=new fk(_,u.localStore,d.yt);let A=yield d.mc();for(;A;){const j=yield I.Fu(A);j&&g._updateProgress(j),A=yield d.mc()}const M=yield I.complete();return yield bc(u,M.Lu,void 0),yield function(j,Q){const oe=qe(j);return oe.persistence.runTransaction("Save bundle","readwrite",Oe=>oe.Ns.saveBundleMetadata(Oe,Q))}(u.localStore,_),g._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return uc("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var j}),function(u,d,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield ZA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function aO(n,e){return function Kk(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield II(n),e)}))}(Pr(n=un(n,tr)),e).then(t=>t?new xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class OI extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new C0(new el(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class V1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new OI(e)}get(e){const t=yp(e);return this._delegate.get(t).then(r=>new T0(this._firestore,new Dc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=yp(e);return r?(oS("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}}class B1{constructor(e){this._delegate=e}set(e,t,r){const s=yp(e);return r?(oS("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new D0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new A0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new mp(e,new OI(e),t),s.set(t,u)),u}}mp.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new er(t._delegate,r,new We(e)))}static forKey(e,t,r){return new ta(t,new er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new jm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jm(this.firestore,i1(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof er&&s1(this._delegate,e)}set(e,t){t=oS("DocumentReference.set",t);try{return t?R1(this._delegate,e,t):R1(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?N1(this._delegate,e):N1(this._delegate,e,t,...r)}catch(s){throw ps(s,"updateDoc()","DocumentReference.update()")}}delete(){return function NO(n){return $m(un(n.firestore,tr),[new mi(n._key,Sn.none())])}(this._delegate)}onSnapshot(...e){const t=$1(e),r=j1(e,s=>new T0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return k1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function AO(n){n=un(n,er);const e=un(n.firestore,tr),t=Pr(e),r=new mh(e);return function qk(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,u,d){try{const g=yield function(_,I){const A=qe(_);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,I))}(s,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new ke(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Pm(g,`Failed to get document '${u} from cache`);d.reject(_)}}),function(s,u,d){return r.apply(this,arguments)})(yield II(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Dc(e,r,n._key,s,new gp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function SO(n){n=un(n,er);const e=un(n.firestore,tr);return d1(Pr(e),n._key,{source:"server"}).then(t=>sS(e,n,t))}(this._delegate):function TO(n){n=un(n,er);const e=un(n.firestore,tr);return d1(Pr(e),n._key).then(t=>sS(e,n,t))}(this._delegate),t.then(r=>new T0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function $1(n){for(const e of n)if("object"==typeof e&&!aS(e))return e;return{}}function j1(n,e){var t,r;let s;return s=aS(n[0])?n[0]:aS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class T0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return M1(this._delegate,e._delegate)}}class A0 extends T0{data(e){const t=this._delegate.data(e);return function mb(n,e){n||rt()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OI(e)}where(e,t,r){try{return new gs(this.firestore,ph(this._delegate,function mO(n,e,t){const r=e,s=xI("where",n);return I0._create(s,r,t)}(e,t,r)))}catch(s){throw ps(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,ph(this._delegate,function yO(n,e="asc"){const t=e,r=xI("orderBy",n);return rS._create(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,ph(this._delegate,function _O(n){return e1("limit",n),MI._create("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,ph(this._delegate,function vO(n){return e1("limitToLast",n),MI._create("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,ph(this._delegate,function wO(...n){return RI._create("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,ph(this._delegate,function EO(...n){return RI._create("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,ph(this._delegate,function bO(...n){return NI._create("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,ph(this._delegate,function IO(...n){return NI._create("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return $A(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function MO(n){n=un(n,xi);const e=un(n.firestore,tr),t=Pr(e),r=new mh(e);return function zk(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,u,d){try{const g=yield fI(s,u,!0),_=new HM(u,g.Hi),I=_.Wu(g.documents),A=_.applyChanges(I,!1);d.resolve(A.snapshot)}catch(g){const _=Pm(g,`Failed to execute query '${u} against cache`);d.reject(_)}}),function(s,u,d){return r.apply(this,arguments)})(yield II(n),e,t);var r})),t.promise}(t,n._query).then(s=>new gh(e,r,n,s))}(this._delegate):"server"===e?.source?function RO(n){n=un(n,xi);const e=un(n.firestore,tr),t=Pr(e),r=new mh(e);return h1(t,n._query,{source:"server"}).then(s=>new gh(e,r,n,s))}(this._delegate):function xO(n){n=un(n,xi);const e=un(n.firestore,tr),t=Pr(e),r=new mh(e);return I1(n._query),h1(t,n._query).then(s=>new gh(e,r,n,s))}(this._delegate),t.then(r=>new uS(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$1(e),r=j1(e,s=>new uS(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return k1(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}class ZO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new A0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new A0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new A0(this._firestore,r))})}isEqual(e){return M1(this._delegate,e._delegate)}}class jm extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?wI(this._delegate):wI(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function kO(n,e){const t=un(n.firestore,tr),r=wI(n),s=kI(n.converter,e);return $m(t,[TI(fp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return s1(this._delegate,e._delegate)}withConverter(e){return new jm(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function yp(n){return un(n,er)}class lS{constructor(...e){this._delegate=new Ic(...e)}static documentId(){return new lS(ur.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof Ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class _p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function VO(){return new QA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _p(e)}static delete(){const e=function UO(){return new w0("deleteField")}();return e._methodName="FieldValue.delete",new _p(e)}static arrayUnion(...e){const t=function BO(...n){return new dO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _p(t)}static arrayRemove(...e){const t=function $O(...n){return new hO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _p(t)}static increment(e){const t=function jO(n){return new fO("increment",n)}(e);return t._methodName="FieldValue.increment",new _p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KO={Firestore:U1,GeoPoint:DI,Timestamp:qn,Blob:C0,Transaction:V1,WriteBatch:B1,DocumentReference:ta,DocumentSnapshot:T0,Query:gs,QueryDocumentSnapshot:A0,QuerySnapshot:uS,CollectionReference:jm,FieldPath:lS,FieldValue:_p,setLogLevel:function WO(n){!function gv(n){Bu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function QO(n){(function YO(n,e){n.INTERNAL.registerComponent(new ao.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},KO)))})(n,(e,t)=>new U1(e,t,new zO)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(Ig.Z);var JO=P(6451),PI=P(5363),XO=P(6063);class eP extends to.x{constructor(e=1/0,t=1/0,r=XO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)g=_;g&&r.splice(0,g+1)}}}var tP=P(3099);function H1(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,tP.B)({connector:()=>new eP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function G1(n,e){return(0,by.m)(e)?sr(()=>n,e):sr(()=>n)}var cS=P(9468),_h=P(259);class Hm{constructor(e){return e}}class dS{constructor(){return(0,_h.C6)()}}const hS=new c.OlP("angularfire2._apps"),rP={provide:Hm,useFactory:function nP(n){return n&&1===n.length?n[0]:new Hm((0,_h.Mq)())},deps:[[new c.FiY,hS]]},iP={provide:dS,deps:[[new c.FiY,hS]]};function sP(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Hm(r)}}let oP=(()=>{class n{constructor(t){(0,_h.KN)("angularfire",qt.q4.full,"core"),(0,_h.KN)("angularfire",qt.q4.full,"app"),(0,_h.KN)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[rP,iP]}),n})();function aP(n,...e){return{ngModule:oP,providers:[{provide:hS,useFactory:sP(n),multi:!0,deps:[c.R0b,c.zs3,qt.HU,...e]}]}}const uP=(0,qt.u3)(_h.ZF,!0),fS=new Map,q1={activated:!1,tokenObservers:[]},lP={initialized:!1,enabled:!1};function Mi(n){return fS.get(n)||Object.assign({},q1)}function FI(){return lP}class gP{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function mP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function W1(n){if(!Mi(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function mS(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const M=yield s.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(n,u)}catch(M){throw ms.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==d.status)throw ms.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(M){throw ms.create("fetch-parse-error",{originalErrorMessage:M?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(_[1]),A=Date.now();return{token:g.token,expireTimeMillis:A+I,issuedAtTimeMillis:A}}),yS.apply(this,arguments)}function wP(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const S0="firebase-app-check-store";let VI=null;function K1(){return VI||(VI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ms.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(S0,{keyPath:"compositeKey"})}}catch(t){e(ms.create("storage-open",{originalErrorMessage:t?.message}))}}),VI)}function _S(){return _S=(0,_e.Z)(function*(n,e){const r=(yield K1()).transaction(S0,"readwrite"),u=r.objectStore(S0).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=_=>{d()},r.onerror=_=>{var I;g(ms.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),_S.apply(this,arguments)}const x0=new ls.Yd("@firebase/app-check");function ES(n,e){return(0,Ot.hl)()?function DP(n,e){return function Y1(n,e){return _S.apply(this,arguments)}(function J1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{x0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function X1(){return FI().enabled}function eR(){return IS.apply(this,arguments)}function IS(){return IS=(0,_e.Z)(function*(){const n=FI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),IS.apply(this,arguments)}const MP={error:"UNKNOWN_ERROR"};function RP(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function BI(n){return DS.apply(this,arguments)}function DS(){return DS=(0,_e.Z)(function*(n,e=!1){const t=n.app;W1(t);const r=Mi(t);let u,s=r.token;if(s&&!Gm(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(Gm(_)?s=_:yield ES(t,void 0))}if(!e&&s&&Gm(s))return{token:s.token};let g,d=!1;if(X1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mS(wP(t,yield eR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const _=yield r.exchangeTokenPromise;return yield ES(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),s=yield Mi(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?x0.warn(_.message):x0.error(_),u=_}return s?u?g=Gm(s)?{token:s.token,internalError:u}:rR(u):(g={token:s.token},r.token=s,yield ES(t,s)):g=rR(u),d&&nR(t,g),g}),DS.apply(this,arguments)}function TS(n,e){const t=Mi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function tR(n){const{app:e}=n,t=Mi(e);let r=t.tokenRefresher;r||(r=function NP(n){const{app:e}=n;return new gP((0,_e.Z)(function*(){let r;if(r=Mi(e).token?yield BI(n,!0):yield BI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nR(n,e){const t=Mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Gm(n){return n.expireTimeMillis-Date.now()>0}function rR(n){return{token:RP(MP),error:n}}class kP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mi(this.app);for(const t of e)TS(this.app,t.next);return Promise.resolve()}}const dR="app-check-internal";!function WP(){(0,jr._registerComponent)(new ao.wA("app-check",n=>function OP(n,e){return new kP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(dR).initialize()})),(0,jr._registerComponent)(new ao.wA(dR,n=>function PP(n){return{getToken:e=>BI(n,e),addTokenListener:e=>function CS(n,e,t,r){const{app:s}=n,u=Mi(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Gm(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),tR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>tR(n))}(n,"INTERNAL",e),removeTokenListener:e=>TS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,jr.registerVersion)("@firebase/app-check","0.6.0")}();class qm{constructor(){return(0,qt.vb)("app-check")}}typeof window<"u"&&window,P(9260);const fR=new c.OlP("angularfire2.auth.use-emulator"),pR=new c.OlP("angularfire2.auth.settings"),gR=new c.OlP("angularfire2.auth.tenant-id"),mR=new c.OlP("angularfire2.auth.langugage-code"),yR=new c.OlP("angularfire2.auth.use-device-language"),_R=new c.OlP("angularfire.auth.persistence"),vR=(n,e,t,r,s,u,d,g)=>(0,$r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),d)for(const[I,A]of Object.entries(d))_.settings[I]=A;return g&&_.setPersistence(g),_},[t,r,s,u,d,g]);let RS=(()=>{class n{constructor(t,r,s,u,d,g,_,I,A,M,j,Q){const oe=new to.x,Oe=gt(void 0).pipe((0,PI.Q)(d.outsideAngular),sr(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,9568)))),(0,St.U)(()=>(0,$r.on)(t,u,r)),(0,St.U)(Pe=>vR(Pe,u,g,I,A,M,_,j)),H1({bufferSize:1,refCount:!1}));if(bo(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Oe.pipe(ka()).subscribe();const At=Oe.pipe(sr(ft=>ft.getRedirectResult().then(Mt=>Mt,()=>null)),qt.iC,H1({bufferSize:1,refCount:!1})),xt=Oe.pipe(sr(ft=>new Qr.y(Mt=>({unsubscribe:u.runOutsideAngular(()=>ft.onAuthStateChanged($t=>Mt.next($t),$t=>Mt.error($t),()=>Mt.complete()))})))),mt=Oe.pipe(sr(ft=>new Qr.y(Mt=>({unsubscribe:u.runOutsideAngular(()=>ft.onIdTokenChanged($t=>Mt.next($t),$t=>Mt.error($t),()=>Mt.complete()))}))));this.authState=At.pipe(G1(xt),(0,cS.R)(d.outsideAngular),(0,PI.Q)(d.insideAngular)),this.user=At.pipe(G1(mt),(0,cS.R)(d.outsideAngular),(0,PI.Q)(d.insideAngular)),this.idToken=this.user.pipe(sr(ft=>ft?(0,rn.D)(ft.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(sr(ft=>ft?(0,rn.D)(ft.getIdTokenResult()):gt(null))),this.credential=(0,JO.T)(At,oe,this.authState.pipe(no(ft=>!ft))).pipe((0,St.U)(ft=>ft?.user?ft:null),(0,cS.R)(d.outsideAngular),(0,PI.Q)(d.insideAngular))}return(0,$r.pX)(this,Oe,u,{spy:{apply:(Pe,At,xt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&xt.then(mt=>oe.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($r.Dh),c.LFG($r.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(qt.HU),c.LFG(fR,8),c.LFG(pR,8),c.LFG(gR,8),c.LFG(mR,8),c.LFG(yR,8),c.LFG(_R,8),c.LFG(qm,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function wR(n,e){return function XP(n,e=pE.z){return new Qr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function NS(n,e){return wR(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function jI(n,e){return NS(n,e).pipe(Jn(void 0),ec(),(0,St.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const _=s.find(A=>A.doc.ref.isEqual(d.ref)),I=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function ER(n,e,t){return jI(n,t).pipe(Wp((r,s)=>function tF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function nF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function hi(n,e=fd.y){return n=n??tc,(0,Xr.e)((t,r)=>{let s,u=!0;t.subscribe((0,rr.x)(r,d=>{const g=e(d);(u||!n(s,g))&&(u=!1,s=g,r.next(d))}))})}(),(0,St.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function kS(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function bR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class IR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Jn(void 0),ec(),no(([r,s])=>s.length>0||!r),(0,St.U)(([r,s])=>s),qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wp((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bR(e);return ER(this.query,t,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(e={}){return NS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),qt.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(qt.iC)}add(e){return this.ref.add(e)}doc(e){return new DR(this.ref.doc(e),this.afs)}}class DR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=CR(r,t);return new IR(s,u,this.afs)}snapshotChanges(){return function eF(n,e){return wR(n,e).pipe(Jn(void 0),ec(),(0,St.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(qt.iC)}}class rF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jI(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),no(t=>t.length>0),qt.iC):jI(this.query,this.afs.schedulers.outsideAngular).pipe(qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wp((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bR(e);return ER(this.query,t,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(e={}){return NS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),qt.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(qt.iC)}}const iF=new c.OlP("angularfire2.enableFirestorePersistence"),sF=new c.OlP("angularfire2.firestore.persistenceSettings"),oF=new c.OlP("angularfire2.firestore.settings"),aF=new c.OlP("angularfire2.firestore.use-emulator");function CR(n,e=(t=>t)){return{query:e(n),ref:n}}let HI=(()=>{class n{constructor(t,r,s,u,d,g,_,I,A,M,j,Q,oe,Oe,Pe,At,xt){this.schedulers=_;const mt=(0,$r.on)(t,g,r),ft=A;M&&vR(mt,g,j,oe,Oe,Pe,Q,At),[this.firestore,this.persistenceEnabled$]=(0,$r.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const Mt=g.runOutsideAngular(()=>mt.firestore());if(u&&Mt.settings(u),ft&&Mt.useEmulator(...ft),s&&!bo(d)){const $t=()=>{try{return(0,rn.D)(Mt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(wr){return typeof console<"u"&&console.warn(wr),gt(!1)}};return[Mt,g.runOutsideAngular($t)]}return[Mt,gt(!1)]},[u,ft,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=CR(s,r),g=this.schedulers.ngZone.run(()=>u);return new IR(g,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new rF(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new DR(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($r.Dh),c.LFG($r.xv,8),c.LFG(iF,8),c.LFG(oF,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(qt.HU),c.LFG(sF,8),c.LFG(aF,8),c.LFG(RS,8),c.LFG(fR,8),c.LFG(pR,8),c.LFG(gR,8),c.LFG(mR,8),c.LFG(yR,8),c.LFG(_R,8),c.LFG(qm,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const TR="firebasestorage.googleapis.com",AR="storageBucket";class vr extends Ot.ZR{constructor(e,t,r=0){super(OS(e),`Firebase Storage: ${t} (${OS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return OS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function OS(n){return"storage/"+n}function PS(){return new vr("unknown","An unknown error occurred, please check the error payload for server response.")}function SR(){return new vr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function xR(){return new vr("canceled","User canceled the upload/download.")}function MR(){return new vr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function zm(n){return new vr("invalid-argument",n)}function RR(){return new vr("app-deleted","The Firebase app was deleted.")}function NR(n){return new vr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function M0(n,e){return new vr("invalid-format","String does not match format '"+n+"': "+e)}function R0(n){throw new vr("internal-error","Internal error: "+n)}class zi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zi.makeFromUrl(e,t)}catch{return new zi(e,"")}if(""===r.path)return r;throw function _F(n){return new vr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+s+"(/(.*))?$","i");function I(ft){ft.path_=decodeURIComponent(ft.path)}const M=t.replace(/[.]/g,"\\."),mt=[{regex:g,indices:{bucket:1,path:3},postModify:function u(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===TR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let ft=0;ft<mt.length;ft++){const Mt=mt[ft],$t=Mt.regex.exec(e);if($t){let Ka=$t[Mt.indices.path];Ka||(Ka=""),r=new zi($t[Mt.indices.bucket],Ka),Mt.postModify(r);break}}if(null==r)throw function yF(n){return new vr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class IF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function GI(n){return"string"==typeof n||n instanceof String}function kR(n){return FS()&&n instanceof Blob}function FS(){return typeof Blob<"u"&&!(0,Ot.UG)()}function LS(n,e,t,r){if(r<e)throw zm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw zm(`Invalid value for '${n}'. Expected ${t} or less.`)}function Cc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function OR(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var vh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(vh||(vh={})),vh))();function PR(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class xF{constructor(e,t,r,s,u,d,g,_,I,A,M,j=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=_,this.timeout_=I,this.progressCallback_=A,this.connectionFactory_=M,this.retry=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,oe)=>{this.resolve_=Q,this.reject_=oe,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,d=this.reject_,g=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());!function TF(n){return void 0!==n}(_)?u():u(_)}catch(_){d(_)}else if(null!==g){const _=PS();_.serverResponse=g.getErrorText(),d(this.errorCallback_?this.errorCallback_(g,_):_)}else d(s.canceled?this.appDelete_?RR():xR():SR())};this.canceled_?t(0,new qI(!1,null,!0)):this.backoffId_=function DF(n,e,t){let r=1,s=null,u=null,d=!1,g=0;function _(){return 2===g}let I=!1;function A(...Pe){I||(I=!0,e.apply(null,Pe))}function M(Pe){s=setTimeout(()=>{s=null,n(Q,_())},Pe)}function j(){u&&clearTimeout(u)}function Q(Pe,...At){if(I)return void j();if(Pe)return j(),void A.call(null,Pe,...At);if(_()||d)return j(),void A.call(null,Pe,...At);let mt;r<64&&(r*=2),1===g?(g=2,mt=0):mt=1e3*(r+Math.random()),M(mt)}let oe=!1;function Oe(Pe){oe||(oe=!0,j(),!I&&(null!==s?(Pe||(g=2),clearTimeout(s),M(0)):Pe||(g=1)))}return M(0),u=setTimeout(()=>{d=!0,Oe(!0)},t),Oe}((r,s)=>{if(s)return void r(!1,new qI(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const g=u.getErrorCode()===vh.NO_ERROR,_=u.getStatus();if((!g||PR(_,this.additionalRetryCodes_))&&this.retry){const A=u.getErrorCode()===vh.ABORT;return void r(!1,new qI(!1,null,A))}const I=-1!==this.successCodes_.indexOf(_);r(!0,new qI(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function CF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class qI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function FF(...n){const e=function PF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(FS())return new Blob(n);throw new vr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class US{constructor(e,t){this.data=e,this.contentType=t||null}}function VS(n,e){switch(n){case fo.RAW:return new US(FR(e));case fo.BASE64:case fo.BASE64URL:return new US(LR(n,e));case fo.DATA_URL:return new US(function BF(n){const e=new UR(n);return e.base64?LR(fo.BASE64,e.rest):function VF(n){let e;try{e=decodeURIComponent(n)}catch{throw M0(fo.DATA_URL,"Malformed data URL.")}return FR(e)}(e.rest)}(e),function $F(n){return new UR(n).contentType}(e))}throw PS()}function FR(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function LR(n,e){switch(n){case fo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw M0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw M0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function UF(n){if(typeof atob>"u")throw function bF(n){return new vr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:M0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class UR{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw M0(fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function jF(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class tl{constructor(e,t){let r=0,s="";kR(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(kR(this.data_)){const s=function LF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new tl(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new tl(r,!0)}}static getBlob(...e){if(FS()){const t=e.map(r=>r instanceof tl?r.data_:r);return new tl(FF.apply(null,t))}{const t=e.map(d=>GI(d)?VS(fo.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let g=0;g<d.length;g++)s[u++]=d[g]}),new tl(s,!0)}}uploadData(){return this.data_}}function BS(n){let e;try{e=JSON.parse(n)}catch{return null}return function SF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function VR(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function qF(n,e){return e}class ys{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||qF}}let zI=null;function N0(){if(zI)return zI;const n=[];n.push(new ys("bucket")),n.push(new ys("generation")),n.push(new ys("metageneration")),n.push(new ys("name","fullPath",!0));const t=new ys("name");t.xform=function e(u,d){return function zF(n){return!GI(n)||n.length<2?n:VR(n)}(d)},n.push(t);const s=new ys("size");return s.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(s),n.push(new ys("timeCreated")),n.push(new ys("updated")),n.push(new ys("md5Hash",null,!0)),n.push(new ys("cacheControl",null,!0)),n.push(new ys("contentDisposition",null,!0)),n.push(new ys("contentEncoding",null,!0)),n.push(new ys("contentLanguage",null,!0)),n.push(new ys("contentType",null,!0)),n.push(new ys("metadata","customMetadata",!0)),zI=n,zI}function BR(n,e,t){const r=BS(e);return null===r?null:function ZF(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function WF(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new zi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function $S(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const $R="prefixes";class nl{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rl(n){if(!n)throw PS()}function WI(n,e){return function t(r,s){const u=BR(n,s,e);return rl(null!==u),u}}function Wm(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function gF(){return new vr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function pF(){return new vr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function fF(n){return new vr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function mF(n){return new vr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function k0(n){const e=Wm(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function hF(n){return new vr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function HR(n,e,t){const s=Cc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,g=new nl(s,"GET",WI(n,t),d);return g.errorHandler=k0(e),g}function eL(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const g=Cc(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,A=new nl(g,"GET",function JF(n,e){return function t(r,s){const u=function QF(n,e,t){const r=BS(t);return null===r?null:function YF(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[$R])for(const s of t[$R]){const u=s.replace(/\/$/,""),d=n._makeStorageReference(new zi(e,u));r.prefixes.push(d)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new zi(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return rl(null!==u),u}}(n,e.bucket),I);return A.urlParams=u,A.errorHandler=Wm(e),A}function qR(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ZI{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function jS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{rl(!1)}return rl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const uL={STATE_CHANGED:"state_changed"},_s={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function HS(n){switch(n){case"running":case"pausing":case"canceling":return _s.RUNNING;case"paused":return _s.PAUSED;case"success":return _s.SUCCESS;case"canceled":return _s.CANCELED;default:return _s.ERROR}}class lL{constructor(e,t,r){if(function AF(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Zm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class dL extends class cL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw R0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw R0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw R0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw R0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw R0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Za(){return new dL}class KR{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=N0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(PR(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=SR()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function sL(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d=qR(e,r,s),g={name:d.fullPath},_=Cc(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},M=$S(d,t),oe=new nl(_,"POST",function Q(Oe){let Pe;jS(Oe);try{Pe=Oe.getResponseHeader("X-Goog-Upload-URL")}catch{rl(!1)}return rl(GI(Pe)),Pe},n.maxUploadRetryTime);return oe.urlParams=g,oe.headers=A,oe.body=M,oe.errorHandler=Wm(e),oe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Za,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function oL(n,e,t,r){const _=new nl(t,"POST",function u(I){const A=jS(I,["active","final"]);let M=null;try{M=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch{rl(!1)}M||rl(!1);const j=Number(M);return rl(!isNaN(j)),new ZI(j,r.size(),"final"===A)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Wm(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Za,t,r);this._request=u,u.getPromise().then(d=>{this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ZI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let d;try{d=function aL(n,e,t,r,s,u,d,g){const _=new ZI(0,0);if(d?(_.current=d.current,_.total=d.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function wF(){return new vr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=_.total-_.current;let A=I;s>0&&(A=Math.min(A,s));const M=_.current;let Q="";Q=0===A?"finalize":I===A?"upload, finalize":"upload";const oe={"X-Goog-Upload-Command":Q,"X-Goog-Upload-Offset":`${_.current}`},Oe=r.slice(M,M+A);if(null===Oe)throw MR();const mt=new nl(t,"POST",function Pe(ft,Mt){const $t=jS(ft,["active","final"]),wr=_.current+A,Ka=r.size();let QS;return QS="final"===$t?WI(e,u)(ft,Mt):null,new ZI(wr,Ka,"final"===$t,QS)},e.maxUploadRetryTime);return mt.headers=oe,mt.body=Oe.uploadData(),mt.progressCallback=g||null,mt.errorHandler=Wm(n),mt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const g=this._ref.storage._makeRequest(d,Za,s,u,!1);this._request=g,g.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=HR(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Za,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function zR(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},_=function g(){let mt="";for(let ft=0;ft<2;ft++)mt+=Math.random().toString().slice(2);return mt}();d["Content-Type"]="multipart/related; boundary="+_;const I=qR(e,r,s),A=$S(I,t),Q=tl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+_+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===Q)throw MR();const oe={name:I.fullPath},Oe=Cc(u,n.host,n._protocol),At=n.maxUploadRetryTime,xt=new nl(Oe,"POST",WI(n,t),At);return xt.urlParams=oe,xt.headers=d,xt.body=Q.uploadData(),xt.errorHandler=Wm(e),xt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Za,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=xR(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=HS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new lL(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(HS(this._state)){case _s.SUCCESS:Zm(this._resolve.bind(null,this.snapshot))();break;case _s.CANCELED:case _s.ERROR:Zm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(HS(this._state)){case _s.RUNNING:case _s.PAUSED:e.next&&Zm(e.next.bind(e,this.snapshot))();break;case _s.SUCCESS:e.complete&&Zm(e.complete.bind(e))();break;default:e.error&&Zm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class vp{constructor(e,t){this._service=e,this._location=t instanceof zi?t:zi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vp(e,t)}get root(){const e=new zi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VR(this._location.path)}get storage(){return this._service}get parent(){const e=function HF(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new zi(this._location.bucket,e);return new vp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw NR(e)}}function QR(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,_e.Z)(function*(n,e,t){const s=yield JR(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield QR(n,e,s.nextPageToken))}),GS.apply(this,arguments)}function JR(n,e){null!=e&&"number"==typeof e.maxResults&&LS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Za)}function IL(n){n._throwIfRoot("getDownloadURL");const e=function tL(n,e,t){const s=Cc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,g=new nl(s,"GET",function XF(n,e){return function t(r,s){const u=BR(n,s,e);return rl(null!==u),function KF(n,e,t,r){const s=BS(e);if(null===s||!GI(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(I=>{const M=n.fullPath;return Cc("/b/"+d(n.bucket)+"/o/"+d(M),t,r)+OR({alt:"media",token:I})})[0]}(u,s,n.host,n._protocol)}}(n,t),d);return g.errorHandler=k0(e),g}(n.storage,n._location,N0());return n.storage.makeRequestWithTokens(e,Za).then(t=>{if(null===t)throw function EF(){return new vr("no-download-url","The given file does not have any download URLs.")}();return t})}function XR(n,e){const t=function GF(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new zi(n._location.bucket,t);return new vp(n.storage,r)}function eN(n,e){if(n instanceof qS){const t=n;if(null==t._bucket)throw function vF(){return new vr("no-default-bucket","No default bucket found. Did you set the '"+AR+"' property when initializing the app?")}();const r=new vp(t,t._bucket);return null!=e?eN(r,e):r}return void 0!==e?XR(n,e):n}function AL(n,e){if(e&&function CL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof qS)return function TL(n,e){return new vp(n,e)}(n,e);throw zm("To use ref(service, url), the first argument must be a Storage instance.")}return eN(n,e)}function tN(n,e){const t=e?.[AR];return null==t?null:zi.makeFromBucketSpec(t,n)}class qS{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=TR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?zi.makeFromBucketSpec(s,this._host):tN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?zi.makeFromBucketSpec(this._url,e):tN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vp(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new IF(RR());{const d=function OF(n,e,t,r,s,u,d=!0){const g=OR(n.urlParams),_=n.url+g,I=Object.assign({},n.headers);return function NF(n,e){e&&(n["X-Firebase-GMPID"]=e)}(I,e),function MF(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(I,t),function RF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(I,u),function kF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(I,r),new xF(_,n.method,I,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,d)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const nN="@firebase/storage";function sN(n,e){return AL(n=(0,Ot.m9)(n),e)}function LL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new qS(t,r,s,e,jr.SDK_VERSION)}!function UL(){(0,jr._registerComponent)(new ao.wA("storage",LL,"PUBLIC").setMultipleInstances(!0)),(0,jr.registerVersion)(nN,"0.10.0",""),(0,jr.registerVersion)(nN,"0.10.0","esm2017")}();class KI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class aN{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new KI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new KI(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?d=>t(new KI(d,this,this._ref)):{next:t.next?d=>t.next(new KI(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class uN{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Tc(e,this._service))}get items(){return this._delegate.items.map(e=>new Tc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Tc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function FL(n,e){return XR(n,e)}(this._delegate,e);return new Tc(t,this.storage)}get root(){return new Tc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Tc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new aN(function xL(n,e,t){return function _L(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new KR(n,new tl(e),t)}(n=(0,Ot.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=fo.RAW,r){this._throwIfRoot("putString");const s=VS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new aN(new KR(this._delegate,new tl(s.data,!0),u),this)}listAll(){return function kL(n){return function wL(n){const e={prefixes:[],items:[]};return QR(n,e).then(()=>e)}(n=(0,Ot.m9)(n))}(this._delegate).then(e=>new uN(e,this.storage))}list(e){return function NL(n,e){return JR(n=(0,Ot.m9)(n),e)}(this._delegate,e||void 0).then(t=>new uN(t,this.storage))}getMetadata(){return function ML(n){return function EL(n){n._throwIfRoot("getMetadata");const e=HR(n.storage,n._location,N0());return n.storage.makeRequestWithTokens(e,Za)}(n=(0,Ot.m9)(n))}(this._delegate)}updateMetadata(e){return function RL(n,e){return function bL(n,e){n._throwIfRoot("updateMetadata");const t=function nL(n,e,t,r){const u=Cc(e.fullServerUrl(),n.host,n._protocol),g=$S(t,r),I=n.maxOperationRetryTime,A=new nl(u,"PATCH",WI(n,r),I);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=g,A.errorHandler=k0(e),A}(n.storage,n._location,e,N0());return n.storage.makeRequestWithTokens(t,Za)}(n=(0,Ot.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function OL(n){return IL(n=(0,Ot.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function PL(n){return function DL(n){n._throwIfRoot("deleteObject");const e=function rL(n,e){const r=Cc(e.fullServerUrl(),n.host,n._protocol),g=new nl(r,"DELETE",function d(_,I){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=k0(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Za)}(n=(0,Ot.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw NR(e)}}class lN{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(cN(e))throw zm("ref() expected a child path but got a URL, use refFromURL instead.");return new Tc(sN(this._delegate,e),this)}refFromURL(e){if(!cN(e))throw zm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zi.makeFromUrl(e,this._delegate.host)}catch{throw zm("refFromUrl() expected a valid full URL but got an invalid one.")}return new Tc(sN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function oN(n,e,t,r={}){!function SL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Ot.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function cN(n){return/^[A-Za-z]+:\/\//.test(n)}function jL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new lN(t,r)}function dN(n){const e=function GL(n){return new Qr.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function uF(n,e=pE.z){return(0,Xr.e)((t,r)=>{let s=null,u=null,d=null;const g=()=>{if(s){s.unsubscribe(),s=null;const I=u;u=null,r.next(I)}};function _(){const I=d+n,A=e.now();if(A<I)return s=this.schedule(void 0,I-A),void r.add(s);g()}t.subscribe((0,rr.x)(r,I=>{u=I,d=e.now(),s||(s=e.schedule(_,n),r.add(s))},()=>{g(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,St.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function YI(n){return{getDownloadURL:()=>gt(void 0).pipe(qt.fc,sr(()=>n.getDownloadURL()),qt.iC),getMetadata:()=>gt(void 0).pipe(qt.fc,sr(()=>n.getMetadata()),qt.iC),delete:()=>(0,rn.D)(n.delete()),child:e=>YI(n.child(e)),updateMetadata:e=>(0,rn.D)(n.updateMetadata(e)),put:(e,t)=>dN(n.put(e,t)),putString:(e,t,r)=>dN(n.putString(e,t,r)),list:e=>(0,rn.D)(n.list(e)),listAll:()=>(0,rn.D)(n.listAll())}}!function HL(n){const e={TaskState:_s,TaskEvent:uL,StringFormat:fo,Storage:lN,Reference:Tc};n.INTERNAL.registerComponent(new ao.wA("storage-compat",jL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.0")}(Ig.Z);const qL=new c.OlP("angularfire2.storageBucket"),zL=new c.OlP("angularfire2.storage.maxUploadRetryTime"),WL=new c.OlP("angularfire2.storage.maxOperationRetryTime"),ZL=new c.OlP("angularfire2.storage.use-emulator");let wp=(()=>{class n{constructor(t,r,s,u,d,g,_,I,A,M){const j=(0,$r.on)(t,d,r);this.storage=(0,$r.cc)(`${j.name}.storage.${s}`,"AngularFireStorage",j.name,()=>{const Q=d.runOutsideAngular(()=>j.storage(s||void 0)),oe=A;return oe&&Q.useEmulator(...oe),_&&Q.setMaxUploadRetryTime(_),I&&Q.setMaxOperationRetryTime(I),Q},[_,I])}ref(t){return YI(this.storage.ref(t))}refFromURL(t){return YI(this.storage.refFromURL(t))}upload(t,r,s){return YI(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($r.Dh),c.LFG($r.xv,8),c.LFG(qL,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(qt.HU),c.LFG(zL,8),c.LFG(WL,8),c.LFG(ZL,8),c.LFG(qm,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KL=(()=>{class n{constructor(t,r){this.fireStore=t,this.fireStorage=r}saveMetaDataOfFile(t){const r={id:"",name:t.name,url:t.url,size:t.size};r.id=this.fireStore.createId(),this.fireStore.collection("/AttendUploads").add(r)}getAllFiles(){return this.fireStore.collection("/AttendUploads").snapshotChanges()}deleteFile(t){this.fireStore.collection("/AttendUploads").doc(t.id).delete(),this.fireStorage.ref("/AttendUploads/"+t.name).delete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(HI),c.LFG(wp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Km=(()=>{class n{constructor(t,r){this.afs=t,this.fireStorage=r}addUser(t){return t.id=this.afs.createId(),this.afs.collection("/User").add(t)}getAllUsers(){return this.afs.collection("/User").snapshotChanges()}deleteUser(t){this.afs.doc("/User/"+t.id).delete()}updateUser(t){this.deleteUser(t),this.addUser(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(HI),c.LFG(wp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"th"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td")(6,"a",20),c._uU(7,"Download"),c.qZA(),c.TgZ(8,"a",21),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.deleteFile(u))}),c._uU(9,"Delete"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.size),c.xp6(2),c.s9C("href",t.url,c.LSH)}}const QL=function(n){return{width:n}};let JL=(()=>{class n{constructor(t,r,s){this.fileService=t,this.fireStorage=r,this.dataService=s,this.percentage=0,this.listOfFiles=[]}ngOnInit(){this.getAllFiles()}selectFile(t){this.selectedFiles=t.target.files}uploadFile(){this.currentFileUpload=new __(this.selectedFiles[0]);const r=this.fireStorage.ref("AttendUploads/"+this.currentFileUpload.file.name);r.put(this.selectedFiles[0]).snapshotChanges().pipe(Vl(()=>{r.getDownloadURL().subscribe(u=>{this.currentFileUpload.id="",this.currentFileUpload.url=u,this.currentFileUpload.size=this.currentFileUpload.file.size,this.currentFileUpload.name=this.currentFileUpload.file.name,this.fileService.saveMetaDataOfFile(this.currentFileUpload)}),this.ngOnInit()})).subscribe(u=>{this.percentage=100*u.bytesTransferred/u.totalBytes},u=>{console.log("Error occured")})}getAllFiles(){this.fileService.getAllFiles().subscribe(t=>{this.listOfFiles=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{console.log("Error occured while fetching file meta data")})}deleteFile(t){window.confirm("Are you sure you want to delete "+t.name+"?")&&(this.fileService.deleteFile(t),this.ngOnInit())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(KL),c.Y36(wp),c.Y36(Km))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-attendance-file"]],decls:33,vars:7,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],[1,"mt-1","mb-2"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right"],["href","teacherpage"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow"],[1,"card-body"],["type","file",1,"text-nowrap","text-truncate","file",3,"change"],["type","button",1,"btn","btn-outline-warning",3,"disabled","click"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"],[1,"col-md-8"],[1,"mb-3","mt-3"],[1,"text-primary"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","download","",1,"btn","btn-outline-info",3,"href"],["type","button",1,"btn","btn-outline-danger","ms-2",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"img",3),c.TgZ(4,"button",4)(5,"a",5),c._uU(6,"back"),c.qZA()()(),c.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"input",10),c.NdJ("change",function(u){return r.selectFile(u)}),c.qZA(),c.TgZ(13,"button",11),c.NdJ("click",function(){return r.uploadFile()}),c._uU(14,"Upload"),c.qZA()(),c.TgZ(15,"div",12)(16,"div",13),c._uU(17),c.qZA()()()()(),c.TgZ(18,"div",14)(19,"div",15)(20,"h4",16),c._uU(21,"Attendance File list"),c.qZA()(),c.TgZ(22,"table",17)(23,"thead")(24,"tr")(25,"th",18),c._uU(26,"File name"),c.qZA(),c.TgZ(27,"th",18),c._uU(28,"File size"),c.qZA(),c.TgZ(29,"th",18),c._uU(30,"Action"),c.qZA()()(),c.TgZ(31,"tbody"),c.YNc(32,YL,10,3,"tr",19),c.qZA()()()()()()),2&t&&(c.xp6(13),c.Q6J("disabled",!r.selectedFiles),c.xp6(3),c.Q6J("ngStyle",c.VKq(5,QL,r.percentage+"%")),c.uIk("aria-valuenow",r.percentage),c.xp6(1),c.hij(" ",r.percentage,"% "),c.xp6(15),c.Q6J("ngForOf",r.listOfFiles))},dependencies:[Vr,mo],styles:["div.container[_ngcontent-%COMP%]{float:left;width:85%;padding-left:10px;margin-top:10px;min-height:700px;margin-bottom:20px}"]}),n})();class XL{constructor(e){this.id="",this.name="",this.size=0,this.url="",this.file=e}}let hN=(()=>{class n{constructor(t,r){this.fireStore=t,this.fireStorage=r}saveMetaDataOfFile(t){const r={id:"",name:t.name,url:t.url,size:t.size};r.id=this.fireStore.createId(),this.fireStore.collection("/ARUploads").add(r)}getAllFiles(){return this.fireStore.collection("/ARUploads").snapshotChanges()}deleteFile(t){this.fireStore.collection("/ARUploads").doc(t.id).delete(),this.fireStorage.ref("/ARUploads/"+t.name).delete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(HI),c.LFG(wp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eU(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"th"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td")(6,"a",20),c._uU(7,"Download"),c.qZA(),c.TgZ(8,"a",21),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.deleteFile(u))}),c._uU(9,"Delete"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.size),c.xp6(2),c.s9C("href",t.url,c.LSH)}}const tU=function(n){return{width:n}};let nU=(()=>{class n{constructor(t,r){this.fileService=t,this.fireStorage=r,this.percentage=0,this.listOfFiles=[]}ngOnInit(){this.getAllFiles()}selectFile(t){this.selectedFiles=t.target.files}uploadFile(){this.currentFileUpload=new XL(this.selectedFiles[0]);const r=this.fireStorage.ref("ARUploads/"+this.currentFileUpload.file.name);r.put(this.selectedFiles[0]).snapshotChanges().pipe(Vl(()=>{r.getDownloadURL().subscribe(u=>{this.currentFileUpload.id="",this.currentFileUpload.url=u,this.currentFileUpload.size=this.currentFileUpload.file.size,this.currentFileUpload.name=this.currentFileUpload.file.name,this.fileService.saveMetaDataOfFile(this.currentFileUpload)}),this.ngOnInit()})).subscribe(u=>{this.percentage=100*u.bytesTransferred/u.totalBytes},u=>{console.log("Error occured")})}getAllFiles(){this.fileService.getAllFiles().subscribe(t=>{this.listOfFiles=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{console.log("Error occured while fetching file meta data")})}deleteFile(t){window.confirm("Are you sure you want to delete "+t.name+"?")&&(this.fileService.deleteFile(t),this.ngOnInit())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(hN),c.Y36(wp))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-a-r-file"]],decls:35,vars:7,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],[1,"mt-1","mb-2"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right"],["href","teacherpage"],[1,"row"],[1,"col","md-1","mt-4"],[1,"text-primary"],[1,"card","border-0","shadow"],[1,"card-body"],["type","file",1,"text-nowrap","text-truncate","file",3,"change"],["type","button",1,"btn","btn-outline-warning",3,"disabled","click"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"],[1,"col","md-8"],[1,"mb-3","mt-3"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","download","",1,"btn","btn-outline-info",3,"href"],["type","button",1,"btn","btn-outline-danger","ms-2",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"img",3),c.TgZ(4,"button",4)(5,"a",5),c._uU(6,"back"),c.qZA()()(),c.TgZ(7,"div",6)(8,"div",7)(9,"h4",8),c._uU(10,"Upload Assignment and Result"),c.qZA(),c.TgZ(11,"div",9)(12,"div",10)(13,"div")(14,"input",11),c.NdJ("change",function(u){return r.selectFile(u)}),c.qZA(),c.TgZ(15,"button",12),c.NdJ("click",function(){return r.uploadFile()}),c._uU(16,"Upload"),c.qZA()(),c.TgZ(17,"div",13)(18,"div",14),c._uU(19),c.qZA()()()(),c.TgZ(20,"div",15)(21,"div",16)(22,"h4",8),c._uU(23,"File list"),c.qZA()(),c.TgZ(24,"table",17)(25,"thead")(26,"tr")(27,"th",18),c._uU(28,"File name"),c.qZA(),c.TgZ(29,"th",18),c._uU(30,"File size"),c.qZA(),c.TgZ(31,"th",18),c._uU(32,"Action"),c.qZA()()(),c.TgZ(33,"tbody"),c.YNc(34,eU,10,3,"tr",19),c.qZA()()()()()()()),2&t&&(c.xp6(15),c.Q6J("disabled",!r.selectedFiles),c.xp6(3),c.Q6J("ngStyle",c.VKq(5,tU,r.percentage+"%")),c.uIk("aria-valuenow",r.percentage),c.xp6(1),c.hij(" ",r.percentage,"% "),c.xp6(15),c.Q6J("ngForOf",r.listOfFiles))},dependencies:[Vr,mo],styles:["div.container[_ngcontent-%COMP%]{float:left;width:70%;padding-left:10px;margin-top:10px;min-height:700px;margin-bottom:20px}"]}),n})(),Ym=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(s=>{localStorage.setItem("token","true"),"adminn"==r?this.router.navigate(["/dashboard"]):"Student"==r?(this.cemail=t,this.router.navigate(["/studentpage"])):"Teacher"==r&&this.router.navigate(["/teacherpage"])},s=>{alert(s.message),this.router.navigate(["/login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(s=>{alert("Registration Successful")},s=>{alert(s.message),this.router.navigate(["/register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("tokeen"),this.router.navigate(["/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/email-varify"])},r=>{alert("Something went wrong")})}sendEmailForVarification(t){console.log(t),t.sendEmailVerification().then(r=>{this.router.navigate(["/email-varify"])},r=>{alert("Something went wrong. Not able to send mail to your email.")})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(RS),c.LFG(mr))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rU(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td")(12,"button",34),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.disable(u))}),c._uU(13,"Disable"),c.qZA(),c.TgZ(14,"button",35),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.enable(u))}),c._uU(15,"Enable"),c.qZA(),c.TgZ(16,"button",36),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.deleteUser(u))}),c._uU(17,"Delete"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.first_name),c.xp6(2),c.Oqu(t.last_name),c.xp6(2),c.Oqu(t.email),c.xp6(2),c.Oqu(t.mobile),c.xp6(2),c.Oqu(t.category),c.xp6(2),c.Q6J("disabled",t.isDisabled),c.xp6(2),c.Q6J("disabled",!t.isDisabled)}}let iU=(()=>{class n{constructor(t,r){this.auth=t,this.data=r,this.currentuser=[],this.id="",this.fname="",this.lname="",this.email="",this.mobile="",this.category="",this.password="",this.usersList=[],this.userObj={id:"",first_name:"",last_name:"",email:"",mobile:"",category:"",isDisabled:!1}}logout(){this.auth.logout()}getAllUsers(){this.data.getAllUsers().subscribe(t=>{this.usersList=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{alert("Error while fetching user data")})}resetForm(){this.id="",this.fname="",this.lname="",this.email="",this.mobile="",this.category=""}addUser(){""!=this.fname&&""!=this.lname&&""!=this.mobile&&""!=this.email?(this.userObj.id="",this.userObj.email=this.email,this.userObj.first_name=this.fname,this.userObj.last_name=this.lname,this.userObj.mobile=this.mobile,this.userObj.category=this.category,this.auth.register(this.userObj.email,this.userObj.category),this.data.addUser(this.userObj),this.resetForm()):alert("Fill all input fields")}updateUser(){}deleteUser(t){window.confirm("Are you sure you want to delete "+t.first_name+" "+t.last_name+" ?")&&this.data.deleteUser(t)}ngOnInit(){this.getAllUsers()}disable(t){window.confirm("Are you sure you want to disable "+t.first_name+" "+t.last_name+" ?")&&(t.isDisabled=!0,this.data.updateUser(t))}enable(t){window.confirm("Are you sure you want to enable "+t.first_name+" "+t.last_name+" ?")&&(t.isDisabled=!1,this.data.updateUser(t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ym),c.Y36(Km))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dashboard"]],decls:66,vars:6,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container-fluid"],["type","button",1,"btn","btn-outline-success",2,"float","right",3,"click"],[1,"row"],[1,"col-md-4","mt-3"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","text-center"],[1,"text-center","text-danger"],[1,"form-floating","mb-3"],["type","text","id","firstName","name","firstname",1,"form-control",3,"ngModel","ngModelChange"],["for","firstname"],["type","text","id","lastName","name","lastName",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","mobile","name","mobile",1,"form-control",3,"ngModel","ngModelChange"],["for","mobile"],["name","category","id","category",1,"form-select",3,"ngModel","ngModelChange"],["value","Student"],["value","Teacher"],["for","category"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"col-md-8","mt-2"],[1,"text-danger"],[1,"card","p-3","shadow"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[1,"col-md-4","mt-5"],[1,"form-floating","mb-3","tetx-center"],["type","button",1,"btn","btn-outline-success","text-center"],["href","/t-file",1,"text-center","text-danger"],[1,"btn","btn-outline-danger",3,"disabled","click"],[1,"btn","btn-outline-success",3,"disabled","click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return r.logout()}),c._uU(3,"logout"),c.qZA(),c.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h5",7),c._uU(9,"WELCOME"),c.qZA()(),c.TgZ(10,"div",8)(11,"input",9),c.NdJ("ngModelChange",function(u){return r.fname=u}),c.qZA(),c.TgZ(12,"label",10),c._uU(13,"First name"),c.qZA()(),c.TgZ(14,"div",8)(15,"input",11),c.NdJ("ngModelChange",function(u){return r.lname=u}),c.qZA(),c.TgZ(16,"label",12),c._uU(17,"Last name"),c.qZA()(),c.TgZ(18,"div",8)(19,"input",13),c.NdJ("ngModelChange",function(u){return r.email=u}),c.qZA(),c.TgZ(20,"label",14),c._uU(21,"Email address"),c.qZA()(),c.TgZ(22,"div",8)(23,"input",15),c.NdJ("ngModelChange",function(u){return r.mobile=u}),c.qZA(),c.TgZ(24,"label",16),c._uU(25,"Mobile"),c.qZA()(),c.TgZ(26,"div",8)(27,"select",17),c.NdJ("ngModelChange",function(u){return r.category=u}),c.TgZ(28,"option",18),c._uU(29,"Student"),c.qZA(),c.TgZ(30,"option",19),c._uU(31,"Teacher"),c.qZA()(),c.TgZ(32,"label",20),c._uU(33,"Category"),c.qZA()(),c.TgZ(34,"button",21),c.NdJ("click",function(){return r.addUser()}),c._uU(35,"Add User"),c.qZA()()(),c.TgZ(36,"div",22)(37,"h5",23),c._uU(38," User List"),c.qZA(),c.TgZ(39,"div",24)(40,"div",25)(41,"table",26)(42,"thead")(43,"tr")(44,"th",27),c._uU(45,"First name"),c.qZA(),c.TgZ(46,"th",27),c._uU(47,"Last name"),c.qZA(),c.TgZ(48,"th",27),c._uU(49,"Email"),c.qZA(),c.TgZ(50,"th",27),c._uU(51,"Mobile"),c.qZA(),c.TgZ(52,"th",27),c._uU(53,"Category"),c.qZA(),c.TgZ(54,"th",28),c._uU(55,"Action"),c.qZA()()(),c.TgZ(56,"tbody"),c.YNc(57,rU,18,7,"tr",29),c.qZA()()()()(),c.TgZ(58,"div",30)(59,"div",5)(60,"div",31)(61,"h5",7),c._uU(62,"Schedule Timetable"),c.qZA(),c.TgZ(63,"button",32)(64,"a",33),c._uU(65,"Click Here"),c.qZA()()()()()()()()),2&t&&(c.xp6(11),c.Q6J("ngModel",r.fname),c.xp6(4),c.Q6J("ngModel",r.lname),c.xp6(4),c.Q6J("ngModel",r.email),c.xp6(4),c.Q6J("ngModel",r.mobile),c.xp6(4),c.Q6J("ngModel",r.category),c.xp6(30),c.Q6J("ngForOf",r.usersList))},dependencies:[Vr,hd,Gp,Li,dd,Ma,bu]}),n})(),sU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-email-varify"]],decls:14,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"div",2),c.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),c._uU(9,"Welcome"),c.qZA()(),c.TgZ(10,"div",6)(11,"p",8),c._uU(12,"Link has sent on your registered email. Please varify it."),c.qZA()()()()()(),c._UZ(13,"div",2),c.qZA()())},dependencies:[cd,pu,zo]}),n})(),oU=(()=>{class n{constructor(t){this.auth=t,this.email=""}ngOnInit(){}forgotPassword(){this.auth.forgotPassword(this.email),this.email=""}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ym))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-forgetpass"]],decls:23,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"div",2),c.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),c._uU(9,"Forgot password"),c.qZA()(),c.TgZ(10,"div",6)(11,"label",8),c._uU(12,"Email"),c.qZA(),c.TgZ(13,"input",9),c.NdJ("ngModelChange",function(u){return r.email=u}),c.qZA()(),c.TgZ(14,"button",10),c.NdJ("click",function(){return r.forgotPassword()}),c._uU(15,"Send Link"),c.qZA(),c.TgZ(16,"div",11)(17,"div",12)(18,"a",13),c._uU(19,"Back to "),c.TgZ(20,"span",14),c._uU(21,"Login"),c.qZA()()()()()()()(),c._UZ(22,"div",2),c.qZA()()),2&t&&(c.xp6(13),c.Q6J("ngModel",r.email))},dependencies:[cd,Li,Ma,pu,bu,zo]}),n})(),aU=(()=>{class n{constructor(t,r){this.auth=t,this.data=r,this.email="",this.password="",this.usersList=[]}getAllUsers(){this.data.getAllUsers().subscribe(t=>{this.usersList=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{alert("Error while fetching user data")})}ngOnInit(){this.getAllUsers()}login(){if(""==this.email)return void alert("Please enter email");if(""==this.password)return void alert("Please enter password");let t;for(t=0;t<this.usersList.length;t++)if(this.usersList[t].email==this.email&&1==this.usersList[t].isDisabled)return void alert("You are disabled contact to admin");this.auth.login(this.email,this.password),this.email="",this.password=""}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ym),c.Y36(Km))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:28,vars:2,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container-fluid"],[1,"row","mt-2"],[1,"col"],[1,"col-4"],[1,"card","shadow",2,"background-color","rgb(218, 239, 239)"],[1,"card-body"],[1,"mb-4"],[1,"container-fluid",2,"text-align","center"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],[1,"text-dark","text-center","text-muted"],[1,"mb-2"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-"],["href","/forgetpass",1,"text-danger","text-center",2,"text-decoration","none"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"div",3),c.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"form")(8,"div",7)(9,"div",8),c._UZ(10,"img",9),c.qZA(),c.TgZ(11,"h4",10),c._uU(12,"Login"),c.qZA()(),c.TgZ(13,"div",11)(14,"label",12),c._uU(15,"Email"),c.qZA(),c.TgZ(16,"input",13),c.NdJ("ngModelChange",function(u){return r.email=u}),c.qZA()(),c.TgZ(17,"div",14)(18,"label",15),c._uU(19,"Password"),c.qZA(),c.TgZ(20,"input",16),c.NdJ("ngModelChange",function(u){return r.password=u}),c.qZA()(),c.TgZ(21,"button",17),c.NdJ("click",function(){return r.login()}),c._uU(22,"Login"),c.qZA(),c.TgZ(23,"div",18)(24,"div",19)(25,"a",20),c._uU(26," Forgot Password ? "),c.qZA()()()()()()(),c._UZ(27,"div",3),c.qZA()()()),2&t&&(c.xp6(16),c.Q6J("ngModel",r.email),c.xp6(4),c.Q6J("ngModel",r.password))},dependencies:[cd,Li,Ma,pu,bu,zo],styles:["div.container-fluid[_ngcontent-%COMP%]{width:80%}"]}),n})(),uU=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}register(){""!=this.email?""!=this.password?(this.auth.register(this.email,this.password),this.email="",this.password=""):alert("Please enter password"):alert("Please enter email")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ym))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"div",2),c.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),c._uU(9,"Register"),c.qZA()(),c.TgZ(10,"div",6)(11,"label",8),c._uU(12,"Email"),c.qZA(),c.TgZ(13,"input",9),c.NdJ("ngModelChange",function(u){return r.email=u}),c.qZA()(),c.TgZ(14,"div",6)(15,"label",10),c._uU(16,"Password"),c.qZA(),c.TgZ(17,"input",11),c.NdJ("ngModelChange",function(u){return r.password=u}),c.qZA()(),c.TgZ(18,"button",12),c.NdJ("click",function(){return r.register()}),c._uU(19,"Register"),c.qZA(),c.TgZ(20,"div",13)(21,"div",14)(22,"a",15),c._uU(23,"Have an account ? "),c.TgZ(24,"span",16),c._uU(25,"Login"),c.qZA()()()()()()()(),c._UZ(26,"div",2),c.qZA()()),2&t&&(c.xp6(13),c.Q6J("ngModel",r.email),c.xp6(4),c.Q6J("ngModel",r.password))},dependencies:[cd,Li,Ma,pu,bu,zo]}),n})();function lU(n,e){if(1&n&&(c.TgZ(0,"tr")(1,"th"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td")(6,"a",15),c._uU(7,"Download"),c.qZA()()()),2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.size),c.xp6(2),c.s9C("href",t.url,c.LSH)}}let cU=(()=>{class n{constructor(t){this.fileService=t,this.listOfFiles=[]}ngOnInit(){this.getAllFiles()}getAllFiles(){this.fileService.getAllFiles().subscribe(t=>{this.listOfFiles=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{console.log("Error occured while fetching file meta data")})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(hN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-s-assigresult"]],decls:26,vars:1,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],[1,"mb-5"],[1,"mb-10","mt-5"],[1,"mt-1","mb-2"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right"],["href","studentpage"],[1,"col-md-18","mt-5"],[1,"mb-4","mt-5"],[1,"text-danger"],[1,"style1"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","download","",1,"btn","btn-outline-info",3,"href"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",1)(5,"div",4),c._UZ(6,"img",5),c.TgZ(7,"button",6)(8,"a",7),c._uU(9,"back"),c.qZA()()(),c.TgZ(10,"div",8)(11,"div",9)(12,"h4",10),c._uU(13,"Assignment and Result Files"),c.qZA(),c._UZ(14,"hr",11),c.qZA(),c.TgZ(15,"table",12)(16,"thead")(17,"tr")(18,"th",13),c._uU(19,"File name"),c.qZA(),c.TgZ(20,"th",13),c._uU(21,"File size"),c.qZA(),c.TgZ(22,"th",13),c._uU(23,"Action"),c.qZA()()(),c.TgZ(24,"tbody"),c.YNc(25,lU,8,3,"tr",14),c.qZA()()()()()()()()),2&t&&(c.xp6(25),c.Q6J("ngForOf",r.listOfFiles))},dependencies:[Vr],styles:["div.container[_ngcontent-%COMP%]{float:left;width:100%;padding-left:10px;margin-top:3px;min-height:700px;margin-bottom:20px}hr.style1[_ngcontent-%COMP%]{border-top:1px solid #8c8b8b}"]}),n})();function dU(n,e){if(1&n&&(c.TgZ(0,"div")(1,"p"),c._uU(2),c.qZA(),c.TgZ(3,"p"),c._uU(4),c.qZA(),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.TgZ(7,"p"),c._uU(8),c.qZA()()),2&n){const t=c.oxw();c.xp6(2),c.hij("FIRST NAME : ",t.fname,""),c.xp6(2),c.hij("LAST NAME : ",t.lname,""),c.xp6(2),c.hij("MOBILE: ",t.mobile,""),c.xp6(2),c.hij("EMAIL : ",t.mail,"")}}let hU=(()=>{class n{constructor(t){this.data=t,this.usersList=[],this.email="",this.fname="",this.lname="",this.mobile="",this.mail="",this.valid=!1}ngOnInit(){this.getAllUsers()}getAllUsers(){this.data.getAllUsers().subscribe(t=>{this.usersList=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{alert("Error while fetching user data")})}details(){let t;for(t=0;t<this.usersList.length;t++)this.usersList[t].email==this.email&&(this.fname=this.usersList[t].first_name,this.lname=this.usersList[t].last_name,this.mobile=this.usersList[t].mobile,this.mail=this.usersList[t].email,this.valid=!0);this.email=""}isvalid(){return this.valid}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Km))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-s-studentdetails"]],decls:22,vars:2,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right"],["href","studentpage"],[2,"width","40%"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","text-center"],[1,"text-center","text-danger"],[1,"form-floating","mb-3"],["type","email","id","mail","name","mail",1,"form-control",3,"ngModel","ngModelChange"],["for","mail"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"container-center",2,"background-color","rgb(205, 234, 234)"],[4,"ngIf"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div"),c._UZ(3,"img",2),c.TgZ(4,"button",3)(5,"a",4),c._uU(6,"back"),c.qZA()()(),c.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"h5",8),c._uU(11,"Enter Email"),c.qZA()(),c.TgZ(12,"div",9)(13,"input",10),c.NdJ("ngModelChange",function(u){return r.email=u}),c.qZA(),c.TgZ(14,"label",11),c._uU(15,"Email"),c.qZA()(),c.TgZ(16,"button",12),c.NdJ("click",function(){return r.details()}),c._uU(17,"Details"),c.qZA()()()(),c.TgZ(18,"div",13)(19,"h5"),c._uU(20,"STUDENT DETAILS"),c.qZA(),c.YNc(21,dU,9,4,"div",14),c.qZA()()),2&t&&(c.xp6(13),c.Q6J("ngModel",r.email),c.xp6(8),c.Q6J("ngIf",r.isvalid()))},dependencies:[Hn,Li,Ma,bu],styles:["div.container[_ngcontent-%COMP%]{float:left;width:100%;padding-left:10px;margin-top:5px;min-height:700px;margin-bottom:20px}div.container-center[_ngcontent-%COMP%]{background-color:#cdeaea;width:100%;height:100px}"]}),n})(),fN=(()=>{class n{constructor(t,r){this.fireStore=t,this.fireStorage=r}saveMetaDataOfFile(t){const r={id:"",name:t.name,url:t.url,size:t.size};r.id=this.fireStore.createId(),this.fireStore.collection("/Tuploads").add(r)}getAllFiles(){return this.fireStore.collection("/Tuploads").snapshotChanges()}deleteFile(t){this.fireStore.collection("/Tuploads").doc(t.id).delete(),this.fireStorage.ref("/Tuploads/"+t.name).delete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(HI),c.LFG(wp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fU(n,e){if(1&n&&(c.TgZ(0,"tr")(1,"th"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td")(6,"a",15),c._uU(7,"Download"),c.qZA()()()),2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.size),c.xp6(2),c.s9C("href",t.url,c.LSH)}}let pU=(()=>{class n{constructor(t){this.timefileService=t,this.listOfFiles=[]}ngOnInit(){this.getAllFiles()}getAllFiles(){this.timefileService.getAllFiles().subscribe(t=>{this.listOfFiles=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{console.log("Error occured while fetching file meta data")})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(fN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-s-timetable"]],decls:26,vars:1,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],[1,"mb-5"],[1,"mb-18","mt-5"],[1,"mt-1","mb-2"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right"],["href","studentpage"],[1,"col-md-13","mt-5"],[1,"mb-4","mt-5"],[1,"text-danger"],[1,"style1"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","download","",1,"btn","btn-outline-info",3,"href"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",1)(5,"div",4),c._UZ(6,"img",5),c.TgZ(7,"button",6)(8,"a",7),c._uU(9,"back"),c.qZA()()(),c.TgZ(10,"div",8)(11,"div",9)(12,"h4",10),c._uU(13,"Timetable Files"),c.qZA(),c._UZ(14,"hr",11),c.qZA(),c.TgZ(15,"table",12)(16,"thead")(17,"tr")(18,"th",13),c._uU(19,"File name"),c.qZA(),c.TgZ(20,"th",13),c._uU(21,"File size"),c.qZA(),c.TgZ(22,"th",13),c._uU(23,"Action"),c.qZA()()(),c.TgZ(24,"tbody"),c.YNc(25,fU,8,3,"tr",14),c.qZA()()()()()()()()),2&t&&(c.xp6(25),c.Q6J("ngForOf",r.listOfFiles))},dependencies:[Vr],styles:["div.container[_ngcontent-%COMP%]{float:left;width:100%;padding-left:10px;margin-top:10px;min-height:700px;margin-bottom:20px}hr.style1[_ngcontent-%COMP%]{border-top:1px solid #8c8b8b}"]}),n})(),gU=(()=>{class n{constructor(t){this.auth=t}ngOnInit(){}logout(){this.auth.logout()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ym))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-studentpage"]],decls:33,vars:0,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],[1,"mt-1","mb-2"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right",3,"click"],[1,"row"],[1,"col-md-5","mt-5"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","text-center"],[1,"text-center","text-danger"],["type","button",1,"btn","btn-outline-success","text-center"],["href","/s-studentdetails",1,"text-center","text-warning"],["href","/s-assigresult",1,"text-center","text-warning"],["href","/s-timetable",1,"text-center","text-warning"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"img",3),c.TgZ(4,"button",4),c.NdJ("click",function(){return r.logout()}),c._uU(5,"Logout"),c.qZA()(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5",9),c._uU(11,"Student Details"),c.qZA(),c.TgZ(12,"button",10)(13,"a",11),c._uU(14,"Click Here"),c.qZA()()()()()(),c.TgZ(15,"div",5)(16,"div",6)(17,"div",7)(18,"div",8)(19,"h5",9),c._uU(20,"Download Assignment and Result"),c.qZA(),c.TgZ(21,"button",10)(22,"a",12),c._uU(23,"Click Here"),c.qZA()()()()()(),c.TgZ(24,"div",5)(25,"div",6)(26,"div",7)(27,"div",8)(28,"h5",9),c._uU(29,"Download Timetable"),c.qZA(),c.TgZ(30,"button",10)(31,"a",13),c._uU(32,"Click Here"),c.qZA()()()()()()()())},styles:["div.container-fluid[_ngcontent-%COMP%]{width:90%}div.container[_ngcontent-%COMP%]{float:left;width:70%;padding-left:10px;margin-top:10px;min-height:700px;margin-bottom:20px}"]}),n})();class mU{constructor(e){this.id="",this.name="",this.size=0,this.url="",this.file=e}}function yU(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"th"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td")(6,"a",20),c._uU(7,"Download"),c.qZA(),c.TgZ(8,"a",21),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.deleteFile(u))}),c._uU(9,"Delete"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.size),c.xp6(2),c.s9C("href",t.url,c.LSH)}}const _U=function(n){return{width:n}};let vU=(()=>{class n{constructor(t,r,s){this.timefileService=t,this.fireStorage=r,this.dataService=s,this.percentage=0,this.listOfFiles=[]}ngOnInit(){this.getAllFiles()}selectFile(t){this.selectedFiles=t.target.files}uploadFile(){this.currentFileUpload=new mU(this.selectedFiles[0]);const r=this.fireStorage.ref("Tuploads/"+this.currentFileUpload.file.name);r.put(this.selectedFiles[0]).snapshotChanges().pipe(Vl(()=>{r.getDownloadURL().subscribe(u=>{this.currentFileUpload.id="",this.currentFileUpload.url=u,this.currentFileUpload.size=this.currentFileUpload.file.size,this.currentFileUpload.name=this.currentFileUpload.file.name,this.timefileService.saveMetaDataOfFile(this.currentFileUpload)}),this.ngOnInit()})).subscribe(u=>{this.percentage=100*u.bytesTransferred/u.totalBytes},u=>{console.log("Error occured")})}getAllFiles(){this.timefileService.getAllFiles().subscribe(t=>{this.listOfFiles=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{console.log("Error occured while fetching file meta data")})}deleteFile(t){window.confirm("Are you sure you want to delete "+t.name+"?")&&(this.timefileService.deleteFile(t),this.ngOnInit())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(fN),c.Y36(wp),c.Y36(Km))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-t-file"]],decls:35,vars:7,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],[1,"mt-1","mb-2"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right"],["href","dashboard"],[1,"row"],[1,"col"],[1,"text-primary"],[1,"card","border-0","shadow"],[1,"card-body"],["type","file",1,"text-nowrap","text-truncate","file",3,"change"],["type","button",1,"btn","btn-outline-success",3,"disabled","click"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"],[1,"col-md-8"],[1,"mb-3","mt-4"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","download","",1,"btn","btn-outline-info",3,"href"],["type","button",1,"btn","btn-outline-danger","ms-2",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"img",3),c.TgZ(4,"button",4)(5,"a",5),c._uU(6,"back"),c.qZA()()(),c.TgZ(7,"div",6)(8,"div",7)(9,"h4",8),c._uU(10,"Upload Timetable"),c.qZA(),c.TgZ(11,"div",9)(12,"div",10)(13,"div")(14,"input",11),c.NdJ("change",function(u){return r.selectFile(u)}),c.qZA(),c.TgZ(15,"button",12),c.NdJ("click",function(){return r.uploadFile()}),c._uU(16,"Upload"),c.qZA()(),c.TgZ(17,"div",13)(18,"div",14),c._uU(19),c.qZA()()()()(),c.TgZ(20,"div",15)(21,"div",16)(22,"h4",8),c._uU(23,"Timetable list"),c.qZA()(),c.TgZ(24,"table",17)(25,"thead")(26,"tr")(27,"th",18),c._uU(28,"File name"),c.qZA(),c.TgZ(29,"th",18),c._uU(30,"File size"),c.qZA(),c.TgZ(31,"th",18),c._uU(32,"Action"),c.qZA()()(),c.TgZ(33,"tbody"),c.YNc(34,yU,10,3,"tr",19),c.qZA()()()()()()),2&t&&(c.xp6(15),c.Q6J("disabled",!r.selectedFiles),c.xp6(3),c.Q6J("ngStyle",c.VKq(5,_U,r.percentage+"%")),c.uIk("aria-valuenow",r.percentage),c.xp6(1),c.hij(" ",r.percentage,"% "),c.xp6(15),c.Q6J("ngForOf",r.listOfFiles))},dependencies:[Vr,mo],styles:["div.container[_ngcontent-%COMP%]{float:left;width:1000px;padding-left:10px;margin-top:10px;min-height:700px;margin-bottom:20px}"]}),n})(),wU=(()=>{class n{transform(t,r){return r&&t?n.filter(t,r):t}static filter(t,r){const s=r.toLowerCase();function u(d,g){for(let _ in d)if(null!==d[_]&&null!=d[_]&&("object"==typeof d[_]&&u(d[_],g)||d[_].toString().toLowerCase().includes(s)))return!0;return!1}return t.filter(function(d){return u(d,r)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"filter",type:n,pure:!1}),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),EU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function bU(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.BQk()),2&n){const t=c.oxw().$implicit;c.xp6(2),c.Oqu(t.first_name),c.xp6(2),c.Oqu(t.last_name),c.xp6(2),c.Oqu(t.email),c.xp6(2),c.Oqu(t.mobile)}}function IU(n,e){if(1&n&&(c.TgZ(0,"tr"),c.YNc(1,bU,9,4,"ng-container",23),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","Student"==t.category)}}const DU=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:aU},{path:"dashboard",component:iU},{path:"register",component:uU},{path:"forgetpass",component:oU},{path:"email-varify",component:sU},{path:"t-file",component:vU},{path:"teacherpage",component:(()=>{class n{constructor(t,r){this.data=t,this.auth=r,this.usersList=[],this.search=""}getAllUsers(){this.data.getAllUsers().subscribe(t=>{this.usersList=t.map(r=>{const s=r.payload.doc.data();return s.id=r.payload.doc.id,s})},t=>{alert("Error while fetching user data")})}ngOnInit(){this.getAllUsers()}logout(){this.auth.logout()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Km),c.Y36(Ym))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-teacherpage"]],decls:46,vars:5,consts:[[1,"bg-image","d-flex","justify-content-center","align-items-center",2,"background-image","url('https://wallpaperaccess.com/full/1426875.jpg')","height","100vh"],[1,"container"],["src","https://th.bing.com/th/id/R.1b8b8499f1cf14270537011451e74ec4?rik=oDjS1bsnsQfNOA&riu=http%3a%2f%2feschool.msu.ac.th%2fapp%2fimg%2flogoeschool.png&ehk=nqS%2fPb6MTfTu1coUReKElPXWeRe195zIX8dYXk9fQ6Y%3d&risl=&pid=ImgRaw&r=0","width","70","height","80"],["type","button",1,"btn","btn-outline-success",2,"float","right",3,"click"],[1,"row"],[1,"col-md-4","mt-3"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","text-center"],[1,"text-center","text-danger"],["type","button",1,"btn","btn-outline-success","text-center"],["href","/a-r-file",1,"text-center","text-warning"],[1,"style1"],[1,"container-fluid"],["href","/attendance-file",1,"text-center","text-warning"],[1,"col-md-8","mt-2"],[1,"text-danger"],[1,"card","p-3","shadow"],[1,"card-body"],["for","search",2,"float","right"],["type","text","name","search",1,"text-center",2,"float","right",3,"ngModel","ngModelChange"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"nav"),c._UZ(3,"img",2),c.TgZ(4,"button",3),c.NdJ("click",function(){return r.logout()}),c._uU(5,"logout"),c.qZA()(),c.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h5",8),c._uU(11,"Upload Assignment and Result"),c.qZA(),c.TgZ(12,"button",9)(13,"a",10),c._uU(14,"Click Here"),c.qZA()()(),c._UZ(15,"hr",11),c.TgZ(16,"div",12)(17,"div",7)(18,"h5",8),c._uU(19,"Upload Attendance"),c.qZA(),c.TgZ(20,"button",9)(21,"a",13),c._uU(22,"Click Here"),c.qZA()()()()()(),c.TgZ(23,"div",14)(24,"h5",15),c._uU(25," Student List"),c.qZA(),c.TgZ(26,"div",16)(27,"div",17)(28,"label",18),c._uU(29,"#Search Here"),c.qZA(),c._UZ(30,"br"),c.TgZ(31,"input",19),c.NdJ("ngModelChange",function(u){return r.search=u}),c.qZA(),c.TgZ(32,"table",20)(33,"thead")(34,"tr")(35,"th",21),c._uU(36,"First name"),c.qZA(),c.TgZ(37,"th",21),c._uU(38,"Last name"),c.qZA(),c.TgZ(39,"th",21),c._uU(40,"Email"),c.qZA(),c.TgZ(41,"th",21),c._uU(42,"Mobile"),c.qZA()()(),c.TgZ(43,"tbody"),c.YNc(44,IU,2,1,"tr",22),c.ALo(45,"filter"),c.qZA()()()()()()()()),2&t&&(c.xp6(31),c.Q6J("ngModel",r.search),c.xp6(13),c.Q6J("ngForOf",c.xi3(45,2,r.usersList,r.search)))},dependencies:[Vr,Hn,Li,Ma,bu,wU],styles:["hr.style1[_ngcontent-%COMP%]{border-top:1px solid #8c8b8b}div.container[_ngcontent-%COMP%]{float:left;width:100%;padding-left:10px;margin-top:5px;min-height:700px;margin-bottom:20px}"]}),n})()},{path:"a-r-file",component:nU},{path:"studentpage",component:gU},{path:"s-assigresult",component:cU},{path:"attendance-file",component:JL},{path:"s-timetable",component:pU},{path:"s-studentdetails",component:hU}];let CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[fE.forRoot(DU),fE]}),n})(),TU=(()=>{class n{constructor(){this.title="bn-eschool"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[cf]}),n})();const zS_firebase={projectId:"bn-eschool-firebase",appId:"1:869444396948:web:4c3a9d6262c6ffbe9a9181",databaseURL:"https://bn-eschool-firebase-default-rtdb.firebaseio.com",storageBucket:"bn-eschool-firebase.appspot.com",apiKey:"AIzaSyBajNHnYakciQv5lQGaq4xp3jEdz5NLhRA",authDomain:"bn-eschool-firebase.firebaseapp.com",messagingSenderId:"869444396948"};var AU=P(552);class WS{constructor(e){return e}}class gN{constructor(){return(0,qt.vb)("auth")}}const ZS=new c.OlP("angularfire2.auth-instances");function xU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new WS(r)}}const MU={provide:gN,deps:[[new c.FiY,ZS]]},RU={provide:WS,useFactory:function SU(n,e){const t=(0,qt.JM)("auth",n,e);return t&&new WS(t)},deps:[[new c.FiY,ZS],Hm]};let NU=(()=>{class n{constructor(){(0,_h.KN)("angularfire",qt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[RU,MU]}),n})();function kU(n,...e){return{ngModule:NU,providers:[{provide:ZS,useFactory:xU(n),multi:!0,deps:[c.R0b,c.zs3,qt.HU,dS,[new c.FiY,qm],...e]}]}}const OU=(0,qt.u3)(AU.n,!0);class KS{constructor(e){return e}}const mN="firestore",YS=new c.OlP("angularfire2.firestore-instances");function LU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new KS(r)}}const UU={provide:class PU{constructor(){return(0,qt.vb)(mN)}},deps:[[new c.FiY,YS]]},VU={provide:KS,useFactory:function FU(n,e){const t=(0,qt.JM)(mN,n,e);return t&&new KS(t)},deps:[[new c.FiY,YS],Hm]};let BU=(()=>{class n{constructor(){(0,_h.KN)("angularfire",qt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[VU,UU]}),n})();function $U(n,...e){return{ngModule:BU,providers:[{provide:YS,useFactory:LU(n),multi:!0,deps:[c.R0b,c.zs3,qt.HU,dS,[new c.FiY,gN],[new c.FiY,qm],...e]}]}}const jU=(0,qt.u3)(Xk,!0);let HU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[TU]}),n.\u0275inj=c.cJS({imports:[Po,dD,EU,CU,$r.hO.initializeApp(zS_firebase),aP(()=>uP(zS_firebase)),kU(()=>OU()),$U(()=>jU())]}),n})();(0,c.G48)(),Ea().bootstrapModule(HU).catch(n=>console.error(n))},9751:(ut,Ce,P)=>{P.d(Ce,{y:()=>ce});var c=P(2961),B=P(727),k=P(8822),re=P(9635),ae=P(2416),ge=P(576),fe=P(2806);let ce=(()=>{class K{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const be=new K;return be.source=this,be.operator=Re,be}subscribe(Re,be,et){const we=function G(K){return K&&K instanceof c.Lv||function q(K){return K&&(0,ge.m)(K.next)&&(0,ge.m)(K.error)&&(0,ge.m)(K.complete)}(K)&&(0,B.Nn)(K)}(Re)?Re:new c.Hp(Re,be,et);return(0,fe.x)(()=>{const{operator:pe,source:Ye}=this;we.add(pe?pe.call(we,Ye):Ye?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(Re){try{return this._subscribe(Re)}catch(be){Re.error(be)}}forEach(Re,be){return new(be=me(be))((et,we)=>{const pe=new c.Hp({next:Ye=>{try{Re(Ye)}catch(Ze){we(Ze),pe.unsubscribe()}},error:we,complete:et});this.subscribe(pe)})}_subscribe(Re){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Re)}[k.L](){return this}pipe(...Re){return(0,re.U)(Re)(this)}toPromise(Re){return new(Re=me(Re))((be,et)=>{let we;this.subscribe(pe=>we=pe,pe=>et(pe),()=>be(we))})}}return K.create=$e=>new K($e),K})();function me(K){var $e;return null!==($e=K??ae.v.Promise)&&void 0!==$e?$e:Promise}},7579:(ut,Ce,P)=>{P.d(Ce,{x:()=>fe});var c=P(9751),B=P(727);const re=(0,P(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=P(8737),ge=P(2806);let fe=(()=>{class me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const K=new ce(this,this);return K.operator=G,K}_throwIfClosed(){if(this.closed)throw new re}next(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(G)}})}error(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:K}=this;for(;K.length;)K.shift().error(G)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:K,isStopped:$e,observers:Re}=this;return K||$e?B.Lc:(this.currentObservers=null,Re.push(G),new B.w0(()=>{this.currentObservers=null,(0,ae.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:K,thrownError:$e,isStopped:Re}=this;K?G.error($e):Re&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return me.create=(q,G)=>new ce(q,G),me})();class ce extends fe{constructor(q,G){super(),this.destination=q,this.source=G}next(q){var G,K;null===(K=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===K||K.call(G,q)}error(q){var G,K;null===(K=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===K||K.call(G,q)}complete(){var q,G;null===(G=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===G||G.call(q)}_subscribe(q){var G,K;return null!==(K=null===(G=this.source)||void 0===G?void 0:G.subscribe(q))&&void 0!==K?K:B.Lc}}},2961:(ut,Ce,P)=>{P.d(Ce,{Hp:()=>et,Lv:()=>K});var c=P(576),B=P(727),k=P(2416),re=P(7849);function ae(){}const ge=me("C",void 0,void 0);function me(Fe,Se,Ee){return{kind:Fe,value:Se,error:Ee}}var q=P(3410),G=P(2806);class K extends B.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,B.Nn)(Se)&&Se.add(this)):this.destination=Ze}static create(Se,Ee,He){return new et(Se,Ee,He)}next(Se){this.isStopped?Ye(function ce(Fe){return me("N",Fe,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Ye(function fe(Fe){return me("E",void 0,Fe)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Ye(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Re(Fe,Se){return $e.call(Fe,Se)}class be{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Se)}catch(He){we(He)}}error(Se){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Se)}catch(He){we(He)}else we(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Ee){we(Ee)}}}class et extends K{constructor(Se,Ee,He){let ne;if(super(),(0,c.m)(Se)||!Se)ne={next:Se??void 0,error:Ee??void 0,complete:He??void 0};else{let ue;this&&k.v.useDeprecatedNextContext?(ue=Object.create(Se),ue.unsubscribe=()=>this.unsubscribe(),ne={next:Se.next&&Re(Se.next,ue),error:Se.error&&Re(Se.error,ue),complete:Se.complete&&Re(Se.complete,ue)}):ne=Se}this.destination=new be(ne)}}function we(Fe){k.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Fe):(0,re.h)(Fe)}function Ye(Fe,Se){const{onStoppedNotification:Ee}=k.v;Ee&&q.z.setTimeout(()=>Ee(Fe,Se))}const Ze={closed:!0,next:ae,error:function pe(Fe){throw Fe},complete:ae}},727:(ut,Ce,P)=>{P.d(Ce,{Lc:()=>ge,w0:()=>ae,Nn:()=>fe});var c=P(576);const k=(0,P(3888).d)(me=>function(G){me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((K,$e)=>`${$e+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var re=P(8737);class ae{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:K}=this;if((0,c.m)(K))try{K()}catch(Re){q=Re instanceof k?Re.errors:[Re]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Re of $e)try{ce(Re)}catch(be){q=q??[],be instanceof k?q=[...q,...be.errors]:q.push(be)}}if(q)throw new k(q)}}add(q){var G;if(q&&q!==this)if(this.closed)ce(q);else{if(q instanceof ae){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(q)}}_hasParent(q){const{_parentage:G}=this;return G===q||Array.isArray(G)&&G.includes(q)}_addParent(q){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(q),G):G?[G,q]:q}_removeParent(q){const{_parentage:G}=this;G===q?this._parentage=null:Array.isArray(G)&&(0,re.P)(G,q)}remove(q){const{_finalizers:G}=this;G&&(0,re.P)(G,q),q instanceof ae&&q._removeParent(this)}}ae.EMPTY=(()=>{const me=new ae;return me.closed=!0,me})();const ge=ae.EMPTY;function fe(me){return me instanceof ae||me&&"closed"in me&&(0,c.m)(me.remove)&&(0,c.m)(me.add)&&(0,c.m)(me.unsubscribe)}function ce(me){(0,c.m)(me)?me():me.unsubscribe()}},2416:(ut,Ce,P)=>{P.d(Ce,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ce,P)=>{P.d(Ce,{E:()=>B});const B=new(P(9751).y)(ae=>ae.complete())},8996:(ut,Ce,P)=>{P.d(Ce,{D:()=>Se});var c=P(8421),B=P(5363),k=P(9468),ge=P(9751),ce=P(2202),me=P(576),q=P(9672);function K(Ee,He){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(ne=>{(0,q.f)(ne,He,()=>{const ue=Ee[Symbol.asyncIterator]();(0,q.f)(ne,He,()=>{ue.next().then(ye=>{ye.done?ne.complete():ne.next(ye.value)})},0,!0)})})}var $e=P(3670),Re=P(8239),be=P(1144),et=P(6495),we=P(2206),pe=P(4532),Ye=P(3260);function Se(Ee,He){return He?function Fe(Ee,He){if(null!=Ee){if((0,$e.c)(Ee))return function re(Ee,He){return(0,c.Xf)(Ee).pipe((0,k.R)(He),(0,B.Q)(He))}(Ee,He);if((0,be.z)(Ee))return function fe(Ee,He){return new ge.y(ne=>{let ue=0;return He.schedule(function(){ue===Ee.length?ne.complete():(ne.next(Ee[ue++]),ne.closed||this.schedule())})})}(Ee,He);if((0,Re.t)(Ee))return function ae(Ee,He){return(0,c.Xf)(Ee).pipe((0,k.R)(He),(0,B.Q)(He))}(Ee,He);if((0,we.D)(Ee))return K(Ee,He);if((0,et.T)(Ee))return function G(Ee,He){return new ge.y(ne=>{let ue;return(0,q.f)(ne,He,()=>{ue=Ee[ce.h](),(0,q.f)(ne,He,()=>{let ye,Z;try{({value:ye,done:Z}=ue.next())}catch(J){return void ne.error(J)}Z?ne.complete():ne.next(ye)},0,!0)}),()=>(0,me.m)(ue?.return)&&ue.return()})}(Ee,He);if((0,Ye.L)(Ee))return function Ze(Ee,He){return K((0,Ye.Q)(Ee),He)}(Ee,He)}throw(0,pe.z)(Ee)}(Ee,He):(0,c.Xf)(Ee)}},8421:(ut,Ce,P)=>{P.d(Ce,{Xf:()=>$e});var c=P(655),B=P(1144),k=P(8239),re=P(9751),ae=P(3670),ge=P(2206),fe=P(4532),ce=P(6495),me=P(3260),q=P(576),G=P(7849),K=P(8822);function $e(Fe){if(Fe instanceof re.y)return Fe;if(null!=Fe){if((0,ae.c)(Fe))return function Re(Fe){return new re.y(Se=>{const Ee=Fe[K.L]();if((0,q.m)(Ee.subscribe))return Ee.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,B.z)(Fe))return function be(Fe){return new re.y(Se=>{for(let Ee=0;Ee<Fe.length&&!Se.closed;Ee++)Se.next(Fe[Ee]);Se.complete()})}(Fe);if((0,k.t)(Fe))return function et(Fe){return new re.y(Se=>{Fe.then(Ee=>{Se.closed||(Se.next(Ee),Se.complete())},Ee=>Se.error(Ee)).then(null,G.h)})}(Fe);if((0,ge.D)(Fe))return pe(Fe);if((0,ce.T)(Fe))return function we(Fe){return new re.y(Se=>{for(const Ee of Fe)if(Se.next(Ee),Se.closed)return;Se.complete()})}(Fe);if((0,me.L)(Fe))return function Ye(Fe){return pe((0,me.Q)(Fe))}(Fe)}throw(0,fe.z)(Fe)}function pe(Fe){return new re.y(Se=>{(function Ze(Fe,Se){var Ee,He,ne,ue;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,c.KL)(Fe);!(He=yield Ee.next()).done;)if(Se.next(He.value),Se.closed)return}catch(ye){ne={error:ye}}finally{try{He&&!He.done&&(ue=Ee.return)&&(yield ue.call(Ee))}finally{if(ne)throw ne.error}}Se.complete()})})(Fe,Se).catch(Ee=>Se.error(Ee))})}},6451:(ut,Ce,P)=>{P.d(Ce,{T:()=>ge});var c=P(8189),B=P(8421),k=P(515),re=P(7669),ae=P(8996);function ge(...fe){const ce=(0,re.yG)(fe),me=(0,re._6)(fe,1/0),q=fe;return q.length?1===q.length?(0,B.Xf)(q[0]):(0,c.J)(me)((0,ae.D)(q,ce)):k.E}},5403:(ut,Ce,P)=>{P.d(Ce,{x:()=>B});var c=P(2961);function B(re,ae,ge,fe,ce){return new k(re,ae,ge,fe,ce)}class k extends c.Lv{constructor(ae,ge,fe,ce,me,q){super(ae),this.onFinalize=me,this.shouldUnsubscribe=q,this._next=ge?function(G){try{ge(G)}catch(K){ae.error(K)}}:super._next,this._error=ce?function(G){try{ce(G)}catch(K){ae.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(G){ae.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(ut,Ce,P)=>{P.d(Ce,{U:()=>k});var c=P(4482),B=P(5403);function k(re,ae){return(0,c.e)((ge,fe)=>{let ce=0;ge.subscribe((0,B.x)(fe,me=>{fe.next(re.call(ae,me,ce++))}))})}},8189:(ut,Ce,P)=>{P.d(Ce,{J:()=>k});var c=P(5577),B=P(4671);function k(re=1/0){return(0,c.z)(B.y,re)}},5577:(ut,Ce,P)=>{P.d(Ce,{z:()=>ce});var c=P(4004),B=P(8421),k=P(4482),re=P(9672),ae=P(5403),fe=P(576);function ce(me,q,G=1/0){return(0,fe.m)(q)?ce((K,$e)=>(0,c.U)((Re,be)=>q(K,Re,$e,be))((0,B.Xf)(me(K,$e))),G):("number"==typeof q&&(G=q),(0,k.e)((K,$e)=>function ge(me,q,G,K,$e,Re,be,et){const we=[];let pe=0,Ye=0,Ze=!1;const Fe=()=>{Ze&&!we.length&&!pe&&q.complete()},Se=He=>pe<K?Ee(He):we.push(He),Ee=He=>{Re&&q.next(He),pe++;let ne=!1;(0,B.Xf)(G(He,Ye++)).subscribe((0,ae.x)(q,ue=>{$e?.(ue),Re?Se(ue):q.next(ue)},()=>{ne=!0},void 0,()=>{if(ne)try{for(pe--;we.length&&pe<K;){const ue=we.shift();be?(0,re.f)(q,be,()=>Ee(ue)):Ee(ue)}Fe()}catch(ue){q.error(ue)}}))};return me.subscribe((0,ae.x)(q,Se,()=>{Ze=!0,Fe()})),()=>{et?.()}}(K,$e,me,G)))}},5363:(ut,Ce,P)=>{P.d(Ce,{Q:()=>re});var c=P(9672),B=P(4482),k=P(5403);function re(ae,ge=0){return(0,B.e)((fe,ce)=>{fe.subscribe((0,k.x)(ce,me=>(0,c.f)(ce,ae,()=>ce.next(me),ge),()=>(0,c.f)(ce,ae,()=>ce.complete(),ge),me=>(0,c.f)(ce,ae,()=>ce.error(me),ge)))})}},3099:(ut,Ce,P)=>{P.d(Ce,{B:()=>ae});var c=P(8421),B=P(7579),k=P(2961),re=P(4482);function ae(fe={}){const{connector:ce=(()=>new B.x),resetOnError:me=!0,resetOnComplete:q=!0,resetOnRefCountZero:G=!0}=fe;return K=>{let $e,Re,be,et=0,we=!1,pe=!1;const Ye=()=>{Re?.unsubscribe(),Re=void 0},Ze=()=>{Ye(),$e=be=void 0,we=pe=!1},Fe=()=>{const Se=$e;Ze(),Se?.unsubscribe()};return(0,re.e)((Se,Ee)=>{et++,!pe&&!we&&Ye();const He=be=be??ce();Ee.add(()=>{et--,0===et&&!pe&&!we&&(Re=ge(Fe,G))}),He.subscribe(Ee),!$e&&et>0&&($e=new k.Hp({next:ne=>He.next(ne),error:ne=>{pe=!0,Ye(),Re=ge(Ze,me,ne),He.error(ne)},complete:()=>{we=!0,Ye(),Re=ge(Ze,q),He.complete()}}),(0,c.Xf)(Se).subscribe($e))})(K)}}function ge(fe,ce,...me){if(!0===ce)return void fe();if(!1===ce)return;const q=new k.Hp({next:()=>{q.unsubscribe(),fe()}});return ce(...me).subscribe(q)}},9468:(ut,Ce,P)=>{P.d(Ce,{R:()=>B});var c=P(4482);function B(k,re=0){return(0,c.e)((ae,ge)=>{ge.add(k.schedule(()=>ae.subscribe(ge),re))})}},8505:(ut,Ce,P)=>{P.d(Ce,{b:()=>ae});var c=P(576),B=P(4482),k=P(5403),re=P(4671);function ae(ge,fe,ce){const me=(0,c.m)(ge)||fe||ce?{next:ge,error:fe,complete:ce}:ge;return me?(0,B.e)((q,G)=>{var K;null===(K=me.subscribe)||void 0===K||K.call(me);let $e=!0;q.subscribe((0,k.x)(G,Re=>{var be;null===(be=me.next)||void 0===be||be.call(me,Re),G.next(Re)},()=>{var Re;$e=!1,null===(Re=me.complete)||void 0===Re||Re.call(me),G.complete()},Re=>{var be;$e=!1,null===(be=me.error)||void 0===be||be.call(me,Re),G.error(Re)},()=>{var Re,be;$e&&(null===(Re=me.unsubscribe)||void 0===Re||Re.call(me)),null===(be=me.finalize)||void 0===be||be.call(me)}))}):re.y}},4408:(ut,Ce,P)=>{P.d(Ce,{o:()=>ae});var c=P(727);class B extends c.w0{constructor(fe,ce){super()}schedule(fe,ce=0){return this}}const k={setInterval(ge,fe,...ce){const{delegate:me}=k;return me?.setInterval?me.setInterval(ge,fe,...ce):setInterval(ge,fe,...ce)},clearInterval(ge){const{delegate:fe}=k;return(fe?.clearInterval||clearInterval)(ge)},delegate:void 0};var re=P(8737);class ae extends B{constructor(fe,ce){super(fe,ce),this.scheduler=fe,this.work=ce,this.pending=!1}schedule(fe,ce=0){var me;if(this.closed)return this;this.state=fe;const q=this.id,G=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(G,q,ce)),this.pending=!0,this.delay=ce,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(G,this.id,ce),this}requestAsyncId(fe,ce,me=0){return k.setInterval(fe.flush.bind(fe,this),me)}recycleAsyncId(fe,ce,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return ce;null!=ce&&k.clearInterval(ce)}execute(fe,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(fe,ce);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,ce){let q,me=!1;try{this.work(fe)}catch(G){me=!0,q=G||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:fe,scheduler:ce}=this,{actions:me}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(me,this),null!=fe&&(this.id=this.recycleAsyncId(ce,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ce,P)=>{P.d(Ce,{v:()=>k});var c=P(6063);class B{constructor(ae,ge=B.now){this.schedulerActionCtor=ae,this.now=ge}schedule(ae,ge=0,fe){return new this.schedulerActionCtor(this,ae).schedule(fe,ge)}}B.now=c.l.now;class k extends B{constructor(ae,ge=B.now){super(ae,ge),this.actions=[],this._active=!1}flush(ae){const{actions:ge}=this;if(this._active)return void ge.push(ae);let fe;this._active=!0;do{if(fe=ae.execute(ae.state,ae.delay))break}while(ae=ge.shift());if(this._active=!1,fe){for(;ae=ge.shift();)ae.unsubscribe();throw fe}}}},4986:(ut,Ce,P)=>{P.d(Ce,{z:()=>k});var c=P(4408);const k=new(P(7565).v)(c.o)},6063:(ut,Ce,P)=>{P.d(Ce,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ut,Ce,P)=>{P.d(Ce,{z:()=>c});const c={setTimeout(B,k,...re){const{delegate:ae}=c;return ae?.setTimeout?ae.setTimeout(B,k,...re):setTimeout(B,k,...re)},clearTimeout(B){const{delegate:k}=c;return(k?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(ut,Ce,P)=>{P.d(Ce,{h:()=>B});const B=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ce,P)=>{P.d(Ce,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Ce,P)=>{P.d(Ce,{_6:()=>ge,jO:()=>re,yG:()=>ae});var c=P(576);function k(fe){return fe[fe.length-1]}function re(fe){return(0,c.m)(k(fe))?fe.pop():void 0}function ae(fe){return function B(fe){return fe&&(0,c.m)(fe.schedule)}(k(fe))?fe.pop():void 0}function ge(fe,ce){return"number"==typeof k(fe)?fe.pop():ce}},8737:(ut,Ce,P)=>{function c(B,k){if(B){const re=B.indexOf(k);0<=re&&B.splice(re,1)}}P.d(Ce,{P:()=>c})},3888:(ut,Ce,P)=>{function c(B){const re=B(ae=>{Error.call(ae),ae.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}P.d(Ce,{d:()=>c})},2806:(ut,Ce,P)=>{P.d(Ce,{O:()=>re,x:()=>k});var c=P(2416);let B=null;function k(ae){if(c.v.useDeprecatedSynchronousErrorHandling){const ge=!B;if(ge&&(B={errorThrown:!1,error:null}),ae(),ge){const{errorThrown:fe,error:ce}=B;if(B=null,fe)throw ce}}else ae()}function re(ae){c.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ae)}},9672:(ut,Ce,P)=>{function c(B,k,re,ae=0,ge=!1){const fe=k.schedule(function(){re(),ge?B.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(B.add(fe),!ge)return fe}P.d(Ce,{f:()=>c})},4671:(ut,Ce,P)=>{function c(B){return B}P.d(Ce,{y:()=>c})},1144:(ut,Ce,P)=>{P.d(Ce,{z:()=>c});const c=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(ut,Ce,P)=>{P.d(Ce,{D:()=>B});var c=P(576);function B(k){return Symbol.asyncIterator&&(0,c.m)(k?.[Symbol.asyncIterator])}},576:(ut,Ce,P)=>{function c(B){return"function"==typeof B}P.d(Ce,{m:()=>c})},3670:(ut,Ce,P)=>{P.d(Ce,{c:()=>k});var c=P(8822),B=P(576);function k(re){return(0,B.m)(re[c.L])}},6495:(ut,Ce,P)=>{P.d(Ce,{T:()=>k});var c=P(2202),B=P(576);function k(re){return(0,B.m)(re?.[c.h])}},8239:(ut,Ce,P)=>{P.d(Ce,{t:()=>B});var c=P(576);function B(k){return(0,c.m)(k?.then)}},3260:(ut,Ce,P)=>{P.d(Ce,{L:()=>re,Q:()=>k});var c=P(655),B=P(576);function k(ae){return(0,c.FC)(this,arguments,function*(){const fe=ae.getReader();try{for(;;){const{value:ce,done:me}=yield(0,c.qq)(fe.read());if(me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ce)}}finally{fe.releaseLock()}})}function re(ae){return(0,B.m)(ae?.getReader)}},4482:(ut,Ce,P)=>{P.d(Ce,{A:()=>B,e:()=>k});var c=P(576);function B(re){return(0,c.m)(re?.lift)}function k(re){return ae=>{if(B(ae))return ae.lift(function(ge){try{return re(ge,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ut,Ce,P)=>{P.d(Ce,{U:()=>k,z:()=>B});var c=P(4671);function B(...re){return k(re)}function k(re){return 0===re.length?c.y:1===re.length?re[0]:function(ge){return re.reduce((fe,ce)=>ce(fe),ge)}}},7849:(ut,Ce,P)=>{P.d(Ce,{h:()=>k});var c=P(2416),B=P(3410);function k(re){B.z.setTimeout(()=>{const{onUnhandledError:ae}=c.v;if(!ae)throw re;ae(re)})}},4532:(ut,Ce,P)=>{function c(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>c})},655:(ut,Ce,P)=>{function re(Z,J){var de={};for(var ie in Z)Object.prototype.hasOwnProperty.call(Z,ie)&&J.indexOf(ie)<0&&(de[ie]=Z[ie]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(ie=Object.getOwnPropertySymbols(Z);Ue<ie.length;Ue++)J.indexOf(ie[Ue])<0&&Object.prototype.propertyIsEnumerable.call(Z,ie[Ue])&&(de[ie[Ue]]=Z[ie[Ue]])}return de}function ce(Z,J,de,ie){return new(de||(de=Promise))(function(Ve,lt){function sn(ln){try{Ge(ie.next(ln))}catch(mn){lt(mn)}}function jt(ln){try{Ge(ie.throw(ln))}catch(mn){lt(mn)}}function Ge(ln){ln.done?Ve(ln.value):function Ue(Ve){return Ve instanceof de?Ve:new de(function(lt){lt(Ve)})}(ln.value).then(sn,jt)}Ge((ie=ie.apply(Z,J||[])).next())})}function we(Z){return this instanceof we?(this.v=Z,this):new we(Z)}function pe(Z,J,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,ie=de.apply(Z,J||[]),Ve=[];return Ue={},lt("next"),lt("throw"),lt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function lt(tn){ie[tn]&&(Ue[tn]=function(nn){return new Promise(function(Wt,Lt){Ve.push([tn,nn,Wt,Lt])>1||sn(tn,nn)})})}function sn(tn,nn){try{!function jt(tn){tn.value instanceof we?Promise.resolve(tn.value.v).then(Ge,ln):mn(Ve[0][2],tn)}(ie[tn](nn))}catch(Wt){mn(Ve[0][3],Wt)}}function Ge(tn){sn("next",tn)}function ln(tn){sn("throw",tn)}function mn(tn,nn){tn(nn),Ve.shift(),Ve.length&&sn(Ve[0][0],Ve[0][1])}}function Ze(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,J=Z[Symbol.asyncIterator];return J?J.call(Z):(Z=function K(Z){var J="function"==typeof Symbol&&Symbol.iterator,de=J&&Z[J],ie=0;if(de)return de.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ie>=Z.length&&(Z=void 0),{value:Z&&Z[ie++],done:!Z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),de={},ie("next"),ie("throw"),ie("return"),de[Symbol.asyncIterator]=function(){return this},de);function ie(Ve){de[Ve]=Z[Ve]&&function(lt){return new Promise(function(sn,jt){!function Ue(Ve,lt,sn,jt){Promise.resolve(jt).then(function(Ge){Ve({value:Ge,done:sn})},lt)}(sn,jt,(lt=Z[Ve](lt)).done,lt.value)})}}}P.d(Ce,{FC:()=>pe,KL:()=>Ze,_T:()=>re,mG:()=>ce,qq:()=>we})},4650:(ut,Ce,P)=>{P.d(Ce,{$8M:()=>cu,$Z:()=>LD,AFp:()=>yc,ALo:()=>Wd,AaK:()=>ce,BQk:()=>nc,CHM:()=>Ih,CRH:()=>Ab,CZH:()=>tp,CqO:()=>rc,D6c:()=>Ju,EJc:()=>pm,EpF:()=>Sg,F4k:()=>EE,FYo:()=>Oy,FiY:()=>Ae,G48:()=>fT,GfV:()=>yw,Gpc:()=>G,JOm:()=>Bi,KtG:()=>Co,LFG:()=>Fn,LSH:()=>gd,Lbi:()=>eh,Lck:()=>ke,MMx:()=>vv,NdJ:()=>xg,OlP:()=>wn,Oqu:()=>V_,PXZ:()=>qb,Q6J:()=>Tg,QGY:()=>v_,QP$:()=>Ne,Qsj:()=>mw,R0b:()=>Bt,RDi:()=>lD,Rgc:()=>$a,SBq:()=>Jh,Sil:()=>oT,Suo:()=>xv,TTD:()=>vs,TgZ:()=>Rr,VKq:()=>Hf,X6Q:()=>Yb,XFs:()=>Ke,Xpm:()=>Ie,Xts:()=>Zp,Y36:()=>df,YKP:()=>he,YNc:()=>Hr,Yjl:()=>U,Yz7:()=>nn,Z0I:()=>Ri,ZZ4:()=>Im,_Bn:()=>mb,_UZ:()=>xd,_Vd:()=>Oa,_c5:()=>a0,_uU:()=>If,aQg:()=>Dm,c2e:()=>rT,cJS:()=>Lt,cg1:()=>Q_,dDg:()=>ip,dqk:()=>Rt,eFA:()=>Wb,ekj:()=>kr,eoX:()=>Hb,f3M:()=>xa,g9A:()=>jv,h0i:()=>qe,hGG:()=>u0,hij:()=>Fg,iGM:()=>Zf,ifc:()=>dt,ip1:()=>Vb,jDz:()=>yb,kL8:()=>Ko,kYT:()=>H,lG2:()=>W,lqb:()=>Tu,lri:()=>ho,n5z:()=>Ds,oAB:()=>Xt,oxw:()=>Rg,q4F:()=>Xh,qLn:()=>ef,qOj:()=>cE,qZA:()=>Ag,rWj:()=>Yv,s9C:()=>I_,sBO:()=>pT,sIi:()=>Td,s_b:()=>nm,soG:()=>Sn,tb:()=>Hv,tp0:()=>it,uIk:()=>Ig,vHH:()=>be,vpe:()=>co,wAp:()=>It,xi3:()=>Dv,xp6:()=>Cw,ynx:()=>Md,z2F:()=>fs,zSh:()=>Mr,zs3:()=>Ua});var c=P(7579),B=P(727),k=P(9751),re=P(6451),ae=P(3099);function ge(i){for(let o in i)if(i[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function fe(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function me(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const q=ge({__forward_ref__:ge});function G(i){return i.__forward_ref__=G,i.toString=function(){return ce(this())},i}function K(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(q)&&i.__forward_ref__===G}class be extends Error{constructor(o,a){super(function et(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function we(i){return"string"==typeof i?i:null==i?"":String(i)}function Se(i,o){throw new be(-201,!1)}function jt(i,o){null==i&&function Ge(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function nn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Lt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Dr(i){return Fr(i,Lr)||Fr(i,wi)}function Ri(i){return null!==Dr(i)}function Fr(i,o){return i.hasOwnProperty(o)?i[o]:null}function Zi(i){return i&&(i.hasOwnProperty(Vn)||i.hasOwnProperty(Ki))?i[Vn]:null}const Lr=ge({\u0275prov:ge}),Vn=ge({\u0275inj:ge}),wi=ge({ngInjectableDef:ge}),Ki=ge({ngInjectorDef:ge});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let zn;function gn(i){const o=zn;return zn=i,o}function hr(i,o,a){const l=Dr(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ke.Optional?null:void 0!==o?o:void Se(ce(i))}function yn(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),dt=(()=>{return(i=dt||(dt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",dt;var i})();const Rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cr={},Dt=[],Ur=ge({\u0275cmp:ge}),Ft=ge({\u0275dir:ge}),ri=ge({\u0275pipe:ge}),Qt=ge({\u0275mod:ge}),nr=ge({\u0275fac:ge}),Dn=ge({__NG_ELEMENT_ID__:ge});let Qe=0;function Ie(i){return yn(()=>{const a=!0===i.standalone,l={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||dt.Emulated,id:"c"+Qe++,styles:i.styles||Dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return h.inputs=$(i.inputs,l),h.outputs=$(i.outputs),y&&y.forEach(w=>w(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(wt).filter(Ct):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(te).filter(Ct):null,h})}function wt(i){return R(i)||L(i)}function Ct(i){return null!==i}function Xt(i){return yn(()=>({type:i.type,bootstrap:i.bootstrap||Dt,declarations:i.declarations||Dt,imports:i.imports||Dt,exports:i.exports||Dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function H(i,o){return yn(()=>{const a=tt(i,!0);a.declarations=o.declarations||Dt,a.imports=o.imports||Dt,a.exports=o.exports||Dt})}function $(i,o){if(null==i)return Cr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=l,o&&(o[h]=f)}return a}const W=Ie;function U(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function R(i){return i[Ur]||null}function L(i){return i[Ft]||null}function te(i){return i[ri]||null}function Ne(i){const o=R(i)||L(i)||te(i);return null!==o&&o.standalone}function tt(i,o){const a=i[Qt]||null;if(!a&&!0===o)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Zn(i){return Array.isArray(i)&&"object"==typeof i[1]}function si(i){return Array.isArray(i)&&!0===i[1]}function go(i){return 0!=(8&i.flags)}function sl(i){return 2==(2&i.flags)}function ia(i){return 1==(1&i.flags)}function Zr(i){return null!==i.template}function ol(i){return 0!=(256&i[2])}function Er(i,o){return i.hasOwnProperty(nr)?i[nr]:null}class wo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function vs(){return Nc}function Nc(i){return i.type.prototype.ngOnChanges&&(i.setInput=al),Ja}function Ja(){const i=Eo(this),o=i?.current;if(o){const a=i.previous;if(a===Cr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function al(i,o,a,l){const h=Eo(i)||function Ap(i,o){return i[kc]=o}(i,{previous:Cr,current:null}),f=h.current||(h.current={}),y=h.previous,w=this.declaredInputs[a],b=y[w];f[w]=new wo(b&&b.currentValue,o,y===Cr),i[l]=o}vs.ngInherit=!0;const kc="__ngSimpleChanges__";function Eo(i){return i[kc]||null}function Mn(i){for(;Array.isArray(i);)i=i[0];return i}function bi(i,o){return Mn(o[i])}function fr(i,o){return Mn(o[i.index])}function Io(i,o){return i.data[o]}function on(i,o){const a=o[i];return Zn(a)?a:a[0]}function ws(i){return 64==(64&i[2])}function ui(i,o){return null==o?null:i[o]}function aa(i){i[18]=0}function kn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const kt={lFrame:ya(null),bindingsEnabled:!0};function Gs(){return kt.bindingsEnabled}function Te(){return kt.lFrame.lView}function Kt(){return kt.lFrame.tView}function Ih(i){return kt.lFrame.contextLView=i,i[8]}function Co(i){return kt.lFrame.contextLView=null,i}function Kn(){let i=To();for(;null!==i&&64===i.type;)i=i.parent;return i}function To(){return kt.lFrame.currentTNode}function Br(i,o){const a=kt.lFrame;a.currentTNode=i,a.isParent=o}function tu(){return kt.lFrame.isParent}function Ao(){kt.lFrame.isParent=!1}function Yn(){const i=kt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function pa(){return kt.lFrame.bindingIndex++}function Lc(i,o){const a=kt.lFrame;a.bindingIndex=a.bindingRootIndex=i,So(o)}function So(i){kt.lFrame.currentDirectiveIndex=i}function ga(){return kt.lFrame.currentQueryIndex}function fl(i){kt.lFrame.currentQueryIndex=i}function ma(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Uc(i,o,a){if(a&Ke.SkipSelf){let h=o,f=i;for(;!(h=h.parent,null!==h||a&Ke.Host||(h=ma(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,i=f}const l=kt.lFrame=Th();return l.currentTNode=o,l.lView=i,!0}function xo(i){const o=Th(),a=i[1];kt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Th(){const i=kt.lFrame,o=null===i?null:i.child;return null===o?ya(i):o}function ya(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Ah(){const i=kt.lFrame;return kt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Vc=Ah;function Es(){const i=Ah();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function An(){return kt.lFrame.selectedIndex}function ns(i){kt.lFrame.selectedIndex=i}function Cn(){const i=kt.lFrame;return Io(i.tView,i.selectedIndex)}function nu(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:N}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=N&&(i.destroyHooks||(i.destroyHooks=[])).push(a,N)}}function Mo(i,o,a){No(i,o,3,a)}function Ro(i,o,a,l){(3&i[2])===a&&No(i,o,a,l)}function jc(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function No(i,o,a,l){const f=l??-1,y=o.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(w=o[b],null!=l&&w>=l)break}else o[b]<0&&(i[18]+=65536),(w<f||-1==f)&&(Hc(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function Hc(i,o,a,l){const h=a[l]<0,f=a[l+1],w=i[h?-a[l]:a[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class li{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function rs(i,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const f=a[l++],y=a[l++],w=a[l++];i.setAttribute(o,y,w,f)}else{const f=h,y=a[++l];vl(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),l++}}return l}function _a(i){return 3===i||4===i||6===i}function vl(i){return 64===i.charCodeAt(0)}function va(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||qc(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function qc(i,o,a,l,h){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==h&&(i[f+1]=h));if(l===i[f+1])return void(i[f+2]=h)}f++,null!==l&&f++,null!==h&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==h&&i.splice(f++,0,h)}function Mh(i){return-1!==i}function Qn(i){return 32767&i}function Is(i,o){let a=function Rh(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let wl=!0;function wa(i){const o=wl;return wl=i,o}let zc=0;const Yr={};function is(i,o){const a=au(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,El(l.data,i),El(o,null),El(l.blueprint,null));const h=Ea(i,o),f=i.injectorIndex;if(Mh(h)){const y=Qn(h),w=Is(h,o),b=w[1].data;for(let T=0;T<8;T++)o[f+T]=w[y+T]|b[y+T]}return o[f+8]=h,f}function El(i,o){i.push(0,0,0,0,0,0,0,0,o)}function au(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ea(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=Bo(h),null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function zs(i,o,a){!function Wc(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Dn)&&(l=a[Dn]),null==l&&(l=a[Dn]=zc++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function Oo(i,o,a){if(a&Ke.Optional||void 0!==i)return i;Se()}function Po(i,o,a,l){if(a&Ke.Optional&&void 0===l&&(l=null),0==(a&(Ke.Self|Ke.Host))){const h=i[9],f=gn(void 0);try{return h?h.get(o,l,a&Ke.Optional):hr(o,l,a&Ke.Optional)}finally{gn(f)}}return Oo(l,0,a)}function Fo(i,o,a,l=Ke.Default,h){if(null!==i){if(1024&o[2]){const y=function Oh(i,o,a,l,h){let f=i,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=Zc(f,y,a,l|Ke.Self,Yr);if(w!==Yr)return w;let b=f.parent;if(!b){const T=y[21];if(T){const N=T.get(a,Yr,l);if(N!==Yr)return N}b=Bo(y),y=y[15]}f=b}return h}(i,o,a,l,Yr);if(y!==Yr)return y}const f=Zc(i,o,a,l,Yr);if(f!==Yr)return f}return Po(o,a,l,h)}function Zc(i,o,a,l,h){const f=function kh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Dn)?i[Dn]:void 0;return"number"==typeof o?o>=0?255&o:bl:o}(a);if("function"==typeof f){if(!Uc(o,i,l))return l&Ke.Host?Oo(h,0,l):Po(o,a,l,h);try{const y=f(l);if(null!=y||l&Ke.Optional)return y;Se()}finally{Vc()}}else if("number"==typeof f){let y=null,w=au(i,o),b=-1,T=l&Ke.Host?o[16][6]:null;for((-1===w||l&Ke.SkipSelf)&&(b=-1===w?Ea(i,o):o[w+8],-1!==b&&lu(l,!1)?(y=o[1],w=Qn(b),o=Is(b,o)):w=-1);-1!==w;){const N=o[1];if(Lo(f,w,N.data)){const F=uu(w,o,a,y,l,T);if(F!==Yr)return F}b=o[w+8],-1!==b&&lu(l,o[1].data[w+8]===T)&&Lo(f,w,o)?(y=N,w=Qn(b),o=Is(b,o)):w=-1}}return h}function uu(i,o,a,l,h,f){const y=o[1],w=y.data[i+8],N=Ia(w,y,a,null==l?sl(w)&&wl:l!=y&&0!=(3&w.type),h&Ke.Host&&f===w);return null!==N?Oi(o,y,N,w):Yr}function Ia(i,o,a,l,h){const f=i.providerIndexes,y=o.data,w=1048575&f,b=i.directiveStart,N=f>>20,z=h?w+N:i.directiveEnd;for(let X=l?w:w+N;X<z;X++){const ve=y[X];if(X<b&&a===ve||X>=b&&ve.type===a)return X}if(h){const X=y[b];if(X&&Zr(X)&&X.type===a)return b}return null}function Oi(i,o,a,l){let h=i[a];const f=o.data;if(function _l(i){return i instanceof li}(h)){const y=h;y.resolving&&function Ye(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new be(-200,`Circular dependency in DI detected for ${i}${a}`)}(function pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():we(i)}(f[a]));const w=wa(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?gn(y.injectImpl):null;Uc(i,l,Ke.Default);try{h=i[a]=y.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function yl(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(l){const y=Nc(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==b&&gn(b),wa(w),y.resolving=!1,Vc()}}return h}function Lo(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function lu(i,o){return!(i&Ke.Self||i&Ke.Host&&o)}class Uo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Fo(this._tNode,this._lView,o,l,a)}}function bl(){return new Uo(Kn(),Te())}function Ds(i){return yn(()=>{const o=i.prototype.constructor,a=o[nr]||Vo(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const f=h[nr]||Vo(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function Vo(i){return $e(i)?()=>{const o=Vo(K(i));return o&&o()}:Er(i)}function Bo(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function cu(i){return function ba(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const f=a[h];if(_a(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(f===o)return a[h+1];h+=2}}}return null}(Kn(),i)}const $o="__parameters__";function Ho(i,o,a){return yn(()=>{const l=function Il(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...f){if(this instanceof h)return l.apply(this,f),this;const y=new h(...f);return w.annotation=y,w;function w(b,T,N){const F=b.hasOwnProperty($o)?b[$o]:Object.defineProperty(b,$o,{value:[]})[$o];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(y),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class wn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=nn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ar(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),Ar(l,o)):o!==i&&o.push(l)}return o}function ss(i,o){i.forEach(a=>Array.isArray(a)?ss(a,o):o(a))}function Da(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Zs(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Sr(i,o,a){let l=Di(i,o);return l>=0?i[1|l]=a:(l=~l,function St(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Cl(i,o){const a=Di(i,o);if(a>=0)return i[1|a]}function Di(i,o){return function Jr(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const f=l+(h-l>>1),y=i[f<<a];if(o===y)return f<<a;y>o?h=f:l=f+1}return~(h<<a)}(i,o,1)}const En={},Ti="__NG_DI_FLAG__",qo="ngTempTokenPath",Ui=/\n/gm,Vi="__source";let Qs;function Js(i){const o=Qs;return Qs=i,o}function Sl(i,o=Ke.Default){if(void 0===Qs)throw new be(-203,!1);return null===Qs?hr(i,void 0,o):Qs.get(i,o&Ke.Optional?null:void 0,o)}function Fn(i,o=Ke.Default){return(function Bn(){return zn}()||Sl)(K(i),o)}function xa(i,o=Ke.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Fn(i,o)}function D(i){const o=[];for(let a=0;a<i.length;a++){const l=K(i[a]);if(Array.isArray(l)){if(0===l.length)throw new be(900,!1);let h,f=Ke.Default;for(let y=0;y<l.length;y++){const w=l[y],b=x(w);"number"==typeof b?-1===b?h=w.token:f|=b:h=w}o.push(Fn(h,f))}else o.push(Fn(l))}return o}function C(i,o){return i[Ti]=o,i.prototype[Ti]=o,i}function x(i){return i[Ti]}const Ae=C(Ho("Optional"),8),it=C(Ho("SkipSelf"),4);var Bi=(()=>((Bi=Bi||{})[Bi.Important=1]="Important",Bi[Bi.DashCase=2]="DashCase",Bi))();const gu=new Map;let j0=0;const p="__ngContext__";function m(i,o){Zn(o)?(i[p]=o[20],function ry(i){gu.set(i[20],i)}(o)):i[p]=o}function Ml(i,o){return undefined(i,o)}function Na(i){const o=i[3];return si(o)?o[3]:o}function wu(i){return $h(i[13])}function Nl(i){return $h(i[4])}function $h(i){for(;null!==i&&!si(i);)i=i[4];return i}function Eu(i,o,a,l,h){if(null!=l){let f,y=!1;si(l)?f=l:Zn(l)&&(y=!0,l=l[0]);const w=Mn(l);0===i&&null!==a?null==h?dy(o,a,w):kl(o,a,w,h||null,!0):1===i&&null!==a?kl(o,a,w,h||null,!0):2===i?function gy(i,o,a){const l=Vp(i,o);l&&function iD(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,w,y):3===i&&o.destroyNode(w),null!=f&&function aD(i,o,a,l,h){const f=a[7];f!==Mn(a)&&Eu(o,i,l,f,h);for(let w=10;w<a.length;w++){const b=a[w];hd(b[1],b,i,o,l,f)}}(o,i,f,a,h)}}function G0(i,o,a){return i.createElement(o,a)}function cd(i,o){const a=i[9],l=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,kn(h,-1)),a.splice(l,1)}function ay(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const h=l[17];null!==h&&h!==i&&cd(h,l),o>0&&(i[a-1][4]=l[4]);const f=Zs(i,10+o);!function XS(i,o){hd(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function uy(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&hd(i,o,a,3,null,null),function rD(i){let o=i[13];if(!o)return ly(i[1],i);for(;o;){let a=null;if(Zn(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Zn(o)&&ly(o[1],o),o=o[3];null===o&&(o=i),Zn(o)&&ly(o[1],o),a=o&&o[4]}o=a}}(o)}}function ly(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function W0(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof li)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=h[f[y]],b=f[y+1];try{b.call(w)}finally{}}else try{f.call(h)}finally{}}}}(i,o),function ex(i,o){const a=i.cleanup,l=o[7];let h=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(o):Mn(o[y]),b=l[h=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],b,T):T>=0?l[h=T]():l[h=-T].unsubscribe(),f+=2}else{const y=l[h=a[f+1]];a[f].call(y)}if(null!==l){for(let f=h+1;f<l.length;f++)(0,l[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&si(o[3])){a!==o[3]&&cd(a,o);const l=o[19];null!==l&&l.detachView(i)}!function ld(i){gu.delete(i[20])}(o)}}function Z0(i,o,a){return function cy(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===dt.None||h===dt.Emulated)return null}return fr(l,a)}(i,o.parent,a)}function kl(i,o,a,l,h){i.insertBefore(o,a,l,h)}function dy(i,o,a){i.appendChild(o,a)}function hy(i,o,a,l,h){null!==l?kl(i,o,a,l,h):dy(i,o,a)}function Vp(i,o){return i.parentNode(o)}let yy,Y0=function Bp(i,o,a){return 40&i.type?fr(i,a):null};function $p(i,o,a,l){const h=Z0(i,l,o),f=o[11],w=function K0(i,o,a){return Y0(i,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)hy(f,h,a[b],w,!1);else hy(f,h,a,w,!1)}function Hh(i,o){if(null!==o){const a=o.type;if(3&a)return fr(o,i);if(4&a)return jp(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Hh(i,l);{const h=i[o.index];return si(h)?jp(-1,h):Mn(h)}}if(32&a)return Ml(o,i)()||Mn(i[o.index]);{const l=Q0(i,o);return null!==l?Array.isArray(l)?l[0]:Hh(Na(i[16]),l):Hh(i,o.next)}}return null}function Q0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function jp(i,o){const a=10+i+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Hh(l,h)}return o[7]}function dd(i,o,a,l,h,f,y){for(;null!=a;){const w=l[a.index],b=a.type;if(y&&0===o&&(w&&m(Mn(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)dd(i,o,a.child,l,h,f,!1),Eu(o,i,h,w,f);else if(32&b){const T=Ml(a,l);let N;for(;N=T();)Eu(o,i,h,N,f);Eu(o,i,h,w,f)}else 16&b?my(i,o,l,a,h,f):Eu(o,i,h,w,f);a=y?a.projectionNext:a.next}}function hd(i,o,a,l,h,f){dd(a,l,i.firstChild,o,h,f,!1)}function my(i,o,a,l,h,f){const y=a[16],b=y[6].projection[l.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)Eu(o,i,h,b[T],f);else dd(i,o,b,y[3],h,f,!0)}function Hp(i,o,a){i.setAttribute(o,"style",a)}function Gp(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function lD(i){yy=i}class tw{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ol(i){return i instanceof tw?i.changingThisBreaksApplicationSecurity:i}const gt=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function gd(i){const o=function Ul(){const i=Te();return i&&i[12]}();return o?o.sanitize(Jn.URL,i)||"":function zh(i,o){const a=function dD(i){return i instanceof tw&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?Ol(i):function to(i){return(i=String(i)).match(gt)?i:"unsafe:"+i}(we(i))}const Zp=new wn("ENVIRONMENT_INITIALIZER"),lw=new wn("INJECTOR",-1),cw=new wn("INJECTOR_DEF_TYPES");class Vl{get(o,a=En){if(a===En){const l=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw l.name="NullInjectorError",l}return a}}function Jt(...i){return{\u0275providers:md(0,i)}}function md(i,...o){const a=[],l=new Set;let h;return ss(o,f=>{const y=f;Du(y,a,[],l)&&(h||(h=[]),h.push(y))}),void 0!==h&&dw(h,a),a}function dw(i,o){for(let a=0;a<i.length;a++){const{providers:h}=i[a];ss(h,f=>{o.push(f)})}}function Du(i,o,a,l){if(!(i=K(i)))return!1;let h=null,f=Zi(i);const y=!f&&R(i);if(f||y){if(y&&!y.standalone)return!1;h=i}else{const b=i.ngModule;if(f=Zi(b),!f)return!1;h=b}const w=l.has(h);if(y){if(w)return!1;if(l.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of b)Du(T,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;l.add(h);try{ss(f.imports,N=>{Du(N,o,a,l)&&(T||(T=[]),T.push(N))})}finally{}void 0!==T&&dw(T,o)}if(!w){const T=Er(h)||(()=>new h);o.push({provide:h,useFactory:T,deps:Dt},{provide:cw,useValue:h,multi:!0},{provide:Zp,useValue:()=>Fn(h),multi:!0})}const b=f.providers;null==b||w||ss(b,N=>{o.push(N)})}}return h!==i&&void 0!==i.providers}const yD=ge({provide:String,useValue:ge});function xs(i){return null!==i&&"object"==typeof i&&yD in i}function Cu(i){return"function"==typeof i}const Mr=new wn("Set Injector scope."),ro={},Ty={};let Ay;function Kp(){return void 0===Ay&&(Ay=new Vl),Ay}class Tu{}class Sy extends Tu{constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ry(o,y=>this.processProvider(y)),this.records.set(lw,Bl(void 0,this)),h.has("environment")&&this.records.set(Tu,Bl(void 0,this));const f=this.records.get(Mr);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(cw.multi,Dt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Js(this),l=gn(void 0);try{return o()}finally{Js(a),gn(l)}}get(o,a=En,l=Ke.Default){this.assertNotDestroyed();const h=Js(this),f=gn(void 0);try{if(!(l&Ke.SkipSelf)){let w=this.records.get(o);if(void 0===w){const b=function en(i){return"function"==typeof i||"object"==typeof i&&i instanceof wn}(o)&&Dr(o);w=b&&this.injectableDefInScope(b)?Bl(xy(o),ro):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&Ke.Self?Kp():this.parent).get(o,a=l&Ke.Optional&&a===En?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[qo]=y[qo]||[]).unshift(ce(o)),h)throw y;return function V(i,o,a,l){const h=i[qo];throw o[Vi]&&h.unshift(o[Vi]),i.message=function Y(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}h=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(Ui,"\n  ")}`}("\n"+i.message,h,a,l),i.ngTokenPath=h,i[qo]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{gn(f),Js(h)}}resolveInjectorInitializers(){const o=Js(this),a=gn(void 0);try{const l=this.get(Zp.multi,Dt,Ke.Self);for(const h of l)h()}finally{Js(o),gn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(ce(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(o){let a=Cu(o=K(o))?o:K(o&&o.provide);const l=function _D(i){return xs(i)?Bl(void 0,i.useValue):Bl(My(i),ro)}(o);if(Cu(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Bl(void 0,ro,!0),h.factory=()=>D(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===ro&&(a.value=Ty,a.value=a.factory()),"object"==typeof a.value&&a.value&&function $l(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function xy(i){const o=Dr(i),a=null!==o?o.factory:Er(i);if(null!==a)return a;if(i instanceof wn)throw new be(204,!1);if(i instanceof Function)return function hw(i){const o=i.length;if(o>0)throw function Fi(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new be(204,!1);const a=function xn(i){const o=i&&(i[Lr]||i[wi]);if(o){const a=function Wi(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new be(204,!1)}function My(i,o,a){let l;if(Cu(i)){const h=K(i);return Er(h)||xy(h)}if(xs(i))l=()=>K(i.useValue);else if(function Cy(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...D(i.deps||[]));else if(function Dy(i){return!(!i||!i.useExisting)}(i))l=()=>Fn(K(i.useExisting));else{const h=K(i&&(i.useClass||i.provide));if(!function Yp(i){return!!i.deps}(i))return Er(h)||xy(h);l=()=>new h(...D(i.deps))}return l}function Bl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Qh(i){return!!i.\u0275providers}function Ry(i,o){for(const a of i)Array.isArray(a)?Ry(a,o):Qh(a)?Ry(a.\u0275providers,o):o(a)}class fw{}class Jp{resolveComponentFactory(o){throw function pw(i){const o=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Oa=(()=>{class i{}return i.NULL=new Jp,i})();function gw(){return Pa(Kn(),Te())}function Pa(i,o){return new Jh(fr(i,o))}let Jh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=gw,i})();function Ny(i){return i instanceof Jh?i.nativeElement:i}class Oy{}let mw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function vD(){const i=Te(),a=on(Kn().index,i);return(Zn(a)?a:i)[11]}(),i})(),wD=(()=>{class i{}return i.\u0275prov=nn({token:i,providedIn:"root",factory:()=>null}),i})();class yw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Xh=new yw("14.2.12"),Py={};function Ly(i){return i.ngOriginalError}class ef{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ly(o);for(;a&&Ly(a);)a=Ly(a);return a||null}}function Fa(i){return i instanceof Function?i():i}function Gl(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=o.length;if(h+f===l||i.charCodeAt(h+f)<=32)return h}a=h+1}}const _w="ng-template";function vw(i,o,a){let l=0;for(;l<i.length;){let h=i[l++];if(a&&"class"===h){if(h=i[l],-1!==Gl(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function ww(i){return 4===i.type&&i.value!==_w}function $y(i,o,a){return o===(4!==i.type||a?i.value:_w)}function sf(i,o,a){let l=4;const h=i.attrs||[],f=function Iw(i){for(let o=0;o<i.length;o++)if(_a(i[o]))return o;return i.length}(h);let y=!1;for(let w=0;w<o.length;w++){const b=o[w];if("number"!=typeof b){if(!y)if(4&l){if(l=2|1&l,""!==b&&!$y(i,b,a)||""===b&&1===o.length){if(io(l))return!1;y=!0}}else{const T=8&l?b:o[++w];if(8&l&&null!==i.attrs){if(!vw(i.attrs,T,a)){if(io(l))return!1;y=!0}continue}const F=jy(8&l?"class":b,h,ww(i),a);if(-1===F){if(io(l))return!1;y=!0;continue}if(""!==T){let z;z=F>f?"":h[F+1].toLowerCase();const X=8&l?z:null;if(X&&-1!==Gl(X,T,0)||2&l&&T!==z){if(io(l))return!1;y=!0}}}}else{if(!y&&!io(l)&&!io(b))return!1;if(y&&io(b))continue;y=!1,l=b|1&l}}return io(l)||y}function io(i){return 0==(1&i)}function jy(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let f=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function La(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function Ew(i,o,a=!1){for(let l=0;l<o.length;l++)if(sf(i,o[l],a))return!0;return!1}function Au(i,o){return i?":not("+o.trim()+")":o}function eg(i){let o=i[0],a=1,l=2,h="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!io(y)&&(o+=Au(f,h),h=""),l=y,f=f||!io(l);a++}return""!==h&&(o+=Au(f,h)),o}const Gt={};function Cw(i){Tw(Kt(),Te(),An()+i,!1)}function Tw(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Mo(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Ro(o,f,0,a)}ns(a)}function Gy(i,o=null,a=null,l){const h=tg(i,o,a,l);return h.resolveInjectorInitializers(),h}function tg(i,o=null,a=null,l,h=new Set){const f=[a||Dt,Jt(i)];return l=l||("object"==typeof i?void 0:ce(i)),new Sy(f,o||Kp(),l||null,h)}let Ua=(()=>{class i{static create(a,l){if(Array.isArray(a))return Gy({name:""},l,a,"");{const h=a.name??"";return Gy({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=En,i.NULL=new Vl,i.\u0275prov=nn({token:i,providedIn:"any",factory:()=>Fn(lw)}),i.__NG_ELEMENT_ID__=-1,i})();function df(i,o=Ke.Default){const a=Te();return null===a?Fn(i,o):Fo(Kn(),a,K(i),o)}function LD(){throw new Error("invalid")}function Qy(i,o){return i<<17|o<<2}function us(i){return i>>17&32767}function Jy(i){return 2|i}function so(i){return(131068&i)>>2}function $i(i,o){return-131069&i|o<<2}function zl(i){return 1|i}function n_(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],f=a[l+1];if(-1!==f){const y=i.data[f];fl(h),y.contentQueries(2,o[f],f)}}}function Kl(i,o,a,l,h,f,y,w,b,T,N){const F=o.blueprint.slice();return F[0]=h,F[2]=76|l,(null!==N||i&&1024&i[2])&&(F[2]|=1024),aa(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=w||i&&i[11],F[12]=b||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=f,F[20]=function H0(){return j0++}(),F[21]=N,F[16]=2==o.type?i[16]:F,F}function Yl(i,o,a,l,h){let f=i.data[o];if(null===f)f=function Ql(i,o,a,l,h){const f=To(),y=tu(),b=i.data[o]=function QD(i,o,a,l,h,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(i,o,a,l,h),function Fc(){return kt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=h;const y=function eu(){const i=kt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Br(f,!0),f}function Jl(i,o,a,l){if(0===a)return-1;const h=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function r_(i,o,a){xo(o);try{const l=i.viewQuery;null!==l&&mg(1,l,a);const h=i.template;null!==h&&jw(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&n_(i,o),i.staticViewQueries&&mg(2,i.viewQuery,a);const f=i.components;null!==f&&function dg(i,o){for(let a=0;a<o.length;a++)oC(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,Es()}}function hg(i,o,a,l){const h=o[2];if(128!=(128&h)){xo(o);try{aa(o),function fa(i){return kt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&jw(i,o,a,2,l);const y=3==(3&h);if(y){const T=i.preOrderCheckHooks;null!==T&&Mo(o,T,null)}else{const T=i.preOrderHooks;null!==T&&Ro(o,T,0,null),jc(o,0)}if(function fg(i){for(let o=wu(i);null!==o;o=Nl(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],f=h[3];0==(512&h[2])&&kn(f,1),h[2]|=512}}}(o),function iC(i){for(let o=wu(i);null!==o;o=Nl(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];ws(l)&&hg(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&n_(i,o),y){const T=i.contentCheckHooks;null!==T&&Mo(o,T)}else{const T=i.contentHooks;null!==T&&Ro(o,T,1),jc(o,1)}!function cg(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)ns(~h);else{const f=h,y=a[++l],w=a[++l];Lc(y,f),w(2,o[f])}}}finally{ns(-1)}}(i,o);const w=i.components;null!==w&&function $w(i,o){for(let a=0;a<o.length;a++)sC(i,o[a])}(o,w);const b=i.viewQuery;if(null!==b&&mg(2,b,l),y){const T=i.viewCheckHooks;null!==T&&Mo(o,T)}else{const T=i.viewHooks;null!==T&&Ro(o,T,2),jc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,kn(o[3],-1))}finally{Es()}}}function jw(i,o,a,l,h){const f=An(),y=2&l;try{ns(-1),y&&o.length>22&&Tw(i,o,22,!1),a(l,h)}finally{ns(f)}}function Hw(i,o,a){if(go(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function i_(i,o,a){!Gs()||(function tC(i,o,a,l){const h=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||is(a,o),m(l,o);const y=a.initialInputs;for(let w=h;w<f;w++){const b=i.data[w],T=Zr(b);T&&rC(o,a,b);const N=Oi(o,i,w,a);m(N,o),null!==y&&Xw(0,w-h,N,b,0,y),T&&(on(a.index,o)[8]=N)}}(i,o,a,fr(a,o)),128==(128&a.flags)&&function nC(i,o,a){const l=a.directiveStart,h=a.directiveEnd,f=a.index,y=function Ch(){return kt.lFrame.currentDirectiveIndex}();try{ns(f);for(let w=l;w<h;w++){const b=i.data[w],T=o[w];So(w),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&l_(b,T)}}finally{ns(-1),So(y)}}(i,o,a))}function Ed(i,o,a=fr){const l=o.localNames;if(null!==l){let h=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],w=-1===y?a(o,i):i[y];i[h++]=w}}}function Gw(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=s_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function s_(i,o,a,l,h,f,y,w,b,T){const N=22+l,F=N+h,z=function KD(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Gt);return a}(N,F),X="function"==typeof T?T():T;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:w,declTNode:o,data:z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:X,incompleteFirstPass:!1}}function qw(i,o,a,l){const h=yg(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&rE(i).push(l,h.length-1))}function o_(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function zw(i,o){const l=o.directiveEnd,h=i.data,f=o.attrs,y=[];let w=null,b=null;for(let T=o.directiveStart;T<l;T++){const N=h[T],F=N.inputs,z=null===f||ww(o)?null:h_(F,f);y.push(z),w=o_(F,T,w),b=o_(N.outputs,T,b)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=w,o.outputs=b}function ji(i,o,a,l,h,f,y,w){const b=fr(o,a);let N,T=o.inputs;!w&&null!=T&&(N=T[l])?(sE(i,a,N,l,h),sl(o)&&a_(a,o.index)):3&o.type&&(l=function Ww(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=y?y(h,o.value||"",l):h,f.setProperty(b,l,h))}function a_(i,o){const a=on(o,i);16&a[2]||(a[2]|=32)}function u_(i,o,a,l){let h=!1;if(Gs()){const f=function c_(i,o,a){const l=i.directiveRegistry;let h=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];Ew(a,y.selectors,!1)&&(h||(h=[]),zs(is(a,o),i,y.type),Zr(y)?(d_(i,a),h.unshift(y)):h.push(y))}return h}(i,o,a),y=null===l?null:{"":-1};if(null!==f){h=!0,Qw(a,i.data.length,f.length);for(let N=0;N<f.length;N++){const F=f[N];F.providersResolver&&F.providersResolver(F)}let w=!1,b=!1,T=Jl(i,o,f.length,null);for(let N=0;N<f.length;N++){const F=f[N];a.mergedAttrs=va(a.mergedAttrs,F.hostAttrs),Jw(i,a,o,T,F),Nx(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const z=F.type.prototype;!w&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}zw(i,a)}y&&function Yw(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const f=a[o[h+1]];if(null==f)throw new be(-301,!1);l.push(o[h],f)}}}(a,l,y)}return a.mergedAttrs=va(a.mergedAttrs,a.attrs),h}function Kw(i,o,a,l,h,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~o.index;(function eC(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,h,y)}}function l_(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function d_(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function Nx(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Zr(o)&&(a[""]=i)}}function Qw(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function Jw(i,o,a,l,h){i.data[l]=h;const f=h.factory||(h.factory=Er(h.type)),y=new li(f,Zr(h),df);i.blueprint[l]=y,a[l]=y,Kw(i,o,0,l,Jl(i,a,h.hostVars,Gt),h)}function rC(i,o,a){const l=fr(o,i),h=Gw(a),f=i[10],y=pg(i,Kl(i,h,null,a.onPush?32:16,l,o,f,f.createRenderer(l,a),null,null,null));i[o.index]=y}function Wo(i,o,a,l,h,f){const y=fr(i,o);!function bd(i,o,a,l,h,f,y){if(null==f)i.removeAttribute(o,h,a);else{const w=null==y?we(f):y(f,l||"",h);i.setAttribute(o,h,w,a)}}(o[11],y,f,i.value,a,l,h)}function Xw(i,o,a,l,h,f){const y=f[o];if(null!==y){const w=l.setInput;for(let b=0;b<y.length;){const T=y[b++],N=y[b++],F=y[b++];null!==w?l.setInput(a,F,T,N):a[N]=F}}}function h_(i,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function tE(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function sC(i,o){const a=on(o,i);if(ws(a)){const l=a[1];48&a[2]?hg(l,a,l.template,a[8]):a[5]>0&&f_(a)}}function f_(i){for(let l=wu(i);null!==l;l=Nl(l))for(let h=10;h<l.length;h++){const f=l[h];if(ws(f))if(512&f[2]){const y=f[1];hg(y,f,y.template,f[8])}else f[5]>0&&f_(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=on(a[l],i);ws(h)&&h[5]>0&&f_(h)}}function oC(i,o){const a=on(o,i),l=a[1];(function aC(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),r_(l,a,a[8])}function pg(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function gg(i){for(;i;){i[2]|=32;const o=Na(i);if(ol(i)&&!o)return i;i=o}return null}function mr(i,o,a,l=!0){const h=o[10];h.begin&&h.begin();try{hg(i,o,i.template,a)}catch(y){throw l&&p_(o,y),y}finally{h.end&&h.end()}}function mg(i,o,a){fl(0),o(i,a)}function yg(i){return i[7]||(i[7]=[])}function rE(i){return i.cleanup||(i.cleanup=[])}function p_(i,o){const a=i[9],l=a?a.get(ef,null):null;l&&l.handleError(o)}function sE(i,o,a,l,h){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],b=o[y],T=i.data[y];null!==T.setInput?T.setInput(b,h,l,w):b[w]=h}}function _g(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?h=me(h,w):2==f&&(l=me(l,w+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}function Id(i,o,a,l,h=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(Mn(f)),si(f))for(let w=10;w<f.length;w++){const b=f[w],T=b[1].firstChild;null!==T&&Id(b[1],b,T,l)}const y=a.type;if(8&y)Id(i,o,a.child,l);else if(32&y){const w=Ml(a,o);let b;for(;b=w();)l.push(b)}else if(16&y){const w=Q0(o,a);if(Array.isArray(w))l.push(...w);else{const b=Na(o[16]);Id(b[1],b,w,l,!0)}}a=h?a.projectionNext:a.next}return l}class Dd{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Id(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(si(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(ay(o,l),Zs(a,l))}this._attachedToViewContainer=!1}uy(this._lView[1],this._lView)}onDestroy(o){qw(this._lView[1],this._lView,null,o)}markForCheck(){gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){mr(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function q0(i,o){hd(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=o}}class vg extends Dd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;mr(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class oE extends Oa{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=R(o);return new wg(a,this.ngModule)}}function g_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class m_{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const h=this.injector.get(o,Py,l);return h!==Py||a===Py?h:this.parentInjector.get(o,a,l)}}class wg extends fw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Dw(i){return i.map(eg).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return g_(this.componentDef.inputs)}get outputs(){return g_(this.componentDef.outputs)}create(o,a,l,h){let f=(h=h||this.ngModule)instanceof Tu?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new m_(o,f):o,w=y.get(Oy,null);if(null===w)throw new be(407,!1);const b=y.get(wD,null),T=w.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",F=l?function YD(i,o,a){return i.selectRootElement(o,a===dt.ShadowDom)}(T,l,this.componentDef.encapsulation):G0(T,N,function Cd(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),z=this.componentDef.onPush?288:272,X=s_(0,null,null,1,0,null,null,null,null,null),ve=Kl(null,X,null,z,null,null,w,T,b,y,null);let je,ze;xo(ve);try{const at=function lC(i,o,a,l,h,f){const y=a[1];a[22]=i;const b=Yl(y,22,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(_g(b,T,!0),null!==i&&(rs(h,i,T),null!==b.classes&&Gp(h,i,b.classes),null!==b.styles&&Hp(h,i,b.styles)));const N=l.createRenderer(i,o),F=Kl(a,Gw(o),null,o.onPush?32:16,a[22],b,l,N,f||null,null,null);return y.firstCreatePass&&(zs(is(b,a),y,o.type),d_(y,b),Qw(b,a.length,1)),pg(a,F),a[22]=F}(F,this.componentDef,ve,w,T);if(F)if(l)rs(T,F,["ng-version",Xh.full]);else{const{attrs:bt,classes:Me}=function TD(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===h?""!==f&&o.push(f,i[++l]):8===h&&a.push(f);else{if(!io(h))break;h=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);bt&&rs(T,F,bt),Me&&Me.length>0&&Gp(T,F,Me.join(" "))}if(ze=Io(X,22),void 0!==a){const bt=ze.projection=[];for(let Me=0;Me<this.ngContentSelectors.length;Me++){const Tt=a[Me];bt.push(null!=Tt?Array.from(Tt):null)}}je=function cC(i,o,a,l){const h=a[1],f=function XD(i,o,a){const l=Kn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Jw(i,l,o,Jl(i,o,1,null),a),zw(i,l));const h=Oi(o,i,l.directiveStart,l);m(h,o);const f=fr(l,o);return f&&m(f,o),h}(h,a,o);if(i[8]=a[8]=f,null!==l)for(const w of l)w(f,o);if(o.contentQueries){const w=Kn();o.contentQueries(1,f,w.directiveStart)}const y=Kn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ns(y.index),Kw(a[1],y,0,y.directiveStart,y.directiveEnd,o),l_(o,f)),f}(at,this.componentDef,ve,[uE]),r_(X,ve,null)}finally{Es()}return new y_(this.componentType,je,Pa(ze,ve),ve,ze)}}class y_ extends class jl{}{constructor(o,a,l,h,f){super(),this.location=l,this._rootLView=h,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new vg(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const f=this._rootLView;sE(f[1],f,h,o,a),a_(f,this._tNode.index)}}get injector(){return new Uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function uE(){const i=Kn();nu(Te()[1],i)}function cE(i){let o=function lE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if(Zr(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new be(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const y=i;y.inputs=dE(i.inputs),y.declaredInputs=dE(i.declaredInputs),y.outputs=dE(i.outputs);const w=h.hostBindings;w&&hC(i,w);const b=h.viewQuery,T=h.contentQueries;if(b&&hE(i,b),T&&dC(i,T),fe(i.inputs,h.inputs),fe(i.declaredInputs,h.declaredInputs),fe(i.outputs,h.outputs),Zr(h)&&h.data.animation){const N=i.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===cE&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Eg(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=va(h.hostAttrs,a=va(a,h.hostAttrs))}}(l)}function dE(i){return i===Cr?{}:i===Dt?[]:i}function hE(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function dC(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,f)=>{o(l,h,f),a(l,h,f)}:o}function hC(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let bg=null;function Xl(){if(!bg){const i=Rt.Symbol;if(i&&i.iterator)bg=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(bg=l)}}}return bg}function Td(i){return!!__(i)&&(Array.isArray(i)||!(i instanceof Map)&&Xl()in i)}function __(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function qt(i,o,a){return i[o]=a}function hi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Ig(i,o,a,l){const h=Te();return hi(h,pa(),o)&&(Kt(),Wo(Cn(),h,i,o,a,l)),Ig}function jr(i,o,a,l){return hi(i,pa(),a)?o+we(a)+l:Gt}function Hr(i,o,a,l,h,f,y,w){const b=Te(),T=Kt(),N=i+22,F=T.firstCreatePass?function Cg(i,o,a,l,h,f,y,w,b){const T=o.consts,N=Yl(o,i,4,y||null,ui(T,w));u_(o,a,N,ui(T,b)),nu(o,N);const F=N.tViews=s_(2,N,l,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,N),F.queries=o.queries.embeddedTView(N)),N}(N,T,b,o,a,l,h,f,y):T.data[N];Br(F,!1);const z=b[11].createComment("");$p(T,b,z,F),m(z,b),pg(b,b[N]=tE(z,b,z,F)),ia(F)&&i_(T,b,F),null!=y&&Ed(b,F,w)}function Tg(i,o,a){const l=Te();return hi(l,pa(),o)&&ji(Kt(),Cn(),l,i,o,l[11],a,!1),Tg}function _f(i,o,a,l,h){const y=h?"class":"style";sE(i,a,o.inputs[y],y,l)}function Rr(i,o,a,l){const h=Te(),f=Kt(),y=22+i,w=h[11],b=h[y]=G0(w,o,function ml(){return kt.lFrame.currentNamespace}()),T=f.firstCreatePass?function vE(i,o,a,l,h,f,y){const w=o.consts,T=Yl(o,i,2,h,ui(w,f));return u_(o,a,T,ui(w,y)),null!==T.attrs&&_g(T,T.attrs,!1),null!==T.mergedAttrs&&_g(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,f,h,0,o,a,l):f.data[y];Br(T,!0);const N=T.mergedAttrs;null!==N&&rs(w,b,N);const F=T.classes;null!==F&&Gp(w,b,F);const z=T.styles;return null!==z&&Hp(w,b,z),64!=(64&T.flags)&&$p(f,h,b,T),0===function la(){return kt.lFrame.elementDepthCount}()&&m(b,h),function Pc(){kt.lFrame.elementDepthCount++}(),ia(T)&&(i_(f,h,T),Hw(f,T,h)),null!==l&&Ed(h,T),Rr}function Ag(){let i=Kn();tu()?Ao():(i=i.parent,Br(i,!1));const o=i;!function ca(){kt.lFrame.elementDepthCount--}();const a=Kt();return a.firstCreatePass&&(nu(a,i),go(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function iu(i){return 0!=(16&i.flags)}(o)&&_f(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function su(i){return 0!=(32&i.flags)}(o)&&_f(a,o,Te(),o.stylesWithoutHost,!1),Ag}function xd(i,o,a,l){return Rr(i,o,a,l),Ag(),xd}function Md(i,o,a){const l=Te(),h=Kt(),f=i+22,y=h.firstCreatePass?function wE(i,o,a,l,h){const f=o.consts,y=ui(f,l),w=Yl(o,i,8,"ng-container",y);return null!==y&&_g(w,y,!0),u_(o,a,w,ui(f,h)),null!==o.queries&&o.queries.elementStart(o,w),w}(f,h,l,o,a):h.data[f];Br(y,!0);const w=l[f]=l[11].createComment("");return $p(h,l,w,y),m(w,l),ia(y)&&(i_(h,l,y),Hw(h,y,l)),null!=a&&Ed(l,y),Md}function nc(){let i=Kn();const o=Kt();return tu()?Ao():(i=i.parent,Br(i,!1)),o.firstCreatePass&&(nu(o,i),go(i)&&o.queries.elementEnd(i)),nc}function Sg(){return Te()}function v_(i){return!!i&&"function"==typeof i.then}function EE(i){return!!i&&"function"==typeof i.subscribe}const rc=EE;function xg(i,o,a,l){const h=Te(),f=Kt(),y=Kn();return function IE(i,o,a,l,h,f,y,w){const b=ia(l),N=i.firstCreatePass&&rE(i),F=o[8],z=yg(o);let X=!0;if(3&l.type||w){const ze=fr(l,o),at=w?w(ze):ze,bt=z.length,Me=w?fn=>w(Mn(fn[l.index])):l.index;let Tt=null;if(!w&&b&&(Tt=function bE(i,o,a,l){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===l){const w=o[7],b=h[f+2];return w.length>b?w[b]:null}"string"==typeof y&&(f+=2)}return null}(i,o,h,l.index)),null!==Tt)(Tt.__ngLastListenerFn__||Tt).__ngNextListenerFn__=f,Tt.__ngLastListenerFn__=f,X=!1;else{f=vf(l,o,F,f,!1);const fn=a.listen(at,h,f);z.push(f,fn),N&&N.push(h,Me,bt,bt+1)}}else f=vf(l,o,F,f,!1);const ve=l.outputs;let je;if(X&&null!==ve&&(je=ve[h])){const ze=je.length;if(ze)for(let at=0;at<ze;at+=2){const Nn=o[je[at]][je[at+1]].subscribe(f),Wa=z.length;z.push(f,Nn),N&&N.push(h,l.index,Wa,-(Wa+1))}}}(f,h,h[11],y,i,o,0,l),xg}function w_(i,o,a,l){try{return!1!==a(l)}catch(h){return p_(i,h),!1}}function vf(i,o,a,l,h){return function f(y){if(y===Function)return l;gg(2&i.flags?on(i.index,o):o);let b=w_(o,0,l,y),T=f.__ngNextListenerFn__;for(;T;)b=w_(o,0,T,y)&&b,T=T.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Rg(i=1){return function bs(i){return(kt.lFrame.contextLView=function Bc(i,o){for(;i>0;)o=o[15],i--;return o}(i,kt.lFrame.contextLView))[8]}(i)}function I_(i,o,a){return wf(i,"",o,"",a),I_}function wf(i,o,a,l,h){const f=Te(),y=jr(f,o,a,l);return y!==Gt&&ji(Kt(),Cn(),f,i,y,f[11],h,!1),wf}function C_(i,o,a,l,h){const f=i[a+1],y=null===o;let w=l?us(f):so(f),b=!1;for(;0!==w&&(!1===b||y);){const N=i[w+1];Ng(i[w],o)&&(b=!0,i[w+1]=l?zl(N):Jy(N)),w=l?us(N):so(N)}b&&(i[a+1]=l?Jy(f):zl(f))}function Ng(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Di(i,o)>=0}function kr(i,o){return function Ms(i,o,a,l){const h=Te(),f=Kt(),y=function ts(i){const o=kt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function k_(i,o,a,l){const h=i.data;if(null===h[a+1]){const f=h[An()],y=function FE(i,o){return o>=i.expandoStartIndex}(i,a);(function U_(i,o){return 0!=(i.flags&(o?16:32))})(f,l)&&null===o&&!y&&(o=!1),o=function O_(i,o,a,l){const h=function hl(i){const o=kt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=Pu(a=F_(null,i,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=F_(h,i,o,a,l),null===f){let b=function vC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==so(l))return i[us(l)]}(i,o,l);void 0!==b&&Array.isArray(b)&&(b=F_(null,i,o,b[1],l),b=Pu(b,o.attrs,l),function P_(i,o,a,l){i[us(a?o.classBindings:o.styleBindings)]=l}(i,o,l,b))}else f=function LE(i,o,a){let l;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)l=Pu(l,i[f].hostAttrs,a);return Pu(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(h,f,o,l),function xE(i,o,a,l,h,f){let y=f?o.classBindings:o.styleBindings,w=us(y),b=so(y);i[l]=a;let N,T=!1;if(Array.isArray(a)){const F=a;N=F[1],(null===N||Di(F,N)>0)&&(T=!0)}else N=a;if(h)if(0!==b){const z=us(i[w+1]);i[l+1]=Qy(z,w),0!==z&&(i[z+1]=$i(i[z+1],l)),i[w+1]=function VD(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=Qy(w,0),0!==w&&(i[w+1]=$i(i[w+1],l)),w=l;else i[l+1]=Qy(b,0),0===w?w=l:i[b+1]=$i(i[b+1],l),b=l;T&&(i[l+1]=Jy(i[l+1])),C_(i,N,l,!0),C_(i,N,l,!1),function ME(i,o,a,l,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Di(f,o)>=0&&(a[l+1]=zl(a[l+1]))}(o,N,i,l,f),y=Qy(w,b),f?o.classBindings=y:o.styleBindings=y}(h,f,o,a,y,l)}}(f,i,y,l),o!==Gt&&hi(h,y,o)&&function VE(i,o,a,l,h,f,y,w){if(!(3&o.type))return;const b=i.data,T=b[w+1];bf(function Xy(i){return 1==(1&i)}(T)?kd(b,o,a,h,so(T),y):void 0)||(bf(f)||function Fw(i){return 2==(2&i)}(T)&&(f=kd(b,null,a,h,w,y)),function tx(i,o,a,l,h){if(o)h?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:Bi.DashCase;null==h?i.removeStyle(a,l,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=Bi.Important),i.setStyle(a,l,h,f))}}(l,y,bi(An(),a),h,f))}(f,f.data[An()],h,h[11],i,h[y+1]=function BE(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ce(Ol(i)))),i}(o,a),l,y)}(i,o,null,!0),kr}function F_(i,o,a,l,h){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=o[w],l=Pu(l,f.hostAttrs,h),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Pu(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Sr(i,y,!!a||o[++f]))}return void 0===i?null:i}function kd(i,o,a,l,h,f){const y=null===o;let w;for(;h>0;){const b=i[h],T=Array.isArray(b),N=T?b[1]:b,F=null===N;let z=a[h+1];z===Gt&&(z=F?Dt:void 0);let X=F?Cl(z,l):N===l?z:void 0;if(T&&!bf(X)&&(X=Cl(b,l)),bf(X)&&(w=X,y))return w;const ve=i[h+1];h=y?us(ve):so(ve)}if(null!==o){let b=f?o.residualClasses:o.residualStyles;null!=b&&(w=Cl(b,l))}return w}function bf(i){return void 0!==i}function If(i,o=""){const a=Te(),l=Kt(),h=i+22,f=l.firstCreatePass?Yl(l,h,1,o,null):l.data[h],y=a[h]=function Up(i,o){return i.createText(o)}(a[11],o);$p(l,a,y,f),Br(f,!1)}function V_(i){return Fg("",i,""),V_}function Fg(i,o,a){const l=Te(),h=jr(l,i,o,a);return h!==Gt&&function Nu(i,o,a){const l=bi(o,i);!function tD(i,o,a){i.setValue(o,a)}(i[11],l,a)}(l,An(),h),Fg}const Ba=void 0;var bC=["en",[["a","p"],["AM","PM"],Ba],[["AM","PM"],Ba,Ba],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ba,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ba,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ba,"{1} 'at' {0}",Ba],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function EC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let oc={};function Q_(i){const o=function Gn(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Mf(o);if(a)return a;const l=o.split("-")[0];if(a=Mf(l),a)return a;if("en"===l)return bC;throw new be(701,!1)}function Ko(i){return Q_(i)[It.PluralCase]}function Mf(i){return i in oc||(oc[i]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[i]),oc[i]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Yo="en-US";let YE=Yo;function jf(i,o,a,l,h){if(i=K(i),Array.isArray(i))for(let f=0;f<i.length;f++)jf(i[f],o,a,l,h);else{const f=Kt(),y=Te();let w=Cu(i)?i:K(i.provide),b=My(i);const T=Kn(),N=1048575&T.providerIndexes,F=T.directiveStart,z=T.providerIndexes>>20;if(Cu(i)||!i.multi){const X=new li(b,h,df),ve=Xn(w,o,h?N:N+z,F);-1===ve?(zs(is(T,y),f,w),gv(f,i,o.length),o.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(X),y.push(X)):(a[ve]=X,y[ve]=X)}else{const X=Xn(w,o,N+z,F),ve=Xn(w,o,N,N+z),je=X>=0&&a[X],ze=ve>=0&&a[ve];if(h&&!ze||!h&&!je){zs(is(T,y),f,w);const at=function ht(i,o,a,l,h){const f=new li(i,a,df);return f.multi=[],f.index=o,f.componentProviders=0,Be(f,h,l&&!a),f}(h?mv:uc,a.length,h,l,b);!h&&ze&&(a[ve].providerFactory=at),gv(f,i,o.length,0),o.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(at),y.push(at)}else gv(f,i,X>-1?X:ve,Be(a[h?ve:X],b,!h&&l));!h&&l&&ze&&a[ve].componentProviders++}}}function gv(i,o,a,l){const h=Cu(o),f=function hx(i){return!!i.useClass}(o);if(h||f){const b=(f?K(o.useClass):o).prototype.ngOnDestroy;if(b){const T=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const N=T.indexOf(a);-1===N?T.push(a,[l,b]):T[N+1].push(l,b)}else T.push(a,b)}}}function Be(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Xn(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function uc(i,o,a,l){return rt(this.multi,[])}function mv(i,o,a,l){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Oi(a,a[1],this.providerFactory.index,l);f=w.slice(0,y),rt(h,f);for(let b=y;b<w.length;b++)f.push(w[b])}else f=[],rt(h,f);return f}function rt(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function mb(i,o=[]){return a=>{a.providersResolver=(l,h)=>function Bu(i,o,a){const l=Kt();if(l.firstCreatePass){const h=Zr(i);jf(a,l.data,l.blueprint,h,!0),jf(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class qe{}class he{}function ke(i,o){return new yv(i,o??null)}class yv extends qe{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new oE(this);const l=tt(o);this._bootstrapComponents=Fa(l.bootstrap),this._r3Injector=tg(o,a,[{provide:qe,useValue:this},{provide:Oa,useValue:this.componentFactoryResolver}],ce(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class _v extends he{constructor(o){super(),this.moduleType=o}create(o){return new yv(this.moduleType,o)}}class OC extends qe{constructor(o,a,l){super(),this.componentFactoryResolver=new oE(this),this.instance=null;const h=new Sy([...o,{provide:qe,useValue:this},{provide:Oa,useValue:this.componentFactoryResolver}],a||Kp(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function vv(i,o,a=null){return new OC(i,o,a).injector}let PC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=md(0,a.type),h=l.length>0?vv([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=nn({token:i,providedIn:"environment",factory:()=>new i(Fn(Tu))}),i})();function yb(i){i.getStandaloneInjector=o=>o.get(PC).getOrCreateStandaloneInjector(i)}function Hf(i,o,a,l){return function em(i,o,a,l,h,f){const y=o+a;return hi(i,y,h)?qt(i,y+1,f?l.call(f,h):l(h)):Rs(i,y+1)}(Te(),Yn(),i,o,a,l)}function Rs(i,o){const a=i[o];return a===Gt?void 0:a}function le(i,o,a,l,h,f,y){const w=o+a;return function tc(i,o,a,l){const h=hi(i,o,a);return hi(i,o+1,l)||h}(i,w,h,f)?qt(i,w+2,y?l.call(y,h,f):l(h,f)):Rs(i,w+2)}function Wd(i,o){const a=Kt();let l;const h=i+22;a.firstCreatePass?(l=function $u(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const f=l.factory||(l.factory=Er(l.type)),y=gn(df);try{const w=wa(!1),b=f();return wa(w),function Ou(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Te(),h,b),b}finally{gn(y)}}function Dv(i,o,a,l){const h=i+22,f=Te(),y=function Ni(i,o){return i[o]}(f,h);return function ei(i,o){return i[1].data[o].pure}(f,h)?le(f,Yn(),o,y.transform,a,l,y):y.transform(a,l)}function Jo(i){return o=>{setTimeout(i,void 0,o)}}const co=class jC extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,f=a||(()=>null),y=l;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),f=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(f=Jo(f),h&&(h=Jo(h)),y&&(y=Jo(y)));const w=super.subscribe({next:h,error:f,complete:y});return o instanceof B.w0&&o.add(w),w}};function dc(){return this._results[Xl()]()}class tm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Xl(),l=tm.prototype;l[a]||(l[a]=dc)}get changes(){return this._changes||(this._changes=new co)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=Ar(o);(this._changesDetected=!function Yc(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],f=o[l];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let $a=(()=>{class i{}return i.__NG_ELEMENT_ID__=HC,i})();const zf=$a,Tb=class extends zf{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,h=Kl(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(l)),r_(l,h,o),new Dd(h)}};function HC(){return lr(Kn(),Te())}function lr(i,o){return 4&i.type?new Tb(o,i,Pa(i,o)):null}let nm=(()=>{class i{}return i.__NG_ELEMENT_ID__=ju,i})();function ju(){return Zd(Kn(),Te())}const cr=nm,Hu=class extends cr{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Pa(this._hostTNode,this._hostLView)}get injector(){return new Uo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ea(this._hostTNode,this._hostLView);if(Mh(o)){const a=Is(o,this._hostLView),l=Qn(o);return new Uo(a[1].data[l+8],a)}return new Uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=rm(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let h,f;"number"==typeof l?h=l:null!=l&&(h=l.index,f=l.injector);const y=o.createEmbeddedView(a||{},f);return this.insert(y,h),y}createComponent(o,a,l,h,f){const y=o&&!function Qr(i){return"function"==typeof i}(o);let w;if(y)w=a;else{const F=a||{};w=F.index,l=F.injector,h=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const b=y?o:new wg(R(o)),T=l||this.parentInjector;if(!f&&null==b.ngModule){const z=(y?T:this.parentInjector).get(Tu,null);z&&(f=z)}const N=b.create(T,h,void 0,f);return this.insert(N.hostView,w),N}insert(o,a){const l=o._lView,h=l[1];if(function cl(i){return si(i[3])}(l)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const F=l[3],z=new Hu(F,F[6],F[3]);z.detach(z.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function z0(i,o,a,l){const h=10+l,f=a.length;l>0&&(a[h-1][4]=o),l<f-10?(o[4]=a[h],Da(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function bu(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(i),o[2]|=64}(h,l,y,f);const w=jp(f,y),b=l[11],T=Vp(b,y[7]);return null!==T&&function nD(i,o,a,l,h,f){l[0]=h,l[6]=o,hd(i,l,a,1,h,f)}(h,y[6],b,l,T,w),o.attachToViewContainerRef(),Da(im(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=rm(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=ay(this._lContainer,a);l&&(Zs(im(this._lContainer),a),uy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=ay(this._lContainer,a);return l&&null!=Zs(im(this._lContainer),a)?new Dd(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function rm(i){return i[8]}function im(i){return i[8]||(i[8]=[])}function Zd(i,o){let a;const l=o[i.index];if(si(l))a=l;else{let h;if(8&i.type)h=Mn(l);else{const f=o[11];h=f.createComment("");const y=fr(i,o);kl(f,Vp(f,y),h,function fy(i,o){return i.nextSibling(o)}(f,y),!1)}o[i.index]=a=tE(l,o,h,i),pg(o,a)}return new Hu(a,i,o)}class ks{constructor(o){this.queryList=o,this.matches=null}clone(){return new ks(this.queryList)}setDirty(){this.queryList.setDirty()}}class hc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new hc(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Nv(o,a).matches&&this.queries[a].setDirty()}}class ja{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class om{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,h);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new om(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class qu{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new qu(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const f=l[h];this.matchTNodeWithReadOption(o,a,Tv(a,f)),this.matchTNodeWithReadOption(o,a,Ia(a,o,f,!1,!1))}else l===$a?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ia(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Jh||h===nm||h===$a&&4&a.type)this.addMatch(a.index,-2);else{const f=Ia(a,o,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Tv(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Av(i,o,a,l){return-1===a?function fc(i,o){return 11&i.type?Pa(i,o):4&i.type?lr(i,o):null}(o,i):-2===a?function Wf(i,o,a){return a===Jh?Pa(o,i):a===$a?lr(o,i):a===nm?Zd(o,i):void 0}(i,o,l):Oi(i,i[1],a,o)}function Sv(i,o,a,l){const h=o[19].queries[l];if(null===h.matches){const f=i.data,y=a.matches,w=[];for(let b=0;b<y.length;b+=2){const T=y[b];w.push(T<0?null:Av(o,f[T],y[b+1],a.metadata.read))}h.matches=w}return h.matches}function am(i,o,a,l){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const y=Sv(i,o,h,a);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)l.push(y[w/2]);else{const T=f[w+1],N=o[-b];for(let F=10;F<N.length;F++){const z=N[F];z[17]===z[3]&&am(z[1],z,T,l)}if(null!==N[9]){const F=N[9];for(let z=0;z<F.length;z++){const X=F[z];am(X[1],X,T,l)}}}}}return l}function Zf(i){const o=Te(),a=Kt(),l=ga();fl(l+1);const h=Nv(a,l);if(i.dirty&&function ll(i){return 4==(4&i[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?am(a,o,l,[]):Sv(a,o,h,l);i.reset(f,Ny),i.notifyOnChanges()}return!0}return!1}function xv(i,o,a,l){const h=Kt();if(h.firstCreatePass){const f=Kn();(function Rv(i,o,a){null===i.queries&&(i.queries=new om),i.queries.track(new qu(o,a))})(h,new ja(o,a,l),f.index),function zu(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function Mv(i,o,a){const l=new tm(4==(4&a));qw(i,o,l,l.destroy),null===o[19]&&(o[19]=new hc),o[19].queries.push(new ks(l))}(h,Te(),a)}function Ab(){return function GC(i,o){return i[19].queries[o].queryList}(Te(),ga())}function Nv(i,o){return i.queries.getByIndex(o)}function mc(...i){}const Vb=new wn("Application Initializer");let tp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=mc,this.reject=mc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(v_(f))a.push(f);else if(rc(f)){const y=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Fn(Vb,8))},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const yc=new wn("AppId",{providedIn:"root",factory:function Zu(){return`${Ga()}${Ga()}${Ga()}`}});function Ga(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jv=new wn("Platform Initializer"),eh=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hv=new wn("appBootstrapListener");let rT=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Sn=new wn("LocaleId",{providedIn:"root",factory:()=>xa(Sn,Ke.Optional|Ke.SkipSelf)||function iT(){return typeof $localize<"u"&&$localize.locale||Yo}()}),pm=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class np{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let oT=(()=>{class i{compileModuleSync(a){return new _v(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Fa(tt(a).declarations).reduce((y,w)=>{const b=R(w);return b&&y.push(new wg(b)),y},[]);return new np(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Wv=(()=>Promise.resolve(0))();function Zv(i){typeof Zone>"u"?Wv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Bt{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new co(!1),this.onMicrotaskEmpty=new co(!1),this.onStable=new co(!1),this.onError=new co(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Ir(){let i=Rt.requestAnimationFrame,o=Rt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function uT(i){const o=()=>{!function Ku(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,yi(i),i.isCheckStableRunning=!0,gm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),yi(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,f,y,w)=>{try{return Kv(i),a.invokeTask(h,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),th(i)}},onInvoke:(a,l,h,f,y,w,b)=>{try{return Kv(i),a.invoke(h,f,y,w,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),th(i)}},onHasTask:(a,l,h,f)=>{a.hasTask(h,f),l===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,yi(i),gm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bt.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(Bt.isInAngularZone())throw new be(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,$b,mc,mc);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const $b={};function gm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function yi(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Kv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function th(i){i._nesting--,gm(i)}class jb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new co,this.onMicrotaskEmpty=new co,this.onStable=new co,this.onError=new co}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const ho=new wn(""),Yv=new wn("");let zt,ip=(()=>{class i{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zt||(function lT(i){zt=i}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bt.assertNotInAngularZone(),Zv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Fn(Bt),Fn(Hb),Fn(Yv))},i.\u0275prov=nn({token:i,factory:i.\u0275fac}),i})(),Hb=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return zt?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Yu=null;const sp=new wn("AllowMultipleToken"),_c=new wn("PlatformDestroyListeners");class qb{constructor(o,a){this.name=o,this.token=a}}function Wb(i,o,a=[]){const l=`Platform: ${o}`,h=new wn(l);return(f=[])=>{let y=ym();if(!y||y.injector.get(sp,!1)){const w=[...a,...f,{provide:h,useValue:!0}];i?i(w):function dT(i){if(Yu&&!Yu.get(sp,!1))throw new be(400,!1);Yu=i;const o=i.get(Kb);(function Qv(i){const o=i.get(jv,null);o&&o.forEach(a=>a())})(i)}(function Zb(i=[],o){return Ua.create({name:o,providers:[{provide:Mr,useValue:"platform"},{provide:_c,useValue:new Set([()=>Yu=null])},...i]})}(w,l))}return function hT(i){const o=ym();if(!o)throw new be(401,!1);return o}()}}function ym(){return Yu?.get(Kb)??null}let Kb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function _m(i,o){let a;return a="noop"===i?new jb:("zone.js"===i?void 0:i)||new Bt(o),a}(l?.ngZone,function dr(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:Bt,useValue:h}];return h.run(()=>{const y=Ua.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),b=w.injector.get(ef,null);if(!b)throw new be(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:N=>{b.handleError(N)}});w.onDestroy(()=>{rh(this._modules,w),T.unsubscribe()})}),function Jv(i,o,a){try{const l=a();return v_(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(b,h,()=>{const T=w.injector.get(tp);return T.runInitializers(),T.donePromise.then(()=>(function Ud(i){jt(i,"Expected localeId to be defined"),"string"==typeof i&&(YE=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Sn,Yo)||Yo),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,l=[]){const h=nh({},l);return function mm(i,o,a){const l=new _v(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const l=a.injector.get(fs);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new be(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(_c,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Fn(Ua))},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function nh(i,o){return Array.isArray(o)?o.reduce(nh,i):{...i,...o}}let fs=(()=>{class i{constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new k.y(w=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Bt.assertNotInAngularZone(),Zv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Bt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,re.T)(f,y.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const h=a instanceof fw;if(!this._injector.get(tp).done)throw!h&&Ne(a),new be(405,false);let y;y=h?a:this._injector.get(Oa).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function Gb(i){return i.isBoundToModule}(y)?void 0:this._injector.get(qe),T=y.create(Ua.NULL,[],l||y.selector,w),N=T.location.nativeElement,F=T.injector.get(ho,null);return F?.registerApplication(N),T.onDestroy(()=>{this.detachView(T.hostView),rh(this.components,T),F?.unregisterApplication(N)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;rh(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Hv,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>rh(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new be(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Fn(Bt),Fn(Tu),Fn(ef))},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function rh(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let e0=!0,t0=!1;function Yb(){return t0=!0,e0}function fT(){if(t0)throw new Error("Cannot enable prod mode after platform setup.");e0=!1}let pT=(()=>{class i{}return i.__NG_ELEMENT_ID__=Qb,i})();function Qb(i){return function n0(i,o,a){if(sl(i)&&!a){const l=on(i.index,o);return new Dd(l,l)}return 47&i.type?new Dd(o[16],o):null}(Kn(),Te(),16==(16&i))}class eI{constructor(){}supports(o){return Td(o)}create(o){return new vT(o)}}const _T=(i,o)=>o;class vT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||_T}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<nI(l,h,f)?a:l,w=nI(y,h,f),b=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const T=w-h,N=b-h;if(T!=N){for(let z=0;z<T;z++){const X=z<f.length?f[z]:f[z]=0,ve=X+z;N<=ve&&ve<T&&(f[z]=X+1)}f[y.previousIndex]=N-T}}w!==b&&o(y,w,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Td(o))throw new be(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),l=!0),a=a._next}else h=0,function Fx(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Xl()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(h,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,h)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,h)):o=this._addAfter(new wT(a,l),f,h),o}_verifyReinsertion(o,a,l,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new tI),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class wT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ET{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class tI{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new ET,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nI(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class rI{constructor(){}supports(o){return o instanceof Map||__(o)}create(){return new bT}}class bT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||__(o)))throw new be(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const l=new IT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class IT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iI(){return new Im([new eI])}let Im=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||iI()),deps:[[i,new it,new Ae]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new be(901,!1)}}return i.\u0275prov=nn({token:i,providedIn:"root",factory:iI}),i})();function s0(){return new Dm([new rI])}let Dm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||s0()),deps:[[i,new it,new Ae]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new be(901,!1)}}return i.\u0275prov=nn({token:i,providedIn:"root",factory:s0}),i})();const a0=Wb(null,"core",[]);let u0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Fn(fs))},i.\u0275mod=Xt({type:i}),i.\u0275inj=Lt({}),i})();function Ju(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ut,Ce,P)=>{P.d(Ce,{Z:()=>be});var c=P(2090),B=P(4859),k=P(9681),re=P(1877);class ae{constructor(we,pe){this._delegate=we,this.firebase=pe,(0,k._addComponent)(we,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(we,pe=k._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(we);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Ye=Ze.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:pe})}_removeServiceInstance(we,pe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(pe)}_addComponent(we){(0,k._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,k._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function me(){const et=function ce(et){const we={},pe={__esModule:!0,initializeApp:function Fe(ne,ue={}){const ye=k.initializeApp(ne,ue);if((0,c.r3)(we,ye.name))return we[ye.name];const Z=new et(ye,pe);return we[ye.name]=Z,Z},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ee(ne){const ue=ne.name,ye=ue.replace("-compat","");if(k._registerComponent(ne)&&"PUBLIC"===ne.type){const Z=(J=Ze())=>{if("function"!=typeof J[ye])throw fe.create("invalid-app-argument",{appName:ue});return J[ye]()};void 0!==ne.serviceProps&&(0,c.ZB)(Z,ne.serviceProps),pe[ye]=Z,et.prototype[ye]=function(...J){return this._getService.bind(this,ue).apply(this,ne.multipleInstances?J:[])}}return"PUBLIC"===ne.type?pe[ye]:null},removeApp:function Ye(ne){delete we[ne]},useAsService:function He(ne,ue){return"serverAuth"===ue?null:ue},modularAPIs:k}};function Ze(ne){if(!(0,c.r3)(we,ne=ne||k._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:ne});return we[ne]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function Se(){return Object.keys(we).map(ne=>we[ne])}}),Ze.App=et,pe}(ae);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function we(pe){(0,c.ZB)(et,pe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),et}(),G=new re.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=q;!function Re(et){(0,k.registerVersion)("@firebase/app-compat","0.2.0",et)}()},9681:(ut,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Zi,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>tn,_addOrOverwriteComponent:()=>nn,_apps:()=>ln,_clearComponents:()=>Ri,_components:()=>mn,_getProvider:()=>Lt,_registerComponent:()=>Wt,_removeServiceInstance:()=>Dr,deleteApp:()=>Ki,getApp:()=>Vn,getApps:()=>wi,initializeApp:()=>Lr,onLog:()=>Bn,registerVersion:()=>zn,setLogLevel:()=>gn});var c=P(5861),B=P(4859),k=P(1877),re=P(2090),ae=P(8766);class ge{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function fe(Qe){return"VERSION"===Qe.getComponent()?.type}(Je)){const wt=Je.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(Je=>Je).join(" ")}}const ce="@firebase/app",q=new k.Yd("@firebase/app"),jt="[DEFAULT]",Ge={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,mn=new Map;function tn(Qe,Ie){try{Qe.container.addComponent(Ie)}catch(Je){q.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Qe.name}`,Je)}}function nn(Qe,Ie){Qe.container.addOrOverwriteComponent(Ie)}function Wt(Qe){const Ie=Qe.name;if(mn.has(Ie))return q.debug(`There were multiple attempts to register component ${Ie}.`),!1;mn.set(Ie,Qe);for(const Je of ln.values())tn(Je,Qe);return!0}function Lt(Qe,Ie){const Je=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Qe.container.getProvider(Ie)}function Dr(Qe,Ie,Je=jt){Lt(Qe,Ie).clearInstance(Je)}function Ri(){mn.clear()}const xn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wi{constructor(Ie,Je,wt){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const Zi="9.15.0";function Lr(Qe,Ie={}){let Je=Qe;"object"!=typeof Ie&&(Ie={name:Ie});const wt=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Ie),Ct=wt.name;if("string"!=typeof Ct||!Ct)throw xn.create("bad-app-name",{appName:String(Ct)});if(Je||(Je=(0,re.aH)()),!Je)throw xn.create("no-options");const Xt=ln.get(Ct);if(Xt){if((0,re.vZ)(Je,Xt.options)&&(0,re.vZ)(wt,Xt.config))return Xt;throw xn.create("duplicate-app",{appName:Ct})}const H=new B.H0(Ct);for(const W of mn.values())H.addComponent(W);const $=new Wi(Je,wt,H);return ln.set(Ct,$),$}function Vn(Qe=jt){const Ie=ln.get(Qe);if(!Ie&&Qe===jt)return Lr();if(!Ie)throw xn.create("no-app",{appName:Qe});return Ie}function wi(){return Array.from(ln.values())}function Ki(Qe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,c.Z)(function*(Qe){const Ie=Qe.name;ln.has(Ie)&&(ln.delete(Ie),yield Promise.all(Qe.container.getProviders().map(Je=>Je.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function zn(Qe,Ie,Je){var wt;let Ct=null!==(wt=Ge[Qe])&&void 0!==wt?wt:Qe;Je&&(Ct+=`-${Je}`);const Xt=Ct.match(/\s|\//),H=Ie.match(/\s|\//);if(Xt||H){const $=[`Unable to register library "${Ct}" with version "${Ie}":`];return Xt&&$.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Xt&&H&&$.push("and"),H&&$.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void q.warn($.join(" "))}Wt(new B.wA(`${Ct}-version`,()=>({library:Ct,version:Ie}),"VERSION"))}function Bn(Qe,Ie){if(null!==Qe&&"function"!=typeof Qe)throw xn.create("invalid-log-argument");(0,k.Am)(Qe,Ie)}function gn(Qe){(0,k.Ub)(Qe)}const yn="firebase-heartbeat-store";let _n=null;function pn(){return _n||(_n=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(Qe,Ie)=>{0===Ie&&Qe.createObjectStore(yn)}}).catch(Qe=>{throw xn.create("idb-open",{originalErrorMessage:Qe.message})})),_n}function dt(){return(dt=(0,c.Z)(function*(Qe){try{return(yield pn()).transaction(yn).objectStore(yn).get(Wn(Qe))}catch(Ie){if(Ie instanceof re.ZR)q.warn(Ie.message);else{const Je=xn.create("idb-get",{originalErrorMessage:Ie?.message});q.warn(Je.message)}}})).apply(this,arguments)}function Rt(Qe,Ie){return zr.apply(this,arguments)}function zr(){return(zr=(0,c.Z)(function*(Qe,Ie){try{const wt=(yield pn()).transaction(yn,"readwrite");return yield wt.objectStore(yn).put(Ie,Wn(Qe)),wt.done}catch(Je){if(Je instanceof re.ZR)q.warn(Je.message);else{const wt=xn.create("idb-set",{originalErrorMessage:Je?.message});q.warn(wt.message)}}})).apply(this,arguments)}function Wn(Qe){return`${Qe.name}!${Qe.options.appId}`}class Ur{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new Qt(Je),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var Ie=this;return(0,c.Z)(function*(){const wt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=Ft();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!Ie._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Ct))return Ie._heartbeatsCache.heartbeats.push({date:Ct,agent:wt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Xt=>{const H=new Date(Xt.date).valueOf();return Date.now()-H<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,c.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const Je=Ft(),{heartbeatsToSend:wt,unsentEntries:Ct}=function ri(Qe,Ie=1024){const Je=[];let wt=Qe.slice();for(const Ct of Qe){const Xt=Je.find(H=>H.agent===Ct.agent);if(Xt){if(Xt.dates.push(Ct.date),nr(Je)>Ie){Xt.dates.pop();break}}else if(Je.push({agent:Ct.agent,dates:[Ct.date]}),nr(Je)>Ie){Je.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:wt}}(Ie._heartbeatsCache.heartbeats),Xt=(0,re.L)(JSON.stringify({version:2,heartbeats:wt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=Je,Ct.length>0?(Ie._heartbeatsCache.heartbeats=Ct,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Xt})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,c.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function ct(Qe){return dt.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var Je=this;return(0,c.Z)(function*(){var wt;if(yield Je._canUseIndexedDBPromise){const Xt=yield Je.read();return Rt(Je.app,{lastSentHeartbeatDate:null!==(wt=Ie.lastSentHeartbeatDate)&&void 0!==wt?wt:Xt.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var Je=this;return(0,c.Z)(function*(){var wt;if(yield Je._canUseIndexedDBPromise){const Xt=yield Je.read();return Rt(Je.app,{lastSentHeartbeatDate:null!==(wt=Ie.lastSentHeartbeatDate)&&void 0!==wt?wt:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...Ie.heartbeats]})}})()}}function nr(Qe){return(0,re.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function Dn(Qe){Wt(new B.wA("platform-logger",Ie=>new ge(Ie),"PRIVATE")),Wt(new B.wA("heartbeat",Ie=>new Ur(Ie),"PRIVATE")),zn(ce,"0.9.0",Qe),zn(ce,"0.9.0","esm2017"),zn("fire-js","")}("")},4859:(ut,Ce,P)=>{P.d(Ce,{H0:()=>ce,wA:()=>k});var c=P(5861),B=P(2090);class k{constructor(q,G,K){this.name=q,this.instanceFactory=G,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const re="[DEFAULT]";class ae{constructor(q,G){this.name=q,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const G=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(G)){const K=new B.BH;if(this.instancesDeferred.set(G,K),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&K.resolve($e)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(q){var G;const K=this.normalizeInstanceIdentifier(q?.identifier),$e=null!==(G=q?.optional)&&void 0!==G&&G;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Re){if($e)return null;throw Re}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function fe(me){return"EAGER"===me.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[G,K]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:$e});K.resolve(Re)}catch{}}}}clearInstance(q=re){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,c.Z)(function*(){const G=Array.from(q.instances.values());yield Promise.all([...G.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...G.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=re){return this.instances.has(q)}getOptions(q=re){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:G={}}=q,K=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:K,options:G});for(const[Re,be]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Re)&&be.resolve($e);return $e}onInit(q,G){var K;const $e=this.normalizeInstanceIdentifier(G),Re=null!==(K=this.onInitCallbacks.get($e))&&void 0!==K?K:new Set;Re.add(q),this.onInitCallbacks.set($e,Re);const be=this.instances.get($e);return be&&q(be,$e),()=>{Re.delete(q)}}invokeOnInitCallbacks(q,G){const K=this.onInitCallbacks.get(G);if(K)for(const $e of K)try{$e(q,G)}catch{}}getOrInitializeService({instanceIdentifier:q,options:G={}}){let K=this.instances.get(q);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(me=q,me===re?void 0:me),options:G}),this.instances.set(q,K),this.instancesOptions.set(q,G),this.invokeOnInitCallbacks(K,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,K)}catch{}var me;return K||null}normalizeInstanceIdentifier(q=re){return this.component?this.component.multipleInstances?q:re:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const G=this.getProvider(q.name);if(G.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);G.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const G=new ae(q,this);return this.providers.set(q,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ce,P)=>{P.d(Ce,{Am:()=>me,Ub:()=>ce,Yd:()=>fe,in:()=>B});const c=[];var B=(()=>{return(q=B||(B={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",B;var q})();const k={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},re=B.INFO,ae={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ge=(q,G,...K)=>{if(G<q.logLevel)return;const $e=(new Date).toISOString(),Re=ae[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${$e}]  ${q.name}:`,...K)};class fe{constructor(G){this.name=G,this._logLevel=re,this._logHandler=ge,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in B))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?k[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...G),this._logHandler(this,B.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...G),this._logHandler(this,B.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,B.INFO,...G),this._logHandler(this,B.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,B.WARN,...G),this._logHandler(this,B.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...G),this._logHandler(this,B.ERROR,...G)}}function ce(q){c.forEach(G=>{G.setLogLevel(q)})}function me(q,G){for(const K of c){let $e=null;G&&G.level&&($e=k[G.level]),K.userLogHandler=null===q?null:(Re,be,...et)=>{const we=et.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");be>=($e??Re.logLevel)&&q({level:B[be].toLowerCase(),message:we,args:et,type:Re.name})}}}},259:(ut,Ce,P)=>{P.d(Ce,{C6:()=>c.getApps,KN:()=>c.registerVersion,Mq:()=>c.getApp,ZF:()=>c.initializeApp});var c=P(9681);(0,c.registerVersion)("firebase","9.15.0","app")},9260:(ut,Ce,P)=>{P.d(Ce,{Z:()=>c.Z});var c=P(3942);c.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(ut,Ce,P)=>{P.r(Ce);var c=P(5861),B=P(3942),k=P(552),re=P(2090),fe=(P(9681),P(1877),P(4859));function ce(){return window}function G(){return(G=(0,c.Z)(function*(U,R,L){var te;const{BuildInfo:Ne}=ce();(0,k.ap)(R.sessionId,"AuthEvent did not contain a session ID");const tt=yield pe(R.sessionId),st={};return(0,k.aq)()?st.ibi=Ne.packageName:(0,k.ar)()?st.apn=Ne.packageName:(0,k.as)(U,"operation-not-supported-in-this-environment"),Ne.displayName&&(st.appDisplayName=Ne.displayName),st.sessionId=tt,(0,k.at)(U,L,R.type,void 0,null!==(te=R.eventId)&&void 0!==te?te:void 0,st)})).apply(this,arguments)}function $e(){return($e=(0,c.Z)(function*(U){const{BuildInfo:R}=ce(),L={};(0,k.aq)()?L.iosBundleId=R.packageName:(0,k.ar)()?L.androidPackageName=R.packageName:(0,k.as)(U,"operation-not-supported-in-this-environment"),yield(0,k.au)(U,L)})).apply(this,arguments)}function et(){return(et=(0,c.Z)(function*(U,R,L){const{cordova:te}=ce();let Ne=()=>{};try{yield new Promise((tt,st)=>{let De=null;function Le(){var Pt;tt();const dn=null===(Pt=te.plugins.browsertab)||void 0===Pt?void 0:Pt.close;"function"==typeof dn&&dn(),"function"==typeof L?.close&&L.close()}function Nt(){De||(De=window.setTimeout(()=>{st((0,k.aw)(U,"redirect-cancelled-by-user"))},2e3))}function cn(){"visible"===document?.visibilityState&&Nt()}R.addPassiveListener(Le),document.addEventListener("resume",Nt,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",cn,!1),Ne=()=>{R.removePassiveListener(Le),document.removeEventListener("resume",Nt,!1),document.removeEventListener("visibilitychange",cn,!1),De&&window.clearTimeout(De)}})}finally{Ne()}})).apply(this,arguments)}function pe(U){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,c.Z)(function*(U){const R=Ze(U),L=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(L)).map(Ne=>Ne.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(U){if((0,k.ap)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const R=new ArrayBuffer(U.length),L=new Uint8Array(R);for(let te=0;te<U.length;te++)L[te]=U.charCodeAt(te);return L}class Se extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(R)),super.onEvent(R)}initialized(){var R=this;return(0,c.Z)(function*(){yield R.initPromise})()}}function ne(U){return ue.apply(this,arguments)}function ue(){return(ue=(0,c.Z)(function*(U){const R=yield J()._get(de(U));return R&&(yield J()._remove(de(U))),R})).apply(this,arguments)}function Z(){const U=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const te=Math.floor(Math.random()*R.length);U.push(R.charAt(te))}return U.join("")}function J(){return(0,k.az)(k.b)}function de(U){return(0,k.aA)("authEvent",U.config.apiKey,U.name)}function Ve(U){if(!U?.includes("?"))return{};const[R,...L]=U.split("?");return(0,re.zd)(L.join("?"))}function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function Wt(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function Dr(U=(0,re.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zi(){try{const U=self.localStorage,R=k.aI();if(U)return U.setItem(R,"1"),U.removeItem(R),!function Wi(U=(0,re.z$)()){return function Fr(){return(0,re.w1)()&&11===document?.documentMode}()||function xn(U=(0,re.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,re.hl)()}catch{return Lr()&&(0,re.hl)()}return!1}function Lr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function Lt(){return"http:"===Wt()||"https:"===Wt()}()||(0,re.ru)()||Dr())&&!function Ri(){return(0,re.b$)()||(0,re.UG)()}()&&Zi()&&!Lr()}function wi(){return Dr()&&typeof document<"u"}function Ke(){return(Ke=(0,c.Z)(function*(){return!!wi()&&new Promise(U=>{const R=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),U(!0)})})})).apply(this,arguments)}const Bn={LOCAL:"local",NONE:"none",SESSION:"session"},gn=k.ax,hr="persistence";function yn(U){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(U){yield U._initializationPromise;const R=ct(),L=k.aA(hr,U.config.apiKey,U.name);R&&R.setItem(L,U._getPersistence())})).apply(this,arguments)}function ct(){var U;try{return(null===(U=function zn(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const dt=k.ax;class Rt{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(class sn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(R){var L=this;return(0,c.Z)(function*(){const te=R._key();let Ne=L.eventManagers.get(te);return Ne||(Ne=new Se(R),L.eventManagers.set(te,Ne),L.attachCallbackListeners(R,Ne)),Ne})()}_openPopup(R){(0,k.as)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,L,te,Ne){var tt=this;return(0,c.Z)(function*(){!function we(U){var R,L,te,Ne,tt,st,De,Le,Nt,cn;const Pt=ce();(0,k.ax)("function"==typeof(null===(R=Pt?.universalLinks)||void 0===R?void 0:R.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(L=Pt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(tt=null===(Ne=null===(te=Pt?.cordova)||void 0===te?void 0:te.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===tt?void 0:tt.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Le=null===(De=null===(st=Pt?.cordova)||void 0===st?void 0:st.plugins)||void 0===De?void 0:De.browsertab)||void 0===Le?void 0:Le.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(cn=null===(Nt=Pt?.cordova)||void 0===Nt?void 0:Nt.InAppBrowser)||void 0===cn?void 0:cn.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const st=yield tt._initialize(R);yield st.initialized(),st.resetRedirect(),(0,k.aD)(),yield tt._originValidation(R);const De=function Ee(U,R,L=null){return{type:R,eventId:L,urlResponse:null,sessionId:Z(),postBody:null,tenantId:U.tenantId,error:(0,k.aw)(U,"no-auth-event")}}(R,te,Ne);yield function He(U,R){return J()._set(de(U),R)}(R,De);const Le=yield function q(U,R,L){return G.apply(this,arguments)}(R,De,L),Nt=yield function Re(U){const{cordova:R}=ce();return new Promise(L=>{R.plugins.browsertab.isAvailable(te=>{let Ne=null;te?R.plugins.browsertab.openUrl(U):Ne=R.InAppBrowser.open(U,(0,k.av)()?"_blank":"_system","location=yes"),L(Ne)})})}(Le);return function be(U,R,L){return et.apply(this,arguments)}(R,st,Nt)})()}_isIframeWebStorageSupported(R,L){throw new Error("Method not implemented.")}_originValidation(R){const L=R._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function K(U){return $e.apply(this,arguments)}(R)),this.originValidationPromises[L]}attachCallbackListeners(R,L){const{universalLinks:te,handleOpenURL:Ne,BuildInfo:tt}=ce(),st=setTimeout((0,c.Z)(function*(){yield ne(R),L.onEvent(Ge())}),500),De=function(){var cn=(0,c.Z)(function*(Pt){clearTimeout(st);const dn=yield ne(R);let Yi=null;dn&&Pt?.url&&(Yi=function ye(U,R){var L,te;const Ne=function Ue(U){const R=Ve(U),L=R.link?decodeURIComponent(R.link):void 0,te=Ve(L).link,Ne=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return Ve(Ne).link||Ne||te||L||U}(R);if(Ne.includes("/__/auth/callback")){const tt=Ve(Ne),st=tt.firebaseError?function ie(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(tt.firebaseError)):null,De=null===(te=null===(L=st?.code)||void 0===L?void 0:L.split("auth/"))||void 0===te?void 0:te[1],Le=De?(0,k.aw)(De):null;return Le?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Ne,postBody:null}}return null}(dn,Pt.url)),L.onEvent(Yi||Ge())});return function(dn){return cn.apply(this,arguments)}}();typeof te<"u"&&"function"==typeof te.subscribe&&te.subscribe(null,De);const Le=Ne,Nt=`${tt.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var cn=(0,c.Z)(function*(Pt){if(Pt.toLowerCase().startsWith(Nt)&&De({url:Pt}),"function"==typeof Le)try{Le(Pt)}catch(dn){console.error(dn)}});return function(Pt){return cn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(R){var L=this;return(0,c.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,L,te,Ne){var tt=this;return(0,c.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openPopup(R,L,te,Ne)})()}_openRedirect(R,L,te,Ne){var tt=this;return(0,c.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openRedirect(R,L,te,Ne)})()}_isIframeWebStorageSupported(R,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,L)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return wi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,c.Z)(function*(){if(R.underlyingResolver)return;const L=yield function Ki(){return Ke.apply(this,arguments)}();R.underlyingResolver=L?R.cordovaResolver:R.browserResolver})()}}function zr(U){return U.unwrap()}function Cr(U){return Ur(U)}function Ur(U){const{_tokenResponse:R}=U instanceof re.ZR?U.customData:U;if(!R)return null;if(!(U instanceof re.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return k.P.credentialFromResult(U);const L=R.providerId;if(!L||L===k.o.PASSWORD)return null;let te;switch(L){case k.o.GOOGLE:te=k.Q;break;case k.o.FACEBOOK:te=k.N;break;case k.o.GITHUB:te=k.T;break;case k.o.TWITTER:te=k.W;break;default:const{oauthIdToken:Ne,oauthAccessToken:tt,oauthTokenSecret:st,pendingToken:De,nonce:Le}=R;return tt||st||Ne||De?De?L.startsWith("saml.")?k.aL._create(L,De):k.J._fromParams({providerId:L,signInMethod:L,pendingToken:De,idToken:Ne,accessToken:tt}):new k.U(L).credential({idToken:Ne,accessToken:tt,rawNonce:Le}):null}return U instanceof re.ZR?te.credentialFromError(U):te.credentialFromResult(U)}function Ft(U,R){return R.catch(L=>{throw L instanceof re.ZR&&function Dt(U,R){var L;const te=null===(L=R.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===R?.code)R.resolver=new nr(U,k.an(U,R));else if(te){const Ne=Ur(R),tt=R;Ne&&(tt.credential=Ne,tt.tenantId=te.tenantId||void 0,tt.email=te.email||void 0,tt.phoneNumber=te.phoneNumber||void 0)}}(U,L),L}).then(L=>{const Ne=L.user;return{operationType:L.operationType,credential:Cr(L),additionalUserInfo:k.al(L),user:Dn.getOrCreate(Ne)}})}function ri(U,R){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(U,R){const L=yield R;return{verificationId:L.verificationId,confirm:te=>Ft(U,L.confirm(te))}})).apply(this,arguments)}class nr{constructor(R,L){this.resolver=L,this.auth=function Wn(U){return U.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return Ft(zr(this.auth),this.resolver.resolveSignIn(R))}}class Dn{constructor(R){this._delegate=R,this.multiFactor=k.ao(R)}static getOrCreate(R){return Dn.USER_MAP.has(R)||Dn.USER_MAP.set(R,new Dn(R)),Dn.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var L=this;return(0,c.Z)(function*(){return Ft(L.auth,k.Z(L._delegate,R))})()}linkWithPhoneNumber(R,L){var te=this;return(0,c.Z)(function*(){return ri(te.auth,k.l(te._delegate,R,L))})()}linkWithPopup(R){var L=this;return(0,c.Z)(function*(){return Ft(L.auth,k.d(L._delegate,R,Rt))})()}linkWithRedirect(R){var L=this;return(0,c.Z)(function*(){return yield yn(k.aE(L.auth)),k.g(L._delegate,R,Rt)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var L=this;return(0,c.Z)(function*(){return Ft(L.auth,k._(L._delegate,R))})()}reauthenticateWithPhoneNumber(R,L){return ri(this.auth,k.r(this._delegate,R,L))}reauthenticateWithPopup(R){return Ft(this.auth,k.e(this._delegate,R,Rt))}reauthenticateWithRedirect(R){var L=this;return(0,c.Z)(function*(){return yield yn(k.aE(L.auth)),k.h(L._delegate,R,Rt)})()}sendEmailVerification(R){return k.ab(this._delegate,R)}unlink(R){var L=this;return(0,c.Z)(function*(){return yield k.ak(L._delegate,R),L})()}updateEmail(R){return k.ag(this._delegate,R)}updatePassword(R){return k.ah(this._delegate,R)}updatePhoneNumber(R){return k.u(this._delegate,R)}updateProfile(R){return k.af(this._delegate,R)}verifyBeforeUpdateEmail(R,L){return k.ac(this._delegate,R,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Dn.USER_MAP=new WeakMap;const Qe=k.ax;let Ie=(()=>{class U{constructor(L,te){if(this.app=L,te.isInitialized())return this._delegate=te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ne}=L.options;Qe(Ne,"invalid-api-key",{appName:L.name}),Qe(Ne,"invalid-api-key",{appName:L.name});const tt=typeof window<"u"?Rt:void 0;this._delegate=te.initialize({options:{persistence:wt(Ne,L.name),popupRedirectResolver:tt}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Dn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,te){k.G(this._delegate,L,te)}applyActionCode(L){return k.a2(this._delegate,L)}checkActionCode(L){return k.a3(this._delegate,L)}confirmPasswordReset(L,te){return k.a1(this._delegate,L,te)}createUserWithEmailAndPassword(L,te){var Ne=this;return(0,c.Z)(function*(){return Ft(Ne._delegate,k.a5(Ne._delegate,L,te))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return k.aa(this._delegate,L)}isSignInWithEmailLink(L){return k.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,c.Z)(function*(){Qe(Vn(),L._delegate,"operation-not-supported-in-this-environment");const te=yield k.j(L._delegate,Rt);return te?Ft(L._delegate,Promise.resolve(te)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function ln(U,R){(0,k.aE)(U)._logFramework(R)}(this._delegate,L)}onAuthStateChanged(L,te,Ne){const{next:tt,error:st,complete:De}=Je(L,te,Ne);return this._delegate.onAuthStateChanged(tt,st,De)}onIdTokenChanged(L,te,Ne){const{next:tt,error:st,complete:De}=Je(L,te,Ne);return this._delegate.onIdTokenChanged(tt,st,De)}sendSignInLinkToEmail(L,te){return k.a7(this._delegate,L,te)}sendPasswordResetEmail(L,te){return k.a0(this._delegate,L,te||void 0)}setPersistence(L){var te=this;return(0,c.Z)(function*(){let Ne;switch(function Ps(U,R){gn(Object.values(Bn).includes(R),U,"invalid-persistence-type"),(0,re.b$)()?gn(R!==Bn.SESSION,U,"unsupported-persistence-type"):(0,re.UG)()?gn(R===Bn.NONE,U,"unsupported-persistence-type"):Lr()?gn(R===Bn.NONE||R===Bn.LOCAL&&(0,re.hl)(),U,"unsupported-persistence-type"):gn(R===Bn.NONE||Zi(),U,"unsupported-persistence-type")}(te._delegate,L),L){case Bn.SESSION:Ne=k.a;break;case Bn.LOCAL:Ne=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case Bn.NONE:Ne=k.L;break;default:return k.as("argument-error",{appName:te._delegate.name})}return te._delegate.setPersistence(Ne)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Ft(this._delegate,k.X(this._delegate))}signInWithCredential(L){return Ft(this._delegate,k.Y(this._delegate,L))}signInWithCustomToken(L){return Ft(this._delegate,k.$(this._delegate,L))}signInWithEmailAndPassword(L,te){return Ft(this._delegate,k.a6(this._delegate,L,te))}signInWithEmailLink(L,te){return Ft(this._delegate,k.a9(this._delegate,L,te))}signInWithPhoneNumber(L,te){return ri(this._delegate,k.s(this._delegate,L,te))}signInWithPopup(L){var te=this;return(0,c.Z)(function*(){return Qe(Vn(),te._delegate,"operation-not-supported-in-this-environment"),Ft(te._delegate,k.c(te._delegate,L,Rt))})()}signInWithRedirect(L){var te=this;return(0,c.Z)(function*(){return Qe(Vn(),te._delegate,"operation-not-supported-in-this-environment"),yield yn(te._delegate),k.f(te._delegate,L,Rt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return k.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=Bn,U})();function Je(U,R,L){let te=U;"function"!=typeof U&&({next:te,error:R,complete:L}=U);const Ne=te;return{next:st=>Ne(st&&Dn.getOrCreate(st)),error:R,complete:L}}function wt(U,R){const L=function pn(U,R){const L=ct();if(!L)return[];const te=k.aA(hr,U,R);switch(L.getItem(te)){case Bn.NONE:return[k.L];case Bn.LOCAL:return[k.i,k.a];case Bn.SESSION:return[k.a];default:return[]}}(U,R);if(typeof self<"u"&&!L.includes(k.i)&&L.push(k.i),typeof window<"u")for(const te of[k.b,k.a])L.includes(te)||L.push(te);return L.includes(k.L)||L.push(k.L),L}class Ct{constructor(){this.providerId="phone",this._delegate=new k.P(zr(B.Z.auth()))}static credential(R,L){return k.P.credential(R,L)}verifyPhoneNumber(R,L){return this._delegate.verifyPhoneNumber(R,L)}unwrap(){return this._delegate}}Ct.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Ct.PROVIDER_ID=k.P.PROVIDER_ID;const Xt=k.ax;class H{constructor(R,L,te=B.Z.app()){var Ne;Xt(null===(Ne=te.options)||void 0===Ne?void 0:Ne.apiKey,"invalid-api-key",{appName:te.name}),this._delegate=new k.R(R,L,te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function W(U){U.INTERNAL.registerComponent(new fe.wA("auth-compat",R=>{const L=R.getProvider("app-compat").getImmediate(),te=R.getProvider("auth");return new Ie(L,te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Ct,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:H,TwitterAuthProvider:k.W,Auth:Ie,AuthCredential:k.H,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.3.0")}(B.Z)},8766:(ut,Ce,P)=>{P.d(Ce,{Lj:()=>Fe,X3:()=>Ze});var c=P(5861);let k,re;const fe=new WeakMap,ce=new WeakMap,me=new WeakMap,q=new WeakMap,G=new WeakMap;let Re={get(ue,ye,Z){if(ue instanceof IDBTransaction){if("done"===ye)return ce.get(ue);if("objectStoreNames"===ye)return ue.objectStoreNames||me.get(ue);if("store"===ye)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return pe(ue[ye])},set:(ue,ye,Z)=>(ue[ye]=Z,!0),has:(ue,ye)=>ue instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in ue};function we(ue){return"function"==typeof ue?function et(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...ye){return ue.apply(Ye(this),ye),pe(fe.get(this))}:function(...ye){return pe(ue.apply(Ye(this),ye))}:function(ye,...Z){const J=ue.call(Ye(this),ye,...Z);return me.set(J,ye.sort?ye.sort():[ye]),pe(J)}}(ue):(ue instanceof IDBTransaction&&function $e(ue){if(ce.has(ue))return;const ye=new Promise((Z,J)=>{const de=()=>{ue.removeEventListener("complete",ie),ue.removeEventListener("error",Ue),ue.removeEventListener("abort",Ue)},ie=()=>{Z(),de()},Ue=()=>{J(ue.error||new DOMException("AbortError","AbortError")),de()};ue.addEventListener("complete",ie),ue.addEventListener("error",Ue),ue.addEventListener("abort",Ue)});ce.set(ue,ye)}(ue),((ue,ye)=>ye.some(Z=>ue instanceof Z))(ue,function ae(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Re):ue)}function pe(ue){if(ue instanceof IDBRequest)return function K(ue){const ye=new Promise((Z,J)=>{const de=()=>{ue.removeEventListener("success",ie),ue.removeEventListener("error",Ue)},ie=()=>{Z(pe(ue.result)),de()},Ue=()=>{J(ue.error),de()};ue.addEventListener("success",ie),ue.addEventListener("error",Ue)});return ye.then(Z=>{Z instanceof IDBCursor&&fe.set(Z,ue)}).catch(()=>{}),G.set(ye,ue),ye}(ue);if(q.has(ue))return q.get(ue);const ye=we(ue);return ye!==ue&&(q.set(ue,ye),G.set(ye,ue)),ye}const Ye=ue=>G.get(ue);function Ze(ue,ye,{blocked:Z,upgrade:J,blocking:de,terminated:ie}={}){const Ue=indexedDB.open(ue,ye),Ve=pe(Ue);return J&&Ue.addEventListener("upgradeneeded",lt=>{J(pe(Ue.result),lt.oldVersion,lt.newVersion,pe(Ue.transaction))}),Z&&Ue.addEventListener("blocked",()=>Z()),Ve.then(lt=>{ie&&lt.addEventListener("close",()=>ie()),de&&lt.addEventListener("versionchange",()=>de())}).catch(()=>{}),Ve}function Fe(ue,{blocked:ye}={}){const Z=indexedDB.deleteDatabase(ue);return ye&&Z.addEventListener("blocked",()=>ye()),pe(Z).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],He=new Map;function ne(ue,ye){if(!(ue instanceof IDBDatabase)||ye in ue||"string"!=typeof ye)return;if(He.get(ye))return He.get(ye);const Z=ye.replace(/FromIndex$/,""),J=ye!==Z,de=Ee.includes(Z);if(!(Z in(J?IDBIndex:IDBObjectStore).prototype)||!de&&!Se.includes(Z))return;const ie=function(){var Ue=(0,c.Z)(function*(Ve,...lt){const sn=this.transaction(Ve,de?"readwrite":"readonly");let jt=sn.store;return J&&(jt=jt.index(lt.shift())),(yield Promise.all([jt[Z](...lt),de&&sn.done]))[0]});return function(lt){return Ue.apply(this,arguments)}}();return He.set(ye,ie),ie}!function be(ue){Re=ue(Re)}(ue=>({...ue,get:(ye,Z,J)=>ne(ye,Z)||ue.get(ye,Z,J),has:(ye,Z)=>!!ne(ye,Z)||ue.has(ye,Z)}))},5861:(ut,Ce,P)=>{function c(k,re,ae,ge,fe,ce,me){try{var q=k[ce](me),G=q.value}catch(K){return void ae(K)}q.done?re(G):Promise.resolve(G).then(ge,fe)}function B(k){return function(){var re=this,ae=arguments;return new Promise(function(ge,fe){var ce=k.apply(re,ae);function me(G){c(ce,ge,fe,me,q,"next",G)}function q(G){c(ce,ge,fe,me,q,"throw",G)}me(void 0)})}}P.d(Ce,{Z:()=>B})}},ut=>{ut(ut.s=5838)}]);